(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";var a;!function(e){e.Sum="+",e.Count="#",e.Min="<",e.Max=">"}(a||(a={}))},113:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return d}));var a=n(16),r=n(8),i=n(49),o=150,c=370,l=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:i.b.RowInsertAbove},{name:e.rowOperations.insertBelow,type:i.b.RowInsertBelow},{name:e.rowOperations.delete,type:i.b.RowDelete},{name:e.rowOperations.clear,type:i.b.RowClear}]}]},s=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i="".concat(n,"-").concat(0===a?1:a),o=r.find(t,{name:i});return o?e(t,n,a+1):i},u=function(e){return e.original.entryInfo.name},d=function(e){return Object(a.a)(Object(a.a)({},e),{},{entryExpression:{uid:e.entryExpression.uid}})}},115:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},116:function(e,t){},117:function(e,t){},118:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Feel="FEEL",e.Java="JAVA",e.Pmml="PMML"}(a||(a={}))},119:function(e,t,n){"use strict";var a;!function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},120:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},121:function(e,t){},122:function(e,t,n){},146:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u}));var a=n(0),r=n(16),i=n(149),o=Object(r.a)(Object(r.a)({},i.en),{},{addParameter:"Add parameter",choose:"Choose...",class:"class",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",delete:"Delete",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editParameter:"Edit Parameter",editParameters:"Edit parameters",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",methodSignature:"method signature",name:"Name",parameters:"PARAMETERS",relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectFunctionKind:"Select Function Kind",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:o},l=new Map([["en",o]]),s=a.createContext({});function u(){return Object(a.useContext)(s)}},147:function(e,t,n){"use strict";var a=n(80),r=n(0),i=n(31);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));n(2);window.renderBoxedExpressionEditor=function(e,t){i.render(r.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},172:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(3),r=n(0),i=n(31),o=(n(178),n(147)),c=function(){var e=Object(r.useState)({uid:"id1",name:"Expression Name",dataType:"<Undefined>",logicType:"Relation",isHeadless:!1,columns:[{name:"column-1",dataType:"<Undefined>"}],rows:[["eee"]]}),t=Object(a.a)(e,2),n=t[0],c=t[1];return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){var t=window.performance.now();c(e);var n=document.getElementById("performance");i.render(r.createElement(o.BoxedExpressionEditor,{expressionDefinition:{selectedExpression:e}}),n);var a=window.performance.now();console.log("time: ".concat(a-t,"ms"))},broadcastContextExpressionDefinition:function(e){return c(e)},broadcastListExpressionDefinition:function(e){return c(e)},broadcastInvocationExpressionDefinition:function(e){return c(e)},broadcastFunctionExpressionDefinition:function(e){return c(e)}},Object(r.useMemo)((function(){return r.createElement("div",{className:"showcase"},r.createElement("div",{id:"performance",className:"boxed-expression"}),r.createElement("div",{className:"updated-json"},r.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation, context, list, invocation and function logic types"),r.createElement("pre",null,JSON.stringify(n,null,2))))}),[n])};i.render(r.createElement(c,null),document.getElementById("root"))},178:function(e,t,n){},179:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},2:function(e,t,n){"use strict";n(111),n(112);var a=n(113);n.d(t,"DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH",(function(){return a.a})),n.d(t,"DEFAULT_ENTRY_INFO_MIN_WIDTH",(function(){return a.b})),n.d(t,"generateNextAvailableEntryName",(function(){return a.c})),n.d(t,"getEntryKey",(function(){return a.d})),n.d(t,"getHandlerConfiguration",(function(){return a.e})),n.d(t,"resetEntry",(function(){return a.f}));var r=n(115);n.d(t,"DataType",(function(){return r.a}));var i=n(116);n.o(i,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return i.FunctionKind})),n.o(i,"LogicType")&&n.d(t,"LogicType",(function(){return i.LogicType})),n.o(i,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return i.TableHeaderVisibility})),n.o(i,"TableOperation")&&n.d(t,"TableOperation",(function(){return i.TableOperation}));var o=n(117);n.o(o,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return o.FunctionKind})),n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return o.TableHeaderVisibility})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var c=n(118);n.d(t,"FunctionKind",(function(){return c.a}));n(119);var l=n(120);n.d(t,"LogicType",(function(){return l.a}));var s=n(49);n.d(t,"TableHeaderVisibility",(function(){return s.a})),n.d(t,"TableOperation",(function(){return s.b}))},21:function(e,t,n){"use strict";var a=n(121);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var r=n(146);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return r.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return r.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return r.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return r.d}))},212:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},287:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},49:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear"}(r||(r={}))},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));n(179);var a=n(3),r=n(0),i=(n(180),n(181),n(182),n(148)),o=n(16),c=(n(183),n(2)),l=(n(184),n(185),n(304)),s=n(50),u=n(313),d=n(7),p=n(21),b=n(8),f=function(e){var t=e.selectedDataType,n=e.onDataTypeChange,i=e.menuAppendTo,o=Object(p.useBoxedExpressionEditorI18n)().i18n,l=Object(r.useState)(!1),f=Object(a.a)(l,2),m=f[0],E=f[1],v=Object(r.useCallback)((function(e,t){E(!1),n(t)}),[n]),O=Object(r.useCallback)((function(){return b.map(Object.values(c.DataType),(function(e){return r.createElement(s.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),y=Object(r.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return O()}return""!==e.target.value?O().filter((function(e){return t.test(e.props.value)})):O()}),[O]),x=Object(r.useCallback)((function(e){return E(e)}),[]);return r.createElement(u.a,{menuAppendTo:i,ouiaId:"edit-expression-data-type",variant:d.e.typeahead,typeAheadAriaLabel:o.choose,onToggle:x,onSelect:v,onFilter:y,isOpen:m,selections:t,hasInlineFilter:!0,inlineFilterPlaceholderText:o.choose},O())},m=(n(198),n(314)),E=(n(199),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,i=e.title,o=e.appendTo,c=e.className,l=e.hasAutoWidth,s=e.minWidth;return r.createElement(m.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:l,minWidth:s,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:o,headerContent:r.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},i),bodyContent:a},t)}),v=r.createContext({}),O="Expression Name",y=function(e){var t,n,i,o,l,s,u=e.children,d=e.appendTo,b=e.arrowPlacement,m=e.title,y=e.nameField,x=e.dataTypeField,j=e.selectedDataType,h=void 0===j?c.DataType.Undefined:j,T=e.selectedExpressionName,C=e.onExpressionUpdate,g=Object(r.useContext)(v),w=Object(p.useBoxedExpressionEditorI18n)().i18n;m=null!==(t=m)&&void 0!==t?t:w.editExpression,y=null!==(n=y)&&void 0!==n?n:w.name,x=null!==(i=x)&&void 0!==i?i:w.dataType,d=null!==(o=null!==(l=d)&&void 0!==l?l:null===(s=g.boxedExpressionEditorRef)||void 0===s?void 0:s.current)&&void 0!==o?o:void 0;var R=Object(r.useState)(h),I=Object(a.a)(R,2),k=I[0],N=I[1],L=Object(r.useState)(T),D=Object(a.a)(L,2),S=D[0],H=D[1];Object(r.useEffect)((function(){H(T)}),[T]),Object(r.useEffect)((function(){N(h)}),[h]);var U=Object(r.useCallback)((function(e){H(e.target.value),"blur"===e.type&&C({name:e.target.value,dataType:k})}),[k,C]),F=Object(r.useCallback)((function(e){N(e),C({name:S,dataType:e})}),[S,C]);return r.createElement(E,{title:m,arrowPlacement:b,appendTo:d,body:r.createElement("div",{className:"edit-expression-menu"},r.createElement("div",{className:"expression-name"},r.createElement("label",null,y),r.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:S,onChange:U,onBlur:U,className:"form-control pf-c-form-control",placeholder:O})),r.createElement("div",{className:"expression-data-type"},r.createElement("label",null,x),r.createElement(f,{selectedDataType:k,onDataTypeChange:F})))},u)},x=(n(122),n(163)),j=n(164),h=n(11),T=n(12),C=150,g=function(e){return Math.max(Math.round(parseFloat(e+"")),C)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},R=function(){function e(t,n,a){Object(h.a)(this,e),this.element=t,this.children=n,this.depth=a,this.id=void 0,this.lastColumn=void 0,this.rect=void 0,this.parentRow=void 0}return Object(T.a)(e,[{key:"getId",value:function(){return this.id||(this.id=b.first([].slice.call(this.element.classList).filter((function(e){return e.match(/uuid-/g)})))||""),this.id}},{key:"getRect",value:function(){return this.rect||(this.rect=this.element.getBoundingClientRect()),this.rect}},{key:"isLastColumn",value:function(){var e;this.lastColumn||(this.lastColumn=(null===(e=this.getParentRow())||void 0===e?void 0:e.lastChild)===this.element.closest("th, td"));return this.lastColumn}},{key:"setWidth",value:function(e){var t=g(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;document.dispatchEvent(new CustomEvent(e,{detail:{width:t}}))}(this.getId(),t),this.element.style.width=t+"px"}},{key:"refreshWidthAsParent",value:function(){this.children.length>0&&this.setWidth(this.fetchChildWidth()+14)}},{key:"refreshWidthAsLastColumn",value:function(){var e;if(this.isLastColumn()){var t=null===(e=this.getParentRow())||void 0===e?void 0:e.getBoundingClientRect();t&&this.setWidth(Math.round(t.right)-Math.round(this.getRect().x)-1)}}},{key:"getParentRow",value:function(){return this.parentRow||(this.parentRow=this.element.closest("tr")),this.parentRow}},{key:"fetchChildWidth",value:function(){var e=this.element.querySelector("thead, tbody");return g(null===e||void 0===e?void 0:e.getBoundingClientRect().width)}}]),e}(),I=function(){function e(){Object(h.a)(this,e),this.cells=void 0}return Object(T.a)(e,[{key:"getCells",value:function(){return void 0===this.cells&&(this.cells=this.buildCells()),this.cells}},{key:"buildCells",value:function(){var e=this,t=[];return this.fetchCellElements(document.body).forEach((function(n){e.buildCell(n,t,0)})),t}},{key:"buildCell",value:function(e,t,n){var a=this,r=t.find((function(t){return t.element===e}));if(r)return r;var i=new R(e,this.fetchCellElements(e).map((function(e){return a.buildCell(e,t,n+1)})).filter((function(e){return e.depth==n+1})),n);return t.push(i),i}},{key:"fetchCellElements",value:function(e){var t=e.querySelectorAll(".react-resizable");return[].slice.call(t)}}]),e}(),k=function(){(new N).execute()},N=function(){function e(){Object(h.a)(this,e),this.domSession=void 0,this.domSession=new I}return Object(T.a)(e,[{key:"execute",value:function(){var e=this.domSession.getCells();e.sort((function(e,t){return t.depth-e.depth})).forEach(this.refreshWidthAsParent),e.sort((function(e,t){return e.depth-t.depth})).forEach(this.refreshWidthAsLastColumn)}},{key:"refreshWidthAsParent",value:function(e){e.refreshWidthAsParent()}},{key:"refreshWidthAsLastColumn",value:function(e){e.refreshWidthAsLastColumn()}}]),e}(),L=function(e){var t=e.children,n=e.height,i=void 0===n?"100%":n,o=e.minWidth,c=e.onHorizontalResizeStop,l=e.width,s=Object(r.useState)(l),u=Object(a.a)(s,2),d=u[0],p=u[1],f=Object(r.useState)(0),m=Object(a.a)(f,2),E=m[0],O=m[1],y=Object(r.useState)([]),h=Object(a.a)(y,2),T=h[0],w=h[1],R=Object(r.useContext)(v).setSupervisorHash,k=Object(r.useMemo)((function(){return"uuid-".concat(Object(j.v4)())}),[]),N=Object(r.useMemo)((function(){return null!==o&&void 0!==o?o:C}),[o]),L=Object(r.useMemo)((function(){return"".concat("100%"===i?"height-based-on-content":""," ").concat(k)}),[i,k]);Object(r.useLayoutEffect)((function(){function e(e){var t=Math.round(e.detail.width);p(t),null===c||void 0===c||c(t)}return document.addEventListener(k,e),function(){document.removeEventListener(k,e)}}),[k,c,d]);var D=Object(r.useCallback)(g,[]),S=Object(r.useCallback)((function(e,t){var n=[],a=t.element.closest("table"),r=t.getRect(),i=function(e){return null===a||void 0===a?void 0:a.contains(e.element)};if(t.isLastColumn())e.filter((function(e){return e.isLastColumn()})).forEach((function(e){n.push(e)}));else{var o=!1;e.forEach((function(e){(i(e)||function(e){var n;return null===(n=e.element)||void 0===n?void 0:n.contains(t.element)}(e))&&function(e){var t=e.getRect();return t.x<=r.x&&t.right>=r.right}(e)&&(n.push(e),e.isLastColumn()&&(o=!0))})),o&&e.filter((function(e){return e.isLastColumn()&&!i(e)})).forEach((function(e){n.push(e)}))}return n.forEach((function(e){e.element.dataset.initialWidth=e.element.style.width})),b.uniqBy(n,(function(e){return e.getId()}))}),[]),H=Object(r.useCallback)((function(){var e=(new I).getCells(),t=e.find((function(e){return e.getId()===k})),n=S(e,t),a=D(t.getRect().width);w(n),O(a)}),[S,k,D]),U=Object(r.useCallback)((function(e,t){var n=parseInt(t.size.width+"");T.forEach((function(e){var t=n-E,a=e.element;if(!(e.getId()===k)){var r=parseInt(a.dataset.initialWidth+"");a.style.width=r+t+"px"}}))}),[T,k,E]),F=Object(r.useCallback)((function(e,t){var n=D(t.size.width);T.forEach((function(e){var t=n-E,a=D(e.element.dataset.initialWidth);e.setWidth(a+t)})),R("-")}),[T,E,R,D]);return Object(r.useMemo)((function(){return r.createElement(x.ResizableBox,{className:L,width:d,minConstraints:[N,0],height:0,axis:"x",onResize:U,onResizeStop:F,onResizeStart:H,handle:r.createElement("div",{className:"pf-c-drawer"},r.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},r.createElement("div",{className:"pf-c-drawer__splitter-handle"})))},t)}),[L,U,F,H,t])},D=function(e){var t=e.children,n=Object(r.useContext)(v).supervisorHash;return Object(r.useEffect)((function(){var e=setTimeout(k,0);return function(){return clearTimeout(e)}}),[n]),r.createElement("div",null,t)},S=function(e){var t=e.uid,n=e.content,i=void 0===n?"":n,s=e.dataType,u=void 0===s?c.DataType.Undefined:s,d=e.name,p=void 0===d?O:d,b=e.onUpdatingNameAndDataType,f=e.isHeadless,m=void 0!==f&&f,E=e.onUpdatingRecursiveExpression,v=e.width,x=Object(r.useState)(p),j=Object(a.a)(x,2),h=j[0],T=j[1],C=Object(r.useState)(u),g=Object(a.a)(C,2),w=g[0],R=g[1],I=Object(r.useRef)(i),k=Object(r.useRef)(v||250),N=Object(r.useCallback)((function(){var e,n,a=Object(o.a)({uid:t,name:h,dataType:w,logicType:c.LogicType.LiteralExpression,content:I.current},m||250===k.current?{}:{width:k.current});m?null===E||void 0===E||E(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[w,h,m,E,t]),D=Object(r.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,r=void 0===a?O:a;T(r),R(n),null===b||void 0===b||b(r,n),N()}),[b,N]),S=Object(r.useCallback)((function(e){I.current=e.target.value,N()}),[N]),H=Object(r.useCallback)((function(e){k.current=e,N()}),[N]),U=Object(r.useCallback)((function(e){return r.createElement(L,{width:k.current,minWidth:250,onHorizontalResizeStop:H},e)}),[H]),F=Object(r.useMemo)((function(){return r.createElement("div",{className:"literal-expression-header"},U(r.createElement(y,{selectedExpressionName:h,selectedDataType:w,onExpressionUpdate:D},r.createElement("div",{className:"expression-info"},r.createElement("p",{className:"expression-name pf-u-text-truncate"},h),r.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",w,")")))))}),[w,h,D,U]),A=Object(r.useMemo)((function(){return r.createElement(l.a,{defaultValue:I.current,onBlur:S,"aria-label":"literal-expression-content"})}),[S]);return Object(r.useEffect)((function(){N()}),[N]),r.createElement("div",{className:"literal-expression"},m?null:F,r.createElement("div",{className:"literal-expression-body"},A))},H=(n(212),n(213),n(214),"editable-cell--read-mode"),U=n(10),F=(n(215),n(95)),A=n(318),P=n(312),W=n(305),_=n(306),M=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,i=void 0===a?c.TableHeaderVisibility.Full:a,l=e.getRowKey,s=e.getColumnKey,u=e.onColumnsUpdate,d=Object(r.useCallback)((function(e,n,a){var i=0===e?"counter-cell":"data-cell",o=t.allColumns[e],c=0===e?r.createElement(r.Fragment,null,a+1):r.createElement(L,{width:"number"===typeof(null===o||void 0===o?void 0:o.width)?null===o||void 0===o?void 0:o.width:C,onHorizontalResizeStop:function(n){o.setWidth&&(!function(n){var a;null===o||void 0===o||null===(a=o.setWidth)||void 0===a||a.call(o,n),t.allColumns[e].width=n}(n),null===u||void 0===u||u(t.columns))}},r.createElement(r.Fragment,null,n.render("Cell")));return r.createElement(P.a,Object.assign({},t.getTdProps(e,a),{key:"".concat(s(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(i)}),c)}),[s,u,t]),p=Object(r.useCallback)((function(e,t){var n=Object(o.a)(Object(o.a)({},e.getRowProps()),{},{style:{}});return r.createElement(W.a,Object.assign({className:"table-row"},n,{key:"".concat(l(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return d(n,e,t)})))}),[l,d]),b=Object(r.useMemo)((function(){return r.createElement(W.a,{className:"table-row additive-row"},r.createElement(P.a,{role:"cell",className:"empty-cell"},r.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return r.createElement(P.a,{role:"cell",key:t,className:"row-remainder-content"},e)})))}),[n]);return r.createElement(_.a,Object.assign({className:"".concat(i===c.TableHeaderVisibility.None?"missing-header":"")},t.getTableBodyProps()),t.rows.map((function(e,n){return t.prepareRow(e),p(e,n)})),n?b:null)},B=(n(287),n(307)),K=n(308),V=n(309),z=n(316),Y=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return r.createElement(B.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return r.createElement(K.a,{key:e.group,label:e.group,className:b.every(e.items,(function(e){return!b.includes(n,e.type)}))?"no-allowed-actions-in-group":""},r.createElement(V.a,null,e.items.map((function(e){return r.createElement(z.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!b.includes(n,e.type)},e.name)}))))})))},X=function(e){var t=e.columnPrefix,n=e.tableColumns,i=e.lastSelectedColumnIndex,o=e.lastSelectedRowIndex,l=e.tableRows,s=e.onRowsUpdate,u=e.onRowAdding,d=e.showTableHandler,p=e.setShowTableHandler,f=e.tableHandlerTarget,E=e.handlerConfiguration,O=e.tableHandlerAllowedOperations,y=e.resetRowCustomFunction,x=void 0===y?function(){return{}}:y,j=e.onColumnsUpdate,h=Object(r.useContext)(v),T=Object(r.useState)(i),C=Object(a.a)(T,2),g=C[0],w=C[1],R=Object(r.useState)(o),I=Object(a.a)(R,2),k=I[0],N=I[1];Object(r.useEffect)((function(){w(i)}),[i]),Object(r.useEffect)((function(){N(o)}),[o]);var L=function(e,t,n){return[].concat(Object(U.a)(e.slice(0,t)),[n],Object(U.a)(e.slice(t)))},D=function(e,t,n){return[].concat(Object(U.a)(e.slice(0,t+1)),[n],Object(U.a)(e.slice(t+1)))},S=function(e,t){return[].concat(Object(U.a)(e.slice(0,t)),Object(U.a)(e.slice(t+1)))},H=Object(r.useCallback)((function(e){var a="".concat(t).concat(e);return b.find(n.current,{accessor:a})?H(e+1):a}),[t,n]),F=Object(r.useCallback)((function(e){return{accessor:H(e.length),label:H(e.length),dataType:c.DataType.Undefined}}),[H]),A=Object(r.useCallback)((function(e){j(e),s(l.current)}),[j,s,l]),P=Object(r.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:A(L(n.current,g,F(n.current)));break;case c.TableOperation.ColumnInsertRight:A(D(n.current,g,F(n.current)));break;case c.TableOperation.ColumnDelete:A(S(n.current,g));break;case c.TableOperation.RowInsertAbove:s(L(l.current,k,u()));break;case c.TableOperation.RowInsertBelow:s(D(l.current,k,u()));break;case c.TableOperation.RowDelete:s(S(l.current,k));break;case c.TableOperation.RowClear:s((t=l.current,a=k,[].concat(Object(U.a)(t.slice(0,a)),[x(t[a])],Object(U.a)(t.slice(a+1)))))}var t,a;p(!1)}),[F,A,u,s,g,k,p,n,l]);return Object(r.useMemo)((function(){var e,t;return r.createElement(m.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:d,shouldClose:function(){return p(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return f},appendTo:null!==(e=null===(t=h.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:r.createElement(Y,{handlerConfiguration:E,allowedOperations:O,onOperation:P})})}),[d,h.boxedExpressionEditorRef,E,O,P,p,f])},G=n(170),J=n(315),q=n(310),Q=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,i=e.editColumnLabel,l=e.headerVisibility,s=void 0===l?c.TableHeaderVisibility.Full:l,u=e.skipLastHeaderGroup,d=e.getColumnKey,p=e.tableColumns,f=e.onColumnsUpdate,m=Object(r.useCallback)((function(e,t){return a(b.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),E=Object(r.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,r=t.dataType,i=void 0===r?c.DataType.Undefined:r,o=p.current[e].accessor,l=Object(U.a)(p.current);l[e].label=a,l[e].accessor=a,l[e].dataType=i,f(l),a!==o&&m(o,a)}}),[f,p,m]),v=Object(r.useCallback)((function(e,t){return r.createElement(J.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(d(e),"-").concat(t)}),r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[d]),O=Object(r.useCallback)((function(e){return r.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},e.headerCellElement?e.headerCellElement:r.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?r.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),x=Object(r.useCallback)((function(e,t){p.current[e].width=t,f(p.current)}),[f,p]),j=Object(r.useCallback)((function(e,n){var a=Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{}}),c=t.getThProps(e,n),l=e.width||C;return r.createElement(J.a,Object.assign({},a,c,{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(d(e),"-").concat(n)}),r.createElement(L,{width:l,onHorizontalResizeStop:function(e){return x(n,e)}},r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?r.createElement(y,{title:i,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:E(n),key:"".concat(d(e),"-").concat(n)},O(e)):O(e))))}),[i,d,E,x,O,t]),h=Object(r.useCallback)((function(e,t){return e.isCountColumn?v(e,t):j(e,t)}),[v,j]),T=Object(r.useCallback)((function(e){return u?b.dropRight(e.headerGroups):e.headerGroups}),[u]),g=Object(r.useMemo)((function(){return T(t).map((function(e){var t=Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{style:{}}),n=t.key,a=Object(G.a)(t,["key"]);return r.createElement(W.a,Object.assign({key:n},a),e.headers.map((function(e,t){return h(e,t)})))}))}),[T,h,t]),w=Object(r.useCallback)((function(e){return r.createElement(W.a,null,b.nth(t.headerGroups,e).headers.map((function(e,t){return h(e,t)})))}),[h,t.headerGroups]);switch(s){case c.TableHeaderVisibility.Full:return r.createElement(q.a,{noWrap:!0},g);case c.TableHeaderVisibility.LastLevel:return r.createElement(q.a,{noWrap:!0},w(-1));case c.TableHeaderVisibility.SecondToLastLevel:return r.createElement(q.a,{noWrap:!0},w(-2));default:return null}},Z="no-table-context-menu",$=function(e){var t=e.tableId,n=e.children,i=e.columnPrefix,o=void 0===i?"column-":i,l=e.editColumnLabel,s=e.onColumnsUpdate,u=e.onRowsUpdate,d=e.onRowAdding,p=void 0===d?function(){return{}}:d,f=e.controllerCell,m=void 0===f?"#":f,E=e.defaultCell,O=e.rows,y=e.columns,x=e.handlerConfiguration,j=e.headerVisibility,h=e.headerLevels,T=void 0===h?0:h,C=e.skipLastHeaderGroup,g=void 0!==C&&C,w=e.getRowKey,R=void 0===w?function(e){return e.id}:w,I=e.getColumnKey,k=void 0===I?function(e){return e.id}:I,N=e.resetRowCustomFunction,L=Object(r.useRef)(null),D=Object(r.useContext)(v),S=Object(r.useState)(m),P=Object(a.a)(S,2),W=P[0],_=P[1],B=Object(r.useCallback)((function(e,t){t>0&&(b.assign(e,{columns:[{label:j===c.TableHeaderVisibility.Full?"0":W,accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),B(e.columns[0],t-1))}),[W,j]),K=Object(r.useCallback)((function(e,t){var n={label:e,accessor:"#",width:60,minWidth:60,isCountColumn:!0};return B(n,T),[n].concat(Object(U.a)(t))}),[B,T]),V=Object(r.useRef)(K(W,y)),z=Object(r.useRef)(O),Y=Object(r.useState)(!1),G=Object(a.a)(Y,2),J=G[0],q=G[1],$=Object(r.useState)(document.body),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(b.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),re=Object(a.a)(ae,2),ie=re[0],oe=re[1],ce=Object(r.useState)(-1),le=Object(a.a)(ce,2),se=le[0],ue=le[1],de=Object(r.useState)(-1),pe=Object(a.a)(de,2),be=pe[0],fe=pe[1];Object(r.useEffect)((function(){V.current=K(m,V.current.slice(1)),_(m)}),[m,K]),Object(r.useEffect)((function(){V.current=K(W,y)}),[y]),Object(r.useEffect)((function(){z.current=O}),[O]);var me=Object(r.useCallback)((function(e){V.current=e,null===s||void 0===s||s(e.slice(1))}),[s]),Ee=Object(r.useCallback)((function(e){z.current=e,null===u||void 0===u||u(e)}),[u]),ve=Object(r.useCallback)((function(e,t,n){var a=Object(U.a)(z.current);a[e][t]=n,Ee(a)}),[Ee]),Oe=Object(r.useCallback)((function(e,t){var n=Object(U.a)(z.current);n[e]=t,Ee(n)}),[Ee]),ye={Cell:Object(r.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:E?E[t.id](e):function(e){var t=e.value,n=e.row.index,i=e.column.id,o=e.onCellUpdate,c=Object(r.useState)(t),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),b=p[0],f=p[1],m=Object(r.useState)(H),E=Object(a.a)(m,2),v=E[0],O=E[1],y=Object(r.useRef)(null);Object(r.useEffect)((function(){u(t)}),[t]);var x=Object(r.useCallback)((function(e){O("editable-cell--edit-mode"),u(e.target.value)}),[]),j=Object(r.useCallback)((function(){O(H),f(!1),o(n,i,s)}),[i,n,s,o]),h=Object(r.useCallback)((function(){var e,t;f(!0),null===(e=y.current)||void 0===e||e.focus(),null===(t=y.current)||void 0===t||t.setSelectionRange(s.length,s.length)}),[s]),T=Object(r.useCallback)((function(){return"editable-cell ".concat(b?"editable-cell--selected":""," ").concat(v)}),[b,v]);return r.createElement(r.Fragment,null,r.createElement("div",{onClick:h,className:T()},r.createElement("span",null,s),r.createElement("textarea",{ref:y,value:s||"",onChange:x,onBlur:j})))}(e)}),[])},xe=function(e){var t=e.closest("table")===L.current,n=!e.classList.contains(Z);return t&&n},je=function(e,t){var n,a;ne(e),null===(n=D.currentlyOpenedHandlerCallback)||void 0===n||n.call(D,!1),q(!0),null===(a=D.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(D,(function(){return q})),ue(t)},he=Object(F.useTable)({columns:V.current,data:z.current,defaultColumn:ye,onCellUpdate:ve,onRowUpdate:Oe,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,r=!e.disableHandlerOnHeader;xe(a)&&r&&(n.preventDefault(),oe([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(U.a)(V.current.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),je(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;xe(a)&&(n.preventDefault(),oe([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(U.a)(V.current.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(U.a)(z.current.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear])),je(a,e),fe(t))}}}},F.useBlockLayout,F.useResizeColumns);return r.createElement("div",{className:"table-component ".concat(t)},r.createElement(A.a,Object.assign({variant:"compact"},he.getTableProps(),{ref:L}),r.createElement(Q,{tableInstance:he,editColumnLabel:l,headerVisibility:j,skipLastHeaderGroup:g,tableRows:z,onRowsUpdate:Ee,tableColumns:V,getColumnKey:k,onColumnsUpdate:me}),r.createElement(M,{tableInstance:he,getRowKey:R,getColumnKey:k,onColumnsUpdate:me,headerVisibility:j},n)),J&&x?r.createElement(X,{tableColumns:V,columnPrefix:o,handlerConfiguration:x,lastSelectedColumnIndex:se,lastSelectedRowIndex:be,tableRows:z,onRowsUpdate:Ee,onRowAdding:p,showTableHandler:J,setShowTableHandler:q,tableHandlerAllowedOperations:ie,tableHandlerTarget:te,resetRowCustomFunction:N,onColumnsUpdate:me}):null)},ee=function(e){var t=Object(p.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],a=Object(r.useRef)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),i=Object(r.useRef)(void 0===e.rows?[[""]]:e.rows),l=Object(r.useCallback)((function(){var t,n,r,c=Object(o.a)(Object(o.a)({},e),{},{columns:a.current,rows:i.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastRelationExpressionDefinition)||void 0===r||r.call(n,c)}),[e]),s=Object(r.useCallback)((function(){return b.map(a.current,(function(e){return Object(o.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),u=Object(r.useCallback)((function(){return b.map(i.current,(function(e){return b.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),d=Object(r.useCallback)((function(e){i.current=b.map(e,(function(e){return b.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),l()}),[l]),f=Object(r.useCallback)((function(e){a.current=b.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),l()}),[l]);return Object(r.useEffect)((function(){l()}),[l]),r.createElement("div",{className:"relation-expression"},r.createElement($,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:s(),rows:u(),onColumnsUpdate:f,onRowsUpdate:d,handlerConfiguration:n}))},te=(n(290),n(291),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,i=Object(r.useRef)(null),o=Object(r.useRef)(t);Object(r.useEffect)((function(){o.current=b.omit(t,"isHeadless")}),[t.logicType]);var l=Object(r.useCallback)((function(){return i.current}),[]),s=Object(r.useCallback)((function(e){o.current.logicType=e,n(b.omit(o.current,"isHeadless"))}),[n]),u=Object(r.useCallback)((function(){o.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(b.omit(o.current,"isHeadless"))}),[a,n]);return r.createElement("div",{className:"entry-expression",ref:i},r.createElement(ye,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:o.current,onLogicTypeUpdating:s,onLogicTypeResetting:u,getPlacementRef:l}))}),ne=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(r.useRef)(Object(o.a)({uid:i.entryExpression.uid},i.entryExpression));Object(r.useEffect)((function(){c.current=i.entryExpression,a(n,Object(o.a)(Object(o.a)({},i),{},{entryExpression:c.current}))}),[i.entryExpression.logicType]);var l=Object(r.useCallback)((function(e){c.current=e,a(n,Object(o.a)(Object(o.a)({},i),{},{entryExpression:e}))}),[]);return r.createElement("div",{className:"context-entry-expression-cell"},r.createElement(te,{expression:c.current,onUpdatingRecursiveExpression:l,onExpressionResetting:i.onExpressionResetting}))},ae=(n(292),function(e){var t=e.name,n=e.dataType,i=e.onContextEntryUpdate,o=e.editInfoPopoverLabel,c=Object(r.useState)(t),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(n),p=Object(a.a)(d,2),b=p[0],f=p[1];Object(r.useEffect)((function(){u(t)}),[t]),Object(r.useEffect)((function(){f(n)}),[n]);var m=Object(r.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),i(t,n)}),[i]),E=Object(r.useCallback)((function(e){return r.createElement("div",{className:"entry-definition ".concat(e)},r.createElement("p",{className:"entry-name pf-u-text-truncate",title:s},s),r.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:b},"(",b,")"))}),[b,s]),v=Object(r.useMemo)((function(){return r.createElement(y,{title:o,selectedExpressionName:s,selectedDataType:b,onExpressionUpdate:m},E("with-popover-menu"))}),[o,b,s,m,E]);return r.createElement("div",{className:"entry-info"},o?v:E())}),re=function(e){var t=e.data,n=e.row.index,i=e.onRowUpdate,c=t[n],l=Object(r.useState)(c.entryInfo),s=Object(a.a)(l,2),u=s[0],d=s[1];Object(r.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(r.useCallback)((function(e,t){i(n,Object(o.a)(Object(o.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,i]);return r.createElement("div",{className:"context-entry-info-cell"},r.createElement(ae,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p,editInfoPopoverLabel:c.editInfoPopoverLabel}))},ie="ContextEntry-1",oe=c.DataType.Undefined,ce=function(e){var t=e.uid,n=e.name,i=void 0===n?ie:n,o=e.dataType,l=void 0===o?oe:o,s=e.contextEntries,u=e.result,d=void 0===u?{}:u,f=e.renderResult,m=void 0===f||f,E=e.entryInfoWidth,O=void 0===E?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:E,y=e.entryExpressionWidth,x=void 0===y?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:y,j=e.isHeadless,h=void 0!==j&&j,T=e.onUpdatingRecursiveExpression,C=Object(p.useBoxedExpressionEditorI18n)().i18n,g=Object(r.useState)(d),R=Object(a.a)(g,2),I=R[0],k=R[1],N=Object(r.useState)(O),D=Object(a.a)(N,2),S=D[0],H=D[1],U=Object(r.useState)(x),F=Object(a.a)(U,2),A=F[0],P=F[1],W=r.useContext(v).setSupervisorHash,_=Object(r.useMemo)((function(){return[{label:i,accessor:i,dataType:l,disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:S,setWidth:H,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:A,setWidth:P,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[l,A,S,i]),M=Object(r.useState)(s||[{entryInfo:{name:ie,dataType:oe},entryExpression:{},editInfoPopoverLabel:C.editContextEntry}]),B=Object(a.a)(M,2),K=B[0],V=B[1],z=Object(r.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(K,(function(e){return e.entryInfo})),"ContextEntry"),dataType:c.DataType.Undefined},entryExpression:{},editInfoPopoverLabel:C.editContextEntry}}),[C.editContextEntry,K]),Y=Object(r.useCallback)((function(){return h?c.TableHeaderVisibility.None:c.TableHeaderVisibility.SecondToLastLevel}),[h]);return Object(r.useEffect)((function(){var e,n,r=Object(a.a)(_,1)[0],i={uid:t,logicType:c.LogicType.Context,name:r.accessor,dataType:r.dataType,contextEntries:K,result:b.omit(I,"isHeadless"),entryInfoWidth:S,entryExpressionWidth:A};h?null===T||void 0===T||T(b.omit(i,["name","dataType"])):(W(w(i)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,i))}),[_,h,T,K,I,S,A,t,W]),r.createElement("div",{className:"context-expression ".concat(t)},r.createElement($,{tableId:t,headerLevels:1,headerVisibility:Y(),defaultCell:{entryInfo:re,entryExpression:ne},columns:_,rows:K,onRowAdding:z,onRowsUpdate:V,handlerConfiguration:Object(c.getHandlerConfiguration)(C,C.contextEntry),getRowKey:Object(r.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(r.useCallback)(c.resetEntry,[])},m?[r.createElement(L,{key:"context-result",width:S,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH,onHorizontalResizeStop:function(e){return H(e)}},r.createElement("div",{className:"context-result"},"<result>")),r.createElement(L,{key:"context-expression",width:A,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH,onHorizontalResizeStop:function(e){return P(e)}},r.createElement(te,{expression:I,onUpdatingRecursiveExpression:k}))]:void 0))},le=n(91);var se=n(167),ue=n.n(se),de=function(){return r.createElement("div",null,"Decision Table")},pe=(n(293),function(e){var t=e.isHeadless,n=e.items,i=e.onUpdatingRecursiveExpression,o=e.uid,l=e.width,s=void 0===l?430:l,u=Object(p.useBoxedExpressionEditorI18n)().i18n,d=Object(r.useMemo)((function(){return[{group:u.rows,items:[{name:u.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:u.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:u.rowOperations.delete,type:c.TableOperation.RowDelete},{name:u.rowOperations.clear,type:c.TableOperation.RowClear}]}]}),[u.rowOperations.clear,u.rowOperations.delete,u.rowOperations.insertAbove,u.rowOperations.insertBelow,u.rows]),f=Object(r.useCallback)((function(){return{logicType:c.LogicType.LiteralExpression}}),[]),m=Object(r.useCallback)((function(){return b.isEmpty(n)?[{entryExpression:f()}]:b.map(n,(function(e){return{entryExpression:e}}))}),[f,n]),E=Object(r.useState)(m()),O=Object(a.a)(E,2),y=O[0],x=O[1],j=Object(r.useState)(s||430),h=Object(a.a)(j,2),T=h[0],C=h[1],g=Object(r.useContext)(v).setSupervisorHash,R=Object(r.useCallback)((function(e){return e.original.entryExpression.uid}),[]),I=Object(r.useCallback)((function(){return{entryExpression:f()}}),[f]);Object(r.useEffect)((function(){var e,n,a={uid:o,logicType:c.LogicType.List,width:T,items:b.map(y,(function(e){return e.entryExpression}))};t?null===i||void 0===i||i(a):(g(w(a)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,a))}),[T,y,t,i,o,g]);var k=Object(r.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),N=Object(r.useCallback)((function(e){x(e)}),[]),L=Object(r.useMemo)((function(){return[{accessor:"list",width:T,setWidth:C}]}),[T]);return Object(r.useMemo)((function(){return r.createElement("div",{className:"list-expression"},r.createElement($,{tableId:o,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:ne},columns:L,rows:y,onRowsUpdate:N,onRowAdding:I,handlerConfiguration:d,getRowKey:R,resetRowCustomFunction:k}))}),[L,d,y,R,I,N,k,o])}),be=(n(294),c.DataType.Undefined),fe=function(e){var t=e.bindingEntries,n=e.dataType,i=void 0===n?be:n,o=e.entryInfoWidth,l=void 0===o?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:o,s=e.entryExpressionWidth,u=void 0===s?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:s,d=e.invokedFunction,f=void 0===d?"":d,m=e.isHeadless,E=e.logicType,O=e.name,y=void 0===O?"p-1":O,x=e.onUpdatingNameAndDataType,j=e.onUpdatingRecursiveExpression,h=e.uid,T=Object(p.useBoxedExpressionEditorI18n)().i18n,C=Object(r.useState)(t||[{entryInfo:{name:"p-1",dataType:be},entryExpression:{},editInfoPopoverLabel:T.editParameter}]),g=Object(a.a)(C,2),R=g[0],I=g[1],k=Object(r.useState)(l),N=Object(a.a)(k,2),L=N[0],D=N[1],S=Object(r.useState)(u),H=Object(a.a)(S,2),U=H[0],F=H[1],A=Object(r.useState)(f),P=Object(a.a)(A,2),W=P[0],_=P[1],M=Object(r.useContext)(v).setSupervisorHash;Object(r.useEffect)((function(){var e,t,n=Object(a.a)(K.current,1)[0],r={uid:h,logicType:E,name:n.accessor,dataType:n.dataType,bindingEntries:R,invokedFunction:W,entryInfoWidth:L,entryExpressionWidth:U},i=b.omit(r,["name","dataType"]);m?null===j||void 0===j||j(i):(M(w(i)),null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,r))}),[U,W,L,m,E,j,R,M,h]);var B=r.createElement("div",{className:"function-definition-container"},r.createElement("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:T.enterFunction,defaultValue:W,onBlur:function(e){return _(e.target.value)}})),K=Object(r.useRef)([{label:y,accessor:y,dataType:i,disableHandlerOnHeader:!0,columns:[{headerCellElement:B,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:L,setWidth:D,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:U,setWidth:F,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}]),V=Object(r.useCallback)((function(e){var t=Object(a.a)(e,1)[0];null===x||void 0===x||x(t.label,t.dataType);var n=Object(a.a)(K.current,1)[0];n.label=t.label,n.accessor=t.accessor,n.dataType=t.dataType}),[x]),z=Object(r.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(R,(function(e){return e.entryInfo})),"p"),dataType:be},entryExpression:{},editInfoPopoverLabel:T.editParameter}}),[T.editParameter,R]),Y=Object(r.useCallback)((function(){return m?c.TableHeaderVisibility.SecondToLastLevel:c.TableHeaderVisibility.Full}),[m]),X=Object(r.useCallback)((function(e){return I(e)}),[]),G=Object(r.useCallback)((function(e){return Object(c.getEntryKey)(e)}),[]),J=Object(r.useCallback)((function(e){return Object(c.resetEntry)(e)}),[]);return Object(r.useMemo)((function(){return r.createElement("div",{className:"invocation-expression ".concat(h)},r.createElement($,{tableId:h,headerLevels:2,headerVisibility:Y(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:re,entryExpression:ne},columns:K.current,rows:R,onColumnsUpdate:V,onRowAdding:z,onRowsUpdate:X,handlerConfiguration:Object(c.getHandlerConfiguration)(T,T.parameters),getRowKey:G,resetRowCustomFunction:J}))}),[Y,G,T,V,z,J,R,X,h])},me=(n(295),n(311)),Ee=function(e){var t=e.parameters,n=e.setParameters,a=Object(p.useBoxedExpressionEditorI18n)().i18n,i=Object(r.useCallback)((function(){n((function(e){return[].concat(Object(U.a)(e),[{name:Object(c.generateNextAvailableEntryName)(e,"p"),dataType:c.DataType.Undefined}])}))}),[n]),o=Object(r.useCallback)((function(e){return function(t){return n((function(n){return n[e].name=t.target.value,Object(U.a)(n)}))}}),[n]),l=Object(r.useCallback)((function(e){return function(t){n((function(n){return n[e].dataType=t,Object(U.a)(n)}))}}),[n]),s=Object(r.useCallback)((function(e){return function(){return n((function(t){return[].concat(Object(U.a)(t.slice(0,e)),Object(U.a)(t.slice(e+1)))}))}}),[n]);return r.createElement("div",{className:"parameters-editor"},r.createElement(le.a,{variant:"tertiary",onClick:i,className:"add-parameter"},a.addParameter),r.createElement("div",{className:"parameters-container"},b.map(t,(function(e,t){return r.createElement("div",{key:"".concat(e.name,"_").concat(t),className:"parameter-entry"},r.createElement("input",{className:"parameter-name",type:"text",onBlur:o(t),defaultValue:e.name}),r.createElement(f,{selectedDataType:e.dataType,onDataTypeChange:l(t),menuAppendTo:"parent"}),r.createElement(le.a,{variant:"danger",className:"delete-parameter",icon:r.createElement(me.a,null),iconPosition:"left",onClick:s(t)},a.delete))}))))},ve=(n(296),function(e){var t,n,a=e.selectedFunctionKind,i=e.onFunctionKindSelect,o=Object(p.useBoxedExpressionEditorI18n)().i18n,l=Object(r.useContext)(v),s=Object(r.useCallback)((function(e){return function(t,n){i(n),e()}}),[i]),u=Object(r.useCallback)((function(){return b.map(Object.values(c.FunctionKind),(function(e){return r.createElement(z.a,{key:e,itemId:e,"data-ouia-component-id":e},e)}))}),[]);return r.createElement(E,{title:o.selectFunctionKind,appendTo:null!==(t=null===(n=l.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"function-kind-popover",hasAutoWidth:!0,body:function(e){return r.createElement(B.a,{onSelect:s(e)},r.createElement(V.a,null,u()))}},r.createElement("div",{className:"selected-function-kind"},b.first(a)))}),Oe=function(e){var t=void 0===e.parametersWidth?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:e.parametersWidth,n=void 0===e.formalParameters?[]:e.formalParameters,i=void 0===e.functionKind?c.FunctionKind.Feel:e.functionKind,o=void 0===e.name?"p-1":e.name,l=Object(r.useState)(t),s=Object(a.a)(l,2),u=s[0],d=s[1],f=Object(p.useBoxedExpressionEditorI18n)().i18n,m=Object(r.useContext)(v),O=m.boxedExpressionEditorRef,y=m.setSupervisorHash,x=Object(r.useState)(n),j=Object(a.a)(x,2),h=j[0],T=j[1],C=Object(r.useMemo)((function(){var e;return r.createElement(E,{title:f.editParameters,appendTo:null!==(e=null===O||void 0===O?void 0:O.current)&&void 0!==e?e:void 0,className:"parameters-editor-popover",minWidth:"400px",body:r.createElement(Ee,{parameters:h,setParameters:T})},r.createElement("div",{className:"parameters-list ".concat(b.isEmpty(h)?"empty-parameters":"")},r.createElement("p",{className:"pf-u-text-truncate"},b.isEmpty(h)?f.editParameters:"(".concat(b.join(b.map(h,(function(e){return e.name})),", "),")"))))}),[O,f.editParameters,h]),g=Object(r.useCallback)((function(){return[{label:o,accessor:o,dataType:e.dataType,disableHandlerOnHeader:!0,columns:[{headerCellElement:C,accessor:"parameters",disableHandlerOnHeader:!0,width:u,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[o,e.dataType,C,u]),R=Object(r.useCallback)((function(e){return[{entryInfo:{name:f.class,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.class}},{entryInfo:{name:f.methodSignature,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.method}}]}),[f.class,f.methodSignature]),I=Object(r.useCallback)((function(t){switch(t){case c.FunctionKind.Java:var n=e;return[{entryExpression:{logicType:c.LogicType.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:R(n)}}];case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:return[{entryExpression:e.expression||{logicType:c.LogicType.LiteralExpression}}]}}),[R,e]),k=Object(r.useRef)(g()),N=Object(r.useState)(i),L=Object(a.a)(N,2),D=L[0],S=L[1],H=Object(r.useState)(I(D)),U=Object(a.a)(H,2),F=U[0],A=U[1],P=Object(r.useCallback)((function(e,t){switch(t){case c.FunctionKind.Java:var n,a,r,i,o,l=null===(n=b.first(F))||void 0===n?void 0:n.entryExpression,s=(null===(a=b.nth(l.contextEntries,0))||void 0===a||null===(r=a.entryExpression)||void 0===r?void 0:r.content)||"",u=(null===(i=b.nth(l.contextEntries,1))||void 0===i||null===(o=i.entryExpression)||void 0===o?void 0:o.content)||"";return b.extend(e,{class:s,method:u});case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:var d;return b.extend(e,{expression:null===(d=b.first(F))||void 0===d?void 0:d.entryExpression})}}),[F]),W=Object(r.useCallback)((function(){var t,n,r,i=Object(a.a)(k.current,1)[0],o=P({uid:e.uid,logicType:e.logicType,name:i.accessor,dataType:i.dataType,functionKind:D,formalParameters:h,parametersWidth:u},D);e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,b.omit(o,["name","dataType"])):(y(w(F)),null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastFunctionExpressionDefinition)||void 0===r||r.call(n,o))}),[P,y,h,e,D,F,u]),_=Object(r.useCallback)((function(){return e.isHeadless?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[e.isHeadless]),M=Object(r.useCallback)((function(e){var t=e;S(t),A([{entryExpression:{logicType:c.LogicType.Undefined}}]),setTimeout((function(){A(I(t))}),0)}),[I]),B=Object(r.useCallback)((function(t){var n,r=Object(a.a)(t,1)[0];null===(n=e.onUpdatingNameAndDataType)||void 0===n||n.call(e,r.label,r.dataType),d(r.width);var i=Object(a.a)(k.current,1)[0];i.label=r.label,i.accessor=r.accessor,i.dataType=r.dataType,W()}),[k,e,W]);Object(r.useEffect)((function(){W()}),[F,W]),Object(r.useEffect)((function(){k.current=g()}),[h]);var K=Object(r.useCallback)((function(e){return S(c.FunctionKind.Feel),Object(c.resetEntry)(e)}),[]);return r.createElement("div",{className:"function-expression ".concat(e.uid)},r.createElement($,{handlerConfiguration:[{group:b.upperCase(f.function),items:[{name:f.rowOperations.clear,type:c.TableOperation.RowClear}]}],columns:k.current,onColumnsUpdate:B,rows:F,onRowsUpdate:A,headerLevels:1,headerVisibility:_(),controllerCell:r.createElement(ve,{selectedFunctionKind:D,onFunctionKindSelect:M}),defaultCell:{parameters:ne},resetRowCustomFunction:K}))},ye=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,i=e.onLogicTypeResetting,o=e.onUpdatingNameAndDataType,l=e.getPlacementRef,s=e.isHeadless,u=void 0!==s&&s,d=e.onUpdatingRecursiveExpression,f=Object(p.useBoxedExpressionEditorI18n)().i18n,m=Object(r.useContext)(v),O=b.extend(t,{uid:t.uid||ue()(),isHeadless:u,onUpdatingNameAndDataType:o,onUpdatingRecursiveExpression:d}),y=function(e){return!b.isEmpty(e)&&e!==c.LogicType.Undefined},x=Object(r.useState)(y(O.logicType)),j=Object(a.a)(x,2),h=j[0],T=j[1];Object(r.useEffect)((function(){T(y(t.logicType))}),[t.logicType]);var C=function(){var e=Object(r.useRef)(null),t=Object(r.useState)("0px"),n=Object(a.a)(t,2),i=n[0],o=n[1],c=Object(r.useState)("0px"),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),b=p[0],f=p[1],m=Object(r.useCallback)((function(){b&&f(!1)}),[b]),E=Object(r.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),o("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),f(!0))}),[o,u]);return Object(r.useEffect)((function(){return document.addEventListener("click",m),document.addEventListener("contextmenu",m),document.addEventListener("contextmenu",E),function(){document.removeEventListener("click",m),document.removeEventListener("contextmenu",m),document.removeEventListener("contextmenu",E)}})),{contextMenuRef:e,contextMenuXPos:i,contextMenuYPos:s,contextMenuVisibility:b,setContextMenuVisibility:f}}(),g=C.contextMenuRef,w=C.contextMenuXPos,R=C.contextMenuYPos,I=C.contextMenuVisibility,k=C.setContextMenuVisibility,N=Object(r.useMemo)((function(){switch(O.logicType){case c.LogicType.LiteralExpression:return r.createElement(S,O);case c.LogicType.Relation:return r.createElement(ee,O);case c.LogicType.Context:return r.createElement(ce,O);case c.LogicType.DecisionTable:return r.createElement(de,O);case c.LogicType.Invocation:return r.createElement(fe,O);case c.LogicType.List:return r.createElement(pe,O);case c.LogicType.Function:return r.createElement(Oe,b.defaults(O,{functionKind:c.FunctionKind.Feel}));default:return O.logicType}}),[O.logicType]),L=Object(r.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),D=Object(r.useCallback)((function(){return b.map(L(),(function(e){return r.createElement(z.a,{key:e,itemId:e},e)}))}),[L]),H=Object(r.useCallback)((function(){return l()}),[l]),U=Object(r.useCallback)((function(){var e,t;return null!==(e=null===(t=m.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:H}),[H,m.boxedExpressionEditorRef]),F=Object(r.useCallback)((function(e,t){T(!0),n(t)}),[n]),A=Object(r.useCallback)((function(){return r.createElement(E,{title:f.selectLogicType,arrowPlacement:H,appendTo:U(),className:"logic-type-popover",hasAutoWidth:!0,body:r.createElement(B.a,{onSelect:F},r.createElement(V.a,null,D()))})}),[f.selectLogicType,H,U,F,D]),P=Object(r.useCallback)((function(){T(!1),k(!1),i()}),[i,k]),W=Object(r.useCallback)((function(){return r.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:R,left:w}},r.createElement(le.a,{isDisabled:!h,isSmall:!0,variant:le.b.primary,onClick:P},f.clear))}),[h,w,R,P,f.clear]);return r.createElement("div",{className:"logic-type-selector ".concat(Z," ").concat(h?"logic-type-selected":"logic-type-not-present"),ref:g},h?N:f.selectExpression,h?null:A(),!t.noClearAction&&I?W():null)},xe=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(e.selectedExpression),i=Object(a.a)(n,2),l=i[0],s=i[1],u=Object(r.useCallback)((function(e,t){s((function(n){return Object(o.a)(Object(o.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(r.useCallback)((function(e){s((function(t){return Object(o.a)(Object(o.a)({},t),{},{logicType:e})}))}),[]),p=Object(r.useCallback)((function(){s((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(r.useCallback)((function(){return t.current}),[]);return r.createElement("div",{className:"expression-container"},r.createElement("div",{className:"expression-name-and-logic-type"},r.createElement("span",{className:"expression-title"},l.name),r.createElement("span",{className:"expression-type"},"(",l.logicType||c.LogicType.Undefined,")")),r.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},r.createElement(ye,{selectedExpression:l,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},je=function(e){var t=e.children;return Object(r.useLayoutEffect)((function(){function e(){return!0}return document.body.addEventListener("",e),function(){document.body.removeEventListener("",e)}}),[]),r.createElement(r.Fragment,null,t)},he=function(e){var t=Object(r.useState)((function(){return b.identity})),n=Object(a.a)(t,2),o=n[0],c=n[1],l=Object(r.useRef)(null),s=Object(r.useState)(w(e.expressionDefinition)),u=Object(a.a)(s,2),d=u[0],f=u[1];return Object(r.useMemo)((function(){return r.createElement(i.I18nDictionariesProvider,{defaults:p.boxedExpressionEditorI18nDefaults,dictionaries:p.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:p.BoxedExpressionEditorI18nContext},r.createElement(je,null,r.createElement(v.Provider,{value:{supervisorHash:d,setSupervisorHash:f,boxedExpressionEditorRef:l,currentlyOpenedHandlerCallback:o,setCurrentlyOpenedHandlerCallback:c}},r.createElement(D,null,r.createElement("div",{className:"boxed-expression-editor",ref:l},r.createElement(xe,e.expressionDefinition))))))}),[e.expressionDefinition])}}},[[172,1,2]]]);
//# sourceMappingURL=main.35fd9d2f.chunk.js.map