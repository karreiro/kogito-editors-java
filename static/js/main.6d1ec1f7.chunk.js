(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e["<None>"]="",e.SUM="+",e.COUNT="#",e.MIN="<",e.MAX=">"}(a||(a={}))},115:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return d}));var a=n(11),r=n(3),i=n(48),o=150,c=370,u=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:i.b.RowInsertAbove},{name:e.rowOperations.insertBelow,type:i.b.RowInsertBelow},{name:e.rowOperations.delete,type:i.b.RowDelete},{name:e.rowOperations.clear,type:i.b.RowClear}]}]},l=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i="".concat(n,"-").concat(0===a?1:a),o=r.find(t,{name:i});return o?e(t,n,a+1):i},s=function(e){var t=e.original;return t.entryInfo.name+t.entryInfo.dataType},d=function(e){return Object(a.a)(Object(a.a)({},e),{},{entryExpression:{uid:e.entryExpression.uid}})}},117:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},118:function(e,t){},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){var n=Object.keys(e).filter((function(n){return e[n]==t}));return n.length>0?n[0]:null}},120:function(e,t){},121:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Feel="FEEL",e.Java="JAVA",e.Pmml="PMML"}(a||(a={}))},122:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},123:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.PMMLLiteralExpression="PMML Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},124:function(e,t){},132:function(e,t,n){},149:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return s}));var a=n(0),r=n(11),i=n(151),o=Object(r.a)(Object(r.a)({},i.en),{},{addParameter:"Add parameter",builtInAggregator:"Builtin Aggregator",choose:"Choose...",class:"class",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionRule:"DECISION RULE",decisionTable:"Decision Table",delete:"Delete",document:"document",editClause:{input:"Edit Input Clause",output:"Edit Output Clause"},editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editHitPolicy:"Edit Hit Policy",editParameter:"Edit Parameter",editParameters:"Edit parameters",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",hitPolicy:"Hit Policy",inputClause:"INPUT CLAUSE",invocation:"Invocation",list:"List",literalExpression:"Literal expression",methodSignature:"method signature",model:"model",name:"Name",outputClause:"OUTPUT CLAUSE",parameters:"PARAMETERS",pmml:{firstSelection:"First select PMML document",secondSelection:"Second select PMML model"},relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",duplicate:"Duplicate",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",ruleAnnotation:"RULE ANNOTATION",selectExpression:"Select expression",selectFunctionKind:"Select Function Kind",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:o},u=new Map([["en",o]]),l=a.createContext({});function s(){return Object(a.useContext)(l)}},173:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(4),r=n(0),i=n(32),o=n(51),c=(n(300),function(){var e={uid:"id1",name:"Expression",dataType:"<Undefined>",logicType:"<Undefined>"},t=[{document:"mining pmml",modelsFromDocument:[{model:"MiningModelSum",parametersFromModel:[{name:"input1",dataType:o.DataType.Any},{name:"input2",dataType:o.DataType.Any},{name:"input3",dataType:o.DataType.Any}]}]},{document:"regression pmml",modelsFromDocument:[{model:"RegressionLinear",parametersFromModel:[{name:"i1",dataType:o.DataType.Number},{name:"i2",dataType:o.DataType.Number}]}]}],n=Object(r.useState)(e),i=Object(a.a)(n,2),c=i[0],u=i[1],l={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return u(e)},broadcastLiteralExpressionDefinition:function(e){return u(e)},broadcastRelationExpressionDefinition:function(e){return u(e)},broadcastContextExpressionDefinition:function(e){return u(e)},broadcastListExpressionDefinition:function(e){return u(e)},broadcastInvocationExpressionDefinition:function(e){return u(e)},broadcastFunctionExpressionDefinition:function(e){return u(e)},broadcastDecisionTableExpressionDefinition:function(e){return u(e)}},r.createElement("div",{className:"showcase"},r.createElement("div",{className:"boxed-expression"},r.createElement(o.BoxedExpressionEditor,{expressionDefinition:l,pmmlParams:t})),r.createElement("div",{className:"updated-json"},r.createElement("pre",null,JSON.stringify(c,null,2))))});i.render(r.createElement(c,null),document.getElementById("root"))},179:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},19:function(e,t,n){"use strict";var a=n(124);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var r=n(149);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return r.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return r.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return r.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return r.d}))},198:function(e,t,n){},199:function(e,t,n){},2:function(e,t,n){"use strict";n(113);var a=n(114);n.d(t,"BuiltinAggregation",(function(){return a.a}));var r=n(115);n.d(t,"DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH",(function(){return r.a})),n.d(t,"DEFAULT_ENTRY_INFO_MIN_WIDTH",(function(){return r.b})),n.d(t,"generateNextAvailableEntryName",(function(){return r.c})),n.d(t,"getEntryKey",(function(){return r.d})),n.d(t,"getHandlerConfiguration",(function(){return r.e})),n.d(t,"resetEntry",(function(){return r.f}));var i=n(117);n.d(t,"DataType",(function(){return i.a}));var o=n(118);n.o(o,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return o.FunctionKind})),n.o(o,"HitPolicy")&&n.d(t,"HitPolicy",(function(){return o.HitPolicy})),n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return o.TableHeaderVisibility})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation})),n.o(o,"getEnumKeyByEnumValue")&&n.d(t,"getEnumKeyByEnumValue",(function(){return o.getEnumKeyByEnumValue}));var c=n(119);n.d(t,"getEnumKeyByEnumValue",(function(){return c.a}));var u=n(120);n.o(u,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return u.FunctionKind})),n.o(u,"HitPolicy")&&n.d(t,"HitPolicy",(function(){return u.HitPolicy})),n.o(u,"LogicType")&&n.d(t,"LogicType",(function(){return u.LogicType})),n.o(u,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return u.TableHeaderVisibility})),n.o(u,"TableOperation")&&n.d(t,"TableOperation",(function(){return u.TableOperation}));var l=n(121);n.d(t,"FunctionKind",(function(){return l.a}));var s=n(122);n.d(t,"HitPolicy",(function(){return s.a}));var d=n(123);n.d(t,"LogicType",(function(){return d.a}));var p=n(48);n.d(t,"TableHeaderVisibility",(function(){return p.a})),n.d(t,"TableOperation",(function(){return p.b}))},212:function(e,t,n){},213:function(e,t,n){},285:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},48:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear",e[e.RowDuplicate=7]="RowDuplicate"}(r||(r={}))},51:function(e,t,n){"use strict";var a=n(81),r=n(0),i=n(32);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(2);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType})),window.renderBoxedExpressionEditor=function(e,t){i.render(r.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return De}));n(179);var a=n(4),r=n(0),i=(n(180),n(181),n(182),n(150)),o=n(11),c=(n(183),n(2)),u=(n(184),n(185),n(49)),l=n(316),s=n(7),d=n(19),p=n(3),b=function(e){var t=e.selectedDataType,n=e.onDataTypeChange,i=e.menuAppendTo,o=Object(d.useBoxedExpressionEditorI18n)().i18n,b=Object(r.useState)(!1),m=Object(a.a)(b,2),f=m[0],y=m[1],O=Object(r.useCallback)((function(e,t){y(!1),n(t)}),[n]),v=Object(r.useCallback)((function(){return p.map(Object.values(c.DataType),(function(e){return r.createElement(u.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),E=Object(r.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return v()}return""!==e.target.value?v().filter((function(e){return t.test(e.props.value)})):v()}),[v]),j=Object(r.useCallback)((function(e){return y(e)}),[]);return r.createElement(l.a,{menuAppendTo:i,ouiaId:"edit-expression-data-type",variant:s.e.typeahead,typeAheadAriaLabel:o.choose,onToggle:j,onSelect:O,onFilter:E,isOpen:f,selections:t,hasInlineFilter:!0,inlineFilterPlaceholderText:o.choose},v())},m=function(e){var t=e.onTextChange,n=e.value,i=Object(r.useState)(!0),o=Object(a.a)(i,2),c=o[0],u=o[1],l=Object(r.useCallback)((function(e){var n=e.target.value;p.size(n.trim())&&t(n),u(!0)}),[t]),s=Object(r.useMemo)((function(){return function(e){var t="enter"===p.lowerCase(e.key),n="escape"===p.lowerCase(e.key);t&&e.currentTarget.blur(),n&&u(!0)}}),[]),d=Object(r.useMemo)((function(){return function(){u(!1)}}),[]);return c?r.createElement("p",{onDoubleClick:d},n):r.createElement("input",{type:"text",autoFocus:!0,defaultValue:n,onBlur:l,style:{borderRadius:"0.5em"},onKeyDown:s})},f=(n(198),n(317)),y=(n(199),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,i=e.title,o=e.appendTo,c=e.className,u=e.hasAutoWidth,l=e.minWidth;return r.createElement(f.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:u,minWidth:l,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:o,headerContent:r.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},i),bodyContent:a},t)}),O=r.createContext({}),v="Expression Name",E=function(e){var t,n,i,o,u,l,s=e.children,p=e.appendTo,m=e.arrowPlacement,f=e.title,E=e.nameField,j=e.dataTypeField,h=e.selectedDataType,C=void 0===h?c.DataType.Undefined:h,T=e.selectedExpressionName,g=e.onExpressionUpdate,x=Object(r.useContext)(O),w=Object(d.useBoxedExpressionEditorI18n)().i18n;f=null!==(t=f)&&void 0!==t?t:w.editExpression,E=null!==(n=E)&&void 0!==n?n:w.name,j=null!==(i=j)&&void 0!==i?i:w.dataType,p=null!==(o=null!==(u=p)&&void 0!==u?u:null===(l=x.boxedExpressionEditorRef)||void 0===l?void 0:l.current)&&void 0!==o?o:void 0;var R=Object(r.useState)(C),k=Object(a.a)(R,2),I=k[0],L=k[1],N=Object(r.useState)(T),D=Object(a.a)(N,2),S=D[0],A=D[1];Object(r.useEffect)((function(){A(T)}),[T]),Object(r.useEffect)((function(){L(C)}),[C]);var H=Object(r.useCallback)((function(e){A(e.target.value),"blur"===e.type&&g({name:e.target.value,dataType:I})}),[I,g]),P=Object(r.useCallback)((function(e){L(e),g({name:S,dataType:e})}),[S,g]);return r.createElement(y,{title:f,arrowPlacement:m,appendTo:p,body:r.createElement("div",{className:"edit-expression-menu"},r.createElement("div",{className:"expression-name"},r.createElement("label",null,E),r.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:S,onChange:H,onBlur:H,className:"form-control pf-c-form-control",placeholder:v})),r.createElement("div",{className:"expression-data-type"},r.createElement("label",null,j),r.createElement(b,{selectedDataType:I,onDataTypeChange:P})))},s)},j=n(165),h=n(166),C=150,T=function(e){return Math.max(Math.round(parseFloat(e+"")),C)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},x=n(9),w=n(12),R=n(13),k=function(){function e(t,n,a){Object(w.a)(this,e),this.element=t,this.children=n,this.depth=a,this.id=void 0,this.lastColumn=void 0,this.rect=void 0,this.parentRow=void 0}return Object(R.a)(e,[{key:"getId",value:function(){return this.id||(this.id=p.first([].slice.call(this.element.classList).filter((function(e){return e.match(/uuid-/g)})))||""),this.id}},{key:"getRect",value:function(){return this.rect||(this.rect=this.element.getBoundingClientRect()),this.rect}},{key:"isLastColumn",value:function(){var e;this.lastColumn||(this.lastColumn=(null===(e=this.getParentRow())||void 0===e?void 0:e.lastChild)===this.element.closest("th, td"));return this.lastColumn}},{key:"setWidth",value:function(e){var t=T(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;document.dispatchEvent(new CustomEvent(e,{detail:{width:t}}))}(this.getId(),t),this.element.style.width=t+"px"}},{key:"refreshWidthAsParent",value:function(){this.children.length>0&&this.setWidth(this.fetchChildWidth()+14)}},{key:"refreshWidthAsLastColumn",value:function(){if(this.isLastColumn()){var e=this.getParentRow().getBoundingClientRect();e&&this.setWidth(Math.round(e.right)-Math.round(this.getRect().x)-1)}}},{key:"refreshWidthAsLastGroupColumn",value:function(){var e,t=this;if(this.isColSpanHeader()){var n=function(){var e=t.getParent();return(null===e||void 0===e?void 0:e.classList.contains("input"))?".input":(null===e||void 0===e?void 0:e.classList.contains("output"))?".output":".annotation"}(),a=null===(e=this.getParent())||void 0===e?void 0:e.parentElement.nextSibling;if(a){var r=[].slice.call(a.querySelectorAll(n)).map((function(e){return e.getBoundingClientRect()})),i=Math.min.apply(Math,Object(x.a)(r.map((function(e){return e.x})))),o=Math.max.apply(Math,Object(x.a)(r.map((function(e){return e.right}))));this.setWidth(o-i-2)}}}},{key:"isColSpanHeader",value:function(){var e;return(null===(e=this.getParent())||void 0===e?void 0:e.classList.contains("colspan-header"))||!1}},{key:"getParent",value:function(){return this.element.parentElement}},{key:"getParentRow",value:function(){return this.parentRow||(this.parentRow=this.element.closest("tr")),this.parentRow}},{key:"fetchChildWidth",value:function(){var e=this.element.querySelector("thead, tbody");return T(null===e||void 0===e?void 0:e.getBoundingClientRect().width)}}]),e}(),I=function(){function e(){Object(w.a)(this,e),this.cells=void 0}return Object(R.a)(e,[{key:"getCells",value:function(){return void 0===this.cells&&(this.cells=this.buildCells()),this.cells}},{key:"buildCells",value:function(){var e=this,t=[];return this.fetchCellElements(document.body).forEach((function(n){e.buildCell(n,t,0)})),t}},{key:"buildCell",value:function(e,t,n){var a=this,r=t.find((function(t){return t.element===e}));if(r)return r;var i=new k(e,this.fetchCellElements(e).map((function(e){return a.buildCell(e,t,n+1)})).filter((function(e){return e.depth==n+1})),n);return t.push(i),i}},{key:"fetchCellElements",value:function(e){var t=e.querySelectorAll(".react-resizable");return[].slice.call(t)}}]),e}(),L=function(){(new N).execute()},N=function(){function e(){Object(w.a)(this,e),this.domSession=void 0,this.domSession=new I}return Object(R.a)(e,[{key:"execute",value:function(){var e=this.domSession.getCells().sort((function(e,t){return t.depth-e.depth}));e.forEach(this.refreshWidthAsParent),e.forEach(this.refreshWidthAsLastGroupColumn),e.sort((function(e,t){return e.depth-t.depth})).forEach(this.refreshWidthAsLastColumn)}},{key:"refreshWidthAsParent",value:function(e){e.refreshWidthAsParent()}},{key:"refreshWidthAsLastColumn",value:function(e){e.refreshWidthAsLastColumn()}},{key:"refreshWidthAsLastGroupColumn",value:function(e){e.refreshWidthAsLastGroupColumn()}}]),e}(),D=(n(132),function(e){var t=e.children,n=e.height,i=void 0===n?"100%":n,o=e.minWidth,c=e.onHorizontalResizeStop,u=e.width,l=Object(r.useState)(u),s=Object(a.a)(l,2),d=s[0],b=s[1],m=Object(r.useState)(0),f=Object(a.a)(m,2),y=f[0],v=f[1],E=Object(r.useState)([]),g=Object(a.a)(E,2),x=g[0],w=g[1],R=Object(r.useContext)(O).setSupervisorHash,k=Object(r.useMemo)((function(){return"uuid-".concat(Object(h.v4)())}),[]),L=Object(r.useMemo)((function(){return null!==o&&void 0!==o?o:C}),[o]),N=Object(r.useMemo)((function(){return"".concat("100%"===i?"height-based-on-content":""," ").concat(k)}),[i,k]);Object(r.useLayoutEffect)((function(){function e(e){var t=Math.round(e.detail.width);b(t),null===c||void 0===c||c(t)}return document.addEventListener(k,e),function(){document.removeEventListener(k,e)}}),[k,c,d]);var D=Object(r.useCallback)(T,[]),S=Object(r.useCallback)((function(e,t){var n=[],a=t.element.closest("table"),r=t.getRect(),i=function(e){return null===a||void 0===a?void 0:a.contains(e.element)};if(t.isLastColumn())e.filter((function(e){return e.isLastColumn()})).forEach((function(e){n.push(e)}));else{var o=!1;e.forEach((function(e){var a,c=i(e)||function(e){var n;return null===(n=e.element)||void 0===n?void 0:n.contains(t.element)}(e),u=function(e){var t,n=e.getRect();return(null===(t=e.element.textContent)||void 0===t?void 0:t.match("222"))&&console.log(n,r),n.x-1<=D(r.x)&&D(n.right)+1>=r.right}(e)||function(e){return!!t.isColSpanHeader()&&e.getRect().right===r.right}(e);(null===(a=e.element.textContent)||void 0===a?void 0:a.match("222"))&&console.log("-",c,u),c&&u&&(n.push(e),e.isLastColumn()&&(o=!0))})),o&&e.filter((function(e){return e.isLastColumn()&&!i(e)})).forEach((function(e){n.push(e)}))}return n.forEach((function(e){e.element.dataset.initialWidth=e.element.style.width})),console.log(n.length),console.log(n.map((function(e){return e.element.textContent}))),p.uniqBy(n,(function(e){return e.getId()}))}),[]),A=Object(r.useCallback)((function(){var e=(new I).getCells(),t=e.find((function(e){return e.getId()===k})),n=S(e,t),a=D(t.getRect().width);w(n),v(a)}),[S,k,D]),H=Object(r.useCallback)((function(e,t){var n=parseInt(t.size.width+"");x.forEach((function(e){var t=n-y,a=e.element;if(!(e.getId()===k)){var r=parseInt(a.dataset.initialWidth+"");a.style.width=r+t+"px"}}))}),[x,k,y]),P=Object(r.useCallback)((function(e,t){var n=D(t.size.width);x.forEach((function(e){var t=n-y,a=D(e.element.dataset.initialWidth);e.setWidth(a+t)})),R("-")}),[x,y,R,D]);return Object(r.useMemo)((function(){return r.createElement(j.ResizableBox,{className:N,width:d,minConstraints:[L,0],height:0,axis:"x",onResize:H,onResizeStop:P,onResizeStart:A,handle:r.createElement("div",{className:"pf-c-drawer"},r.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},r.createElement("div",{className:"pf-c-drawer__splitter-handle"})))},t)}),[N,H,P,A,t])}),S=function(e){var t=e.children,n=Object(r.useContext)(O).supervisorHash;return Object(r.useEffect)((function(){var e=setTimeout(L,0);return console.log(">>> executed"+n),function(){return clearTimeout(e)}}),[n]),r.createElement(r.Fragment,null,t)},A=(n(212),"editable-cell--read-mode"),H="editable-cell--edit-mode",P=function(e){var t=e.value,n=e.row.index,i=e.column.id,o=e.onCellUpdate,c=Object(r.useState)(t),u=Object(a.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(r.useState)(A),y=Object(a.a)(f,2),O=y[0],v=y[1],E=Object(r.useRef)(null);Object(r.useEffect)((function(){s(t)}),[t]);var j=Object(r.useCallback)((function(e){v(H),s(e.target.value)}),[]),h=Object(r.useCallback)((function(){v(A),m(!1),o(n,i,l)}),[i,n,l,o]),C=Object(r.useCallback)((function(){var e,t;m(!0),document.activeElement!==E.current&&(null===(e=E.current)||void 0===e||e.focus(),null===(t=E.current)||void 0===t||t.setSelectionRange(l.length,l.length))}),[l]),T=Object(r.useCallback)((function(){v(H)}),[]),g=Object(r.useCallback)((function(){return"editable-cell ".concat(b?"editable-cell--selected":""," ").concat(O)}),[b,O]),x=Object(r.useCallback)((function(e){if("enter"===e.key.toLowerCase())if(e.preventDefault(),O!==A){var t=e.target.value;e.altKey||e.ctrlKey?s("".concat(t,"\n")):(s(t),v(A))}else v(H)}),[O]);return Object(r.useMemo)((function(){return r.createElement(r.Fragment,null,r.createElement("div",{onDoubleClick:T,onClick:C,className:g()},r.createElement("span",null,l),r.createElement("textarea",{ref:E,value:l||"",onFocus:C,onKeyPress:x,onChange:j,onBlur:h})))}),[T,C,g,l,x,j,h])},U=(n(213),n(97)),F=n(321),M=n(315),W=n(308),B=n(309),_=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,i=void 0===a?c.TableHeaderVisibility.Full:a,u=e.getRowKey,l=e.getColumnKey,s=e.onColumnsUpdate,d=Object(r.useCallback)((function(e,n,a){var i=0===e?"counter-cell":"data-cell",o=t.allColumns[e],c=0===e?r.createElement(r.Fragment,null,a+1):r.createElement(D,{width:"number"===typeof(null===o||void 0===o?void 0:o.width)?null===o||void 0===o?void 0:o.width:C,onHorizontalResizeStop:function(n){o.setWidth&&(!function(n){var a;null===o||void 0===o||null===(a=o.setWidth)||void 0===a||a.call(o,n),t.allColumns[e].width=n}(n),null===s||void 0===s||s(t.columns))}},r.createElement(r.Fragment,null,n.render("Cell")));return r.createElement(M.a,Object.assign({},t.getTdProps(e,a),{key:"".concat(l(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(i)}),c)}),[l,s,t]),p=Object(r.useCallback)((function(e,t){var n=Object(o.a)(Object(o.a)({},e.getRowProps()),{},{style:{}});return r.createElement(W.a,Object.assign({className:"table-row"},n,{key:"".concat(u(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return d(n,e,t)})))}),[u,d]),b=Object(r.useMemo)((function(){return r.createElement(W.a,{className:"table-row additive-row"},r.createElement(M.a,{role:"cell",className:"empty-cell"},r.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return r.createElement(M.a,{role:"cell",key:t,className:"row-remainder-content"},e)})))}),[n]);return r.createElement(B.a,Object.assign({className:"".concat(i===c.TableHeaderVisibility.None?"missing-header":"")},t.getTableBodyProps()),t.rows.map((function(e,n){return t.prepareRow(e),p(e,n)})),n?b:null)},K=(n(285),n(310)),V=n(311),z=n(312),Y=n(319),G=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return r.createElement(K.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return r.createElement(V.a,{key:e.group,label:e.group,className:p.every(e.items,(function(e){return!p.includes(n,e.type)}))?"no-allowed-actions-in-group":""},r.createElement(z.a,null,e.items.map((function(e){return r.createElement(Y.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!p.includes(n,e.type)},e.name)}))))})))},X=function(e){var t=e.getColumnPrefix,n=e.tableColumns,i=e.lastSelectedColumn,u=e.lastSelectedRowIndex,l=e.tableRows,s=e.onRowsUpdate,d=e.onRowAdding,b=e.showTableHandler,m=e.setShowTableHandler,y=e.tableHandlerTarget,v=e.handlerConfiguration,E=e.tableHandlerAllowedOperations,j=e.resetRowCustomFunction,h=void 0===j?function(){return{}}:j,C=e.onColumnsUpdate,T=Object(r.useContext)(O),g=Object(r.useState)(i.placeholderOf||i),w=Object(a.a)(g,2),R=w[0],k=w[1],I=Object(r.useState)(u),L=Object(a.a)(I,2),N=L[0],D=L[1];Object(r.useEffect)((function(){k(i.placeholderOf||i)}),[i]),Object(r.useEffect)((function(){D(u)}),[u]);var S=function(e,t,n){return[].concat(Object(x.a)(e.slice(0,t)),[n],Object(x.a)(e.slice(t)))},A=function(e,t,n){return[].concat(Object(x.a)(e.slice(0,t+1)),[n],Object(x.a)(e.slice(t+1)))},H=function(e,t){return[].concat(Object(x.a)(e.slice(0,t)),Object(x.a)(e.slice(t+1)))},P=Object(r.useCallback)((function(e,a){var r="".concat(t(a)).concat(e);return p.find(n.current,{accessor:r})?P(e+1,a):r}),[t,n]),U=Object(r.useCallback)((function(e,t){var n;return null===(n=p.groupBy(e,(function(e){return e.groupType}))[t])||void 0===n?void 0:n.length}),[]),F=Object(r.useCallback)((function(){var e=R.groupType,t=R.cssClasses,a=ee(n.current),r=e?U(a,e)+1:a.length,i=P(r,e);return Object(o.a)(Object(o.a)({accessor:i,label:i},R.dataType?{dataType:c.DataType.Undefined}:{}),{},{inlineEditable:R.inlineEditable,groupType:e,cssClasses:t})}),[P,U,R,n]),M=Object(r.useCallback)((function(){C(Object(x.a)(n.current)),s(Object(x.a)(l.current))}),[C,s,n,l]),W=Object(r.useCallback)((function(e){var t=p.find(n.current,te(R)).columns;e===S?t.unshift(F()):e===A&&t.push(F())}),[F,R,n]),B=function(e){if(R.parent){var t=p.find(n.current,te(R.parent));t.columns=e(t.columns,p.findIndex(t.columns,te(R)),F())}else R.appendColumnsOnChildren&&p.isArray(R.columns)?W(e):n.current=e(n.current,p.findIndex(n.current,te(R)),F());M()},_=Object(r.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:B(S);break;case c.TableOperation.ColumnInsertRight:B(A);break;case c.TableOperation.ColumnDelete:B(H);break;case c.TableOperation.RowInsertAbove:s(S(l.current,N,d()));break;case c.TableOperation.RowInsertBelow:s(A(l.current,N,d()));break;case c.TableOperation.RowDelete:s(H(l.current,N));break;case c.TableOperation.RowClear:s((t=l.current,n=N,[].concat(Object(x.a)(t.slice(0,n)),[h(t[n])],Object(x.a)(t.slice(n+1)))));break;case c.TableOperation.RowDuplicate:s(function(e,t){return[].concat(Object(x.a)(e.slice(0,t+1)),[p.cloneDeep(e[t])],Object(x.a)(e.slice(t+1)))}(l.current,N))}var t,n;m(!1)}),[F,M,d,s,N,m,n,l]),K=Object(r.useMemo)((function(){return function(e){return p.isArray(e)}(v)?v:v[(null===R||void 0===R?void 0:R.groupType)||""]}),[v,null===R||void 0===R?void 0:R.groupType]);return Object(r.useMemo)((function(){var e,t;return r.createElement(f.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:b,shouldClose:function(){return m(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return y},appendTo:null!==(e=null===(t=T.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:r.createElement(G,{handlerConfiguration:K,allowedOperations:E,onOperation:_})})}),[b,T.boxedExpressionEditorRef,K,E,_,m,y])},J=n(171),q=n(318),Q=n(313),Z=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,i=e.editColumnLabel,u=e.headerVisibility,l=void 0===u?c.TableHeaderVisibility.Full:u,s=e.skipLastHeaderGroup,d=e.getColumnKey,b=e.tableColumns,f=e.onColumnsUpdate,y=Object(r.useCallback)((function(e){return p.isObject(i)&&p.has(i,e)?i[e]:"string"===typeof i?i:void 0}),[i]),O=Object(r.useCallback)((function(e,t){return a(p.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),v=Object(r.useCallback)((function(e,t){return function(n){var a=n.name,r=void 0===a?"":a,i=n.dataType,o=e.label,c=b.current[t];if(e.depth>0){var u=e.parent.id,l=p.find(b.current,{accessor:u}).columns;c=p.find(l,{accessor:o})}c.label=r,c.accessor=r,c.dataType=i,f(Object(x.a)(b.current)),r!==o&&O(o,r)}}),[f,b,O]),j=Object(r.useCallback)((function(e,t){var n;return"".concat(d(e),"-").concat((null===(n=e.parent)||void 0===n?void 0:n.id)||"","-").concat(t)}),[d]),h=Object(r.useCallback)((function(e,t){return r.createElement(q.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:j(e,t)}),r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[j]),T=Object(r.useCallback)((function(e,t){return e.inlineEditable?r.createElement(m,{value:e.label,onTextChange:function(n){return v(e,t)({name:n})}}):r.createElement("p",{className:"pf-u-text-truncate"},e.label)}),[v]),g=Object(r.useCallback)((function(e,t){return r.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},e.headerCellElement?e.headerCellElement:T(e,t),e.dataType?r.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[T]),w=Object(r.useCallback)((function(e,t){var n=e.placeholderOf||e,a=p.find(b.current,te(n));e.parent&&(a=p.find(ee(b.current),te(e))),a.width=t,f(b.current)}),[f,b]),R=Object(r.useCallback)((function(e,n){var a,i=Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{}}),c=t.getThProps(e,n),u=e.width||C,l=(null===(a=e.columns)||void 0===a?void 0:a.length)>0||!1;return r.createElement(q.a,Object.assign({},i,c,{className:function(){var t=[];return e.dataType||t.push("no-clickable-cell"),l&&t.push("colspan-header"),e.placeholderOf&&(t.push(e.placeholderOf.cssClasses),t.push(e.placeholderOf.groupType)),t.push(e.groupType||""),t.push(e.cssClasses||""),t.join(" ")}(),key:j(e,n)}),r.createElement(D,{width:u,onHorizontalResizeStop:function(t){return w(e,t)}},r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?r.createElement(E,{title:y(e.groupType),selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:function(t){return v(e,n)(t)},key:j(e,n)},g(e,n)):g(e,n))))}),[j,y,v,w,g,t]),k=Object(r.useCallback)((function(e,t){return e.isCountColumn?h(e,t):R(e,t)}),[h,R]),I=Object(r.useCallback)((function(e){return s?p.dropRight(e.headerGroups):e.headerGroups}),[s]),L=Object(r.useMemo)((function(){return I(t).map((function(e){var t=Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{style:{}}),n=t.key,a=Object(J.a)(t,["key"]);return r.createElement(W.a,Object.assign({key:n},a),e.headers.map((function(e,t){return k(e,t)})))}))}),[I,k,t]),N=Object(r.useCallback)((function(e){return r.createElement(W.a,null,p.nth(t.headerGroups,e).headers.map((function(e,t){return k(e,t)})))}),[k,t.headerGroups]);switch(l){case c.TableHeaderVisibility.Full:return r.createElement(Q.a,{noWrap:!0},L);case c.TableHeaderVisibility.LastLevel:return r.createElement(Q.a,{noWrap:!0},N(-1));case c.TableHeaderVisibility.SecondToLastLevel:return r.createElement(Q.a,{noWrap:!0},N(-2));default:return null}},$="no-table-context-menu",ee=function(e){return p.flatMap(e,(function(e){return p.has(e,"columns")?e.columns:e}))},te=function(e){var t=e.originalId||e.id||e.accessor;return function(e){return e.id===t||e.accessor===t}},ne=function(e){var t=e.tableId,n=e.children,i=e.getColumnPrefix,o=void 0===i?function(){return"column-"}:i,u=e.editColumnLabel,l=e.onColumnsUpdate,s=e.onRowsUpdate,d=e.onRowAdding,b=void 0===d?function(){return{}}:d,m=e.controllerCell,f=void 0===m?"#":m,y=e.defaultCell,v=e.rows,E=e.columns,j=e.handlerConfiguration,h=e.headerVisibility,C=e.headerLevels,T=void 0===C?0:C,g=e.skipLastHeaderGroup,w=void 0!==g&&g,R=e.getRowKey,k=void 0===R?function(e){return e.id}:R,I=e.getColumnKey,L=void 0===I?function(e){return e.id}:I,N=e.resetRowCustomFunction,D=Object(r.useRef)(null),S=Object(r.useContext)(O),A=Object(r.useState)(f),H=Object(a.a)(A,2),M=H[0],W=H[1],B=Object(r.useCallback)((function(e,t){t>0&&(p.assign(e,{columns:[{label:h===c.TableHeaderVisibility.Full?"0":M,accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),B(e.columns[0],t-1))}),[M,h]),K=Object(r.useCallback)((function(e,t){var n={label:e,accessor:"#",width:60,minWidth:60,isCountColumn:!0};return B(n,T),[n].concat(Object(x.a)(t))}),[B,T]),V=Object(r.useRef)(K(M,E)),z=Object(r.useRef)(v),Y=Object(r.useState)(!1),G=Object(a.a)(Y,2),J=G[0],q=G[1],Q=Object(r.useState)(document.body),ne=Object(a.a)(Q,2),ae=ne[0],re=ne[1],ie=Object(r.useState)(p.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),oe=Object(a.a)(ie,2),ce=oe[0],ue=oe[1],le=Object(r.useState)({}),se=Object(a.a)(le,2),de=se[0],pe=se[1],be=Object(r.useState)(-1),me=Object(a.a)(be,2),fe=me[0],ye=me[1];Object(r.useEffect)((function(){V.current=K(f,V.current.slice(1)),W(f)}),[f,K]),Object(r.useEffect)((function(){V.current=K(M,E)}),[E]),Object(r.useEffect)((function(){z.current=v}),[v]);var Oe=Object(r.useCallback)((function(e){V.current=e,null===l||void 0===l||l(e.slice(1))}),[l]),ve=Object(r.useCallback)((function(e){z.current=e,null===s||void 0===s||s(e)}),[s]),Ee=Object(r.useCallback)((function(e,t,n){var a=Object(x.a)(z.current);a[e][t]=n,ve(a)}),[ve]),je=Object(r.useCallback)((function(e,t){var n=Object(x.a)(z.current);n[e]=t,ve(n)}),[ve]),he={Cell:Object(r.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:y?y[t.id](e):P(e)}),[])},Ce=function(e){var t=e.closest("table")===D.current,n=!e.classList.contains($);return t&&n},Te=function(e,t){var n,a;re(e),null===(n=S.currentlyOpenedHandlerCallback)||void 0===n||n.call(S,!1),q(!0),null===(a=S.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(S,(function(){return q})),pe(t)},ge=function(e){return e>0&&function(e){var t,n=ee(V.current),a=null===(t=n[e])||void 0===t?void 0:t.groupType,r=p.groupBy(n,(function(e){return e.groupType}));return a?r[a].length>1:V.current.length>2}(e)},xe=function(e){return 0===e?[]:[c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(x.a)(ge(e)?[c.TableOperation.ColumnDelete]:[]))},we=Object(U.useTable)({columns:V.current,data:z.current,defaultColumn:he,onCellUpdate:Ee,onRowUpdate:je,getThProps:function(e){return{onContextMenu:function(t){var n=p.findIndex(ee(V.current),te(e)),a=t.target,r=!e.disableHandlerOnHeader;Ce(a)&&r&&(t.preventDefault(),ue(xe(n)),Te(a,e))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Ce(a)&&(n.preventDefault(),ue([].concat(Object(x.a)(xe(e)),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(x.a)(z.current.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear,c.TableOperation.RowDuplicate])),Te(a,ee(V.current)[e]),ye(t))}}}},U.useBlockLayout,U.useResizeColumns);return r.createElement("div",{className:"table-component ".concat(t)},r.createElement(F.a,Object.assign({variant:"compact"},we.getTableProps(),{ref:D}),r.createElement(Z,{tableInstance:we,editColumnLabel:u,headerVisibility:h,skipLastHeaderGroup:w,tableRows:z,onRowsUpdate:ve,tableColumns:V,getColumnKey:L,onColumnsUpdate:Oe}),r.createElement(_,{tableInstance:we,getRowKey:k,getColumnKey:L,onColumnsUpdate:Oe,headerVisibility:h},n)),J&&j?r.createElement(X,{tableColumns:V,getColumnPrefix:o,handlerConfiguration:j,lastSelectedColumn:de,lastSelectedRowIndex:fe,tableRows:z,onRowsUpdate:ve,onRowAdding:b,showTableHandler:J,setShowTableHandler:q,tableHandlerAllowedOperations:ce,tableHandlerTarget:ae,resetRowCustomFunction:N,onColumnsUpdate:Oe}):null)},ae=function(e){var t=e.uid,n=e.content,i=void 0===n?"":n,u=e.dataType,l=void 0===u?c.DataType.Undefined:u,s=e.name,d=void 0===s?v:s,p=e.onUpdatingNameAndDataType,b=e.isHeadless,m=void 0!==b&&b,f=e.onUpdatingRecursiveExpression,y=e.width,O=Object(r.useState)(d),j=Object(a.a)(O,2),h=j[0],C=j[1],T=Object(r.useState)(l),g=Object(a.a)(T,2),x=g[0],w=g[1],R=Object(r.useRef)(i),k=Object(r.useRef)(y||250),I=Object(r.useCallback)((function(){var e,n,a=Object(o.a)({uid:t,name:h,dataType:x,logicType:c.LogicType.LiteralExpression,content:R.current},m||250===k.current?{}:{width:k.current});m?null===f||void 0===f||f(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[x,h,m,f,t]),L=Object(r.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,r=void 0===a?v:a;C(r),w(n),null===p||void 0===p||p(r,n),I()}),[p,I]),N=Object(r.useCallback)((function(e){R.current=e,I()}),[I]),S=Object(r.useCallback)((function(e){k.current=e,I()}),[I]),A=Object(r.useCallback)((function(e){return r.createElement(D,{width:k.current,minWidth:250,onHorizontalResizeStop:S},e)}),[S]),H=Object(r.useMemo)((function(){return r.createElement("div",{className:"literal-expression-header"},A(r.createElement(E,{selectedExpressionName:h,selectedDataType:x,onExpressionUpdate:L},r.createElement("div",{className:"expression-info"},r.createElement("p",{className:"expression-name pf-u-text-truncate"},h),r.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",x,")")))))}),[x,h,L,A]),U=Object(r.useMemo)((function(){return r.createElement(P,{value:R.current,row:{index:0},column:{id:null!==t&&void 0!==t?t:"-"},onCellUpdate:function(e,t,n){return N(n)}})}),[N,t]);return Object(r.useEffect)((function(){I()}),[I]),r.createElement("div",{className:"literal-expression"},m?null:H,r.createElement("div",{className:"literal-expression-body"},U))},re=(n(288),function(e){var t,n,i=Object(r.useContext)(O),c=Object(r.useRef)(e.selected),d=Object(r.useState)(!1),b=Object(a.a)(d,2),m=b[0],f=b[1],y=Object(r.useCallback)((function(e){return f(e)}),[]),v=Object(r.useCallback)((function(t,n){var a;f(!1),c.current=n,null===(a=e.onUpdatingRecursiveExpression)||void 0===a||a.call(e,Object(o.a)(Object(o.a)({},e),{},{selected:n}))}),[e]),E=Object(r.useCallback)((function(){return p.map(e.getOptions(),(function(e){return r.createElement(u.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[e]),j=Object(r.useCallback)((function(){return p.includes(e.getOptions(),c.current)?c.current:void 0}),[e]),h=Object(r.useCallback)((function(){return p.isEmpty(j())}),[j]);return r.createElement(l.a,{className:"pmml-literal-expression ".concat(h()?"showing-placeholder":""),menuAppendTo:null!==(t=null===(n=i.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:"inline",ouiaId:"pmml-literal-expression-selector",placeholderText:e.noOptionsLabel,"aria-placeholder":e.noOptionsLabel,variant:s.e.single,onToggle:y,onSelect:v,isOpen:m,selections:j()},E())}),ie=(n(289),n(290),function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],a=Object(r.useRef)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),i=Object(r.useRef)(void 0===e.rows?[[""]]:e.rows),u=Object(r.useCallback)((function(){var t,n,r,c=Object(o.a)(Object(o.a)({},e),{},{columns:a.current,rows:i.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastRelationExpressionDefinition)||void 0===r||r.call(n,c)}),[e]),l=Object(r.useCallback)((function(){return p.map(a.current,(function(e){return Object(o.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),s=Object(r.useCallback)((function(){return p.map(i.current,(function(e){return p.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),b=Object(r.useCallback)((function(e){i.current=p.map(e,(function(e){return p.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),u()}),[u]),m=Object(r.useCallback)((function(e){a.current=p.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),u()}),[u]);return Object(r.useEffect)((function(){u()}),[u]),r.createElement("div",{className:"relation-expression"},r.createElement(ne,{editColumnLabel:t.editRelation,columns:l(),rows:s(),onColumnsUpdate:m,onRowsUpdate:b,handlerConfiguration:n}))}),oe=(n(291),n(292),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,i=Object(r.useRef)(null),o=Object(r.useRef)(t);Object(r.useEffect)((function(){o.current=p.omit(t,"isHeadless")}),[t.logicType]);var u=Object(r.useCallback)((function(){return i.current}),[]),l=Object(r.useCallback)((function(e){o.current.logicType=e,n(p.omit(o.current,"isHeadless"))}),[n]),s=Object(r.useCallback)((function(){o.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(p.omit(o.current,"isHeadless"))}),[a,n]);return r.createElement("div",{className:"entry-expression",ref:i},r.createElement(Le,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:o.current,onLogicTypeUpdating:l,onLogicTypeResetting:s,getPlacementRef:u}))}),ce=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(r.useRef)(i.entryInfo),u=Object(r.useRef)(Object(o.a)({uid:i.entryExpression.uid},i.entryExpression));Object(r.useEffect)((function(){c.current=i.entryInfo}),[i.entryInfo]),Object(r.useEffect)((function(){u.current=i.entryExpression,a(n,Object(o.a)(Object(o.a)({},i),{},{entryInfo:c.current,entryExpression:u.current}))}),[i.entryExpression.logicType]);var l=Object(r.useCallback)((function(e){u.current=Object(o.a)({},e);var t=Object(o.a)({},c.current);i.nameAndDataTypeSynchronized&&p.size(e.name)&&p.size(e.dataType)&&(t.name=e.name,t.dataType=e.dataType),a(n,Object(o.a)(Object(o.a)({},i),{},{entryInfo:t,entryExpression:e}))}),[]);return r.createElement("div",{className:"context-entry-expression-cell"},r.createElement(oe,{expression:u.current,onUpdatingRecursiveExpression:l,onExpressionResetting:i.onExpressionResetting}))},ue=(n(293),function(e){var t=e.name,n=e.dataType,i=e.onContextEntryUpdate,o=e.editInfoPopoverLabel,c=Object(r.useState)(t),u=Object(a.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(n),p=Object(a.a)(d,2),b=p[0],m=p[1];Object(r.useEffect)((function(){s(t)}),[t]),Object(r.useEffect)((function(){m(n)}),[n]);var f=Object(r.useCallback)((function(e){var t=e.name,n=e.dataType;s(t),m(n),i(t,n)}),[i]),y=Object(r.useCallback)((function(e){return r.createElement("div",{className:"entry-definition ".concat(e)},r.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),r.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:b},"(",b,")"))}),[b,l]),O=Object(r.useMemo)((function(){return r.createElement(E,{title:o,selectedExpressionName:l,selectedDataType:b,onExpressionUpdate:f},y("with-popover-menu"))}),[o,b,l,f,y]);return r.createElement("div",{className:"entry-info"},o?O:y())}),le=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(r.useRef)(i.entryInfo),u=Object(r.useRef)(i.entryExpression);Object(r.useEffect)((function(){c.current=i.entryInfo}),[i.entryInfo]),Object(r.useEffect)((function(){u.current=i.entryExpression}),[i.entryExpression]);var l=Object(r.useCallback)((function(e,t){var r=Object(o.a)({},u.current);i.nameAndDataTypeSynchronized&&p.size(e)&&p.size(t)&&(r.name=e,r.dataType=t),a(n,Object(o.a)(Object(o.a)({},i),{},{entryExpression:r,entryInfo:{name:e,dataType:t}}))}),[i,n,a]);return r.createElement("div",{className:"context-entry-info-cell"},r.createElement(ue,{name:c.current.name,dataType:c.current.dataType,onContextEntryUpdate:l,editInfoPopoverLabel:i.editInfoPopoverLabel}))},se="ContextEntry-1",de=c.DataType.Undefined,pe=function(e){var t=e.uid,n=e.name,i=void 0===n?se:n,o=e.dataType,u=void 0===o?de:o,l=e.contextEntries,s=e.result,b=void 0===s?{}:s,m=e.renderResult,f=void 0===m||m,y=e.entryInfoWidth,v=void 0===y?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:y,E=e.entryExpressionWidth,j=void 0===E?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:E,h=e.isHeadless,C=void 0!==h&&h,T=e.noHandlerMenu,x=void 0!==T&&T,w=e.onUpdatingRecursiveExpression,R=Object(d.useBoxedExpressionEditorI18n)().i18n,k=Object(r.useState)(b),I=Object(a.a)(k,2),L=I[0],N=I[1],S=Object(r.useState)(v),A=Object(a.a)(S,2),H=A[0],P=A[1],U=Object(r.useState)(j),F=Object(a.a)(U,2),M=F[0],W=F[1],B=r.useContext(O).setSupervisorHash,_=Object(r.useMemo)((function(){return[{label:i,accessor:i,dataType:u,disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:H,setWidth:P,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:M,setWidth:W,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[u,M,H,i]),K=Object(r.useState)(l||[{entryInfo:{name:se,dataType:de},entryExpression:{name:se,dataType:de},editInfoPopoverLabel:R.editContextEntry,nameAndDataTypeSynchronized:!0}]),V=Object(a.a)(K,2),z=V[0],Y=V[1],G=Object(r.useCallback)((function(){var e=Object(c.generateNextAvailableEntryName)(p.map(z,(function(e){return e.entryInfo})),"ContextEntry");return{entryInfo:{name:e,dataType:c.DataType.Undefined},entryExpression:{name:e,dataType:c.DataType.Undefined},editInfoPopoverLabel:R.editContextEntry,nameAndDataTypeSynchronized:!0}}),[R.editContextEntry,z]),X=Object(r.useCallback)((function(){return C?c.TableHeaderVisibility.None:c.TableHeaderVisibility.SecondToLastLevel}),[C]);return Object(r.useEffect)((function(){var e,n,r=Object(a.a)(_,1)[0],i={uid:t,logicType:c.LogicType.Context,name:r.accessor,dataType:r.dataType,contextEntries:z,result:p.omit(L,"isHeadless"),entryInfoWidth:H,entryExpressionWidth:M};C?null===w||void 0===w||w(p.omit(i,["name","dataType"])):(B(g(i)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,i))}),[_,C,w,z,L,H,M,t,B]),r.createElement("div",{className:"context-expression ".concat(t)},r.createElement(ne,{tableId:t,headerLevels:1,headerVisibility:X(),defaultCell:{entryInfo:le,entryExpression:ce},columns:_,rows:z,onRowAdding:G,onRowsUpdate:Y,handlerConfiguration:x?void 0:Object(c.getHandlerConfiguration)(R,R.contextEntry),getRowKey:Object(r.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(r.useCallback)(c.resetEntry,[])},f?[r.createElement(D,{key:"context-result",width:H,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH,onHorizontalResizeStop:function(e){return P(e)}},r.createElement("div",{className:"context-result"},"<result>")),r.createElement(D,{key:"context-expression",width:M,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH,onHorizontalResizeStop:function(e){return W(e)}},r.createElement(oe,{expression:L,onUpdatingRecursiveExpression:N}))]:void 0))},be=n(93);var me,fe=n(92),ye=n.n(fe),Oe=(n(294),n(295),[c.HitPolicy.Collect]),ve=function(e){var t,n,i,o,b,m,f=e.onBuiltInAggregatorSelect,v=e.onHitPolicySelect,E=e.selectedBuiltInAggregator,j=e.selectedHitPolicy,h=Object(d.useBoxedExpressionEditorI18n)().i18n,C=Object(r.useState)(!1),T=Object(a.a)(C,2),g=T[0],x=T[1],w=Object(r.useState)(!1),R=Object(a.a)(w,2),k=R[0],I=R[1],L=Object(r.useState)(!p.includes(Oe,j)),N=Object(a.a)(L,2),D=N[0],S=N[1],A=Object(r.useContext)(O),H=Object(r.useCallback)((function(e){return x(e)}),[]),P=Object(r.useCallback)((function(e){return I(e)}),[]),U=Object(r.useCallback)((function(e,t){var n=t,a=p.includes(Oe,n);v(n),a?S(!1):(S(!0),f("<None>")),x(!1)}),[f,v]),F=Object(r.useCallback)((function(){return p.map(Object.values(c.HitPolicy),(function(e){return r.createElement(u.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),M=Object(r.useCallback)((function(e,t){f(t),I(!1)}),[f]),W=Object(r.useCallback)((function(){return p.map(Object.keys(c.BuiltinAggregation),(function(e){return r.createElement(u.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),B=Object(r.useCallback)((function(e,t){return p.includes(Oe,t)?e:""}),[]);return r.createElement(y,{title:h.editHitPolicy,appendTo:null!==(t=null===(n=A.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"hit-policy-popover",hasAutoWidth:!0,body:r.createElement("div",{className:"hit-policy-container"},r.createElement("div",{className:"hit-policy-section"},r.createElement("label",null,h.hitPolicy),r.createElement(l.a,{className:"hit-policy-selector",menuAppendTo:null!==(i=null===(o=A.boxedExpressionEditorRef)||void 0===o?void 0:o.current)&&void 0!==i?i:"inline",ouiaId:"hit-policy-selector",variant:s.e.single,onToggle:H,onSelect:U,isOpen:g,selections:j},F())),r.createElement("div",{className:"builtin-aggregator-section"},r.createElement("label",null,h.builtInAggregator),r.createElement(l.a,{className:"builtin-aggregator-selector",menuAppendTo:null!==(b=null===(m=A.boxedExpressionEditorRef)||void 0===m?void 0:m.current)&&void 0!==b?b:"inline",ouiaId:"builtin-aggregator-selector",isDisabled:D,variant:s.e.single,onToggle:P,onSelect:M,isOpen:k,selections:Object(c.getEnumKeyByEnumValue)(c.BuiltinAggregation,E)},W())))},r.createElement("div",{className:"selected-hit-policy"},"".concat(p.first(j)).concat(B(E,j))))};!function(e){e.InputClause="input",e.OutputClause="output",e.Annotation="annotation"}(me||(me={}));var Ee="",je="output-1",he=function(e){var t=e.uid,n=e.isHeadless,i=e.onUpdatingRecursiveExpression,o=e.name,u=void 0===o?je:o,l=e.dataType,s=void 0===l?c.DataType.Undefined:l,b=e.onUpdatingNameAndDataType,m=e.hitPolicy,f=void 0===m?c.HitPolicy.Unique:m,y=e.aggregation,v=void 0===y?c.BuiltinAggregation["<None>"]:y,E=e.input,j=void 0===E?[{name:"input-1",dataType:c.DataType.Undefined}]:E,h=e.output,C=void 0===h?[{name:je,dataType:c.DataType.Undefined}]:h,T=e.annotations,w=void 0===T?[{name:"annotation-1"}]:T,R=e.rules,k=void 0===R?[{inputEntries:["-"],outputEntries:[Ee],annotationEntries:[Ee]}]:R,I=Object(d.useBoxedExpressionEditorI18n)().i18n,L=Object(r.useCallback)((function(e){switch(e){case me.InputClause:return"input-";case me.OutputClause:return"output-";case me.Annotation:return"annotation-";default:return"column-"}}),[]),N=Object(r.useCallback)((function(e){return[{group:e,items:[{name:I.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:I.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:I.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:I.decisionRule,items:[{name:I.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:I.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:I.rowOperations.delete,type:c.TableOperation.RowDelete},{name:I.rowOperations.duplicate,type:c.TableOperation.RowDuplicate}]}]}),[I]),D=Object(r.useContext)(O).setSupervisorHash,S=Object(r.useMemo)((function(){var e={};return e[""]=N(I.ruleAnnotation),e[me.InputClause]=N(I.inputClause),e[me.OutputClause]=N(I.outputClause),e[me.Annotation]=N(I.ruleAnnotation),e}),[N,I.inputClause,I.outputClause,I.ruleAnnotation]),A=Object(r.useMemo)((function(){var e={};return e[me.InputClause]=I.editClause.input,e[me.OutputClause]=I.editClause.output,e}),[I.editClause.input,I.editClause.output]),H=Object(r.useState)(f),P=Object(a.a)(H,2),U=P[0],F=P[1],M=Object(r.useState)(v),W=Object(a.a)(M,2),B=W[0],_=W[1],K=Object(r.useCallback)((function(e){return F(e)}),[]),V=Object(r.useCallback)((function(e){return _(c.BuiltinAggregation[e])}),[]),z=Object(r.useRef)(u),Y=Object(r.useRef)(s),G=Object(r.useRef)(function(){var e=p.map(j,(function(e){return{label:e.name,accessor:e.name,dataType:e.dataType,width:e.width,groupType:me.InputClause,cssClasses:"decision-table--input"}})),t=p.map(C,(function(e){return{label:e.name,accessor:e.name,dataType:e.dataType,width:e.width,groupType:me.OutputClause,cssClasses:"decision-table--output"}})),n=p.map(w,(function(e){return{label:e.name,accessor:e.name,width:e.width,inlineEditable:!0,groupType:me.Annotation,cssClasses:"decision-table--annotation"}}));return[{groupType:me.InputClause,label:"Input",accessor:"Input",cssClasses:"decision-table--input",columns:e},{groupType:me.OutputClause,label:z.current,accessor:z.current,dataType:Y.current,cssClasses:"decision-table--output",columns:t,appendColumnsOnChildren:!0},{groupType:me.Annotation,label:"Annotations",accessor:"Annotations",cssClasses:"decision-table--annotation",columns:n,inlineEditable:!0}]}()),X=Object(r.useRef)(p.map(k,(function(e){var t=[].concat(Object(x.a)(e.inputEntries),Object(x.a)(e.outputEntries),Object(x.a)(e.annotationEntries));return p.reduce(ee(G.current),(function(e,n,a){return e[n.accessor]=t[a]||Ee,e}),{})}))),J=Object(r.useCallback)((function(){var e,a,r=p.groupBy(ee(G.current),(function(e){return e.groupType})),o=p.map(r[me.InputClause],(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),u=p.map(r[me.OutputClause],(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),l=p.map(r[me.Annotation],(function(e){return{name:e.accessor,width:e.width}})),s=p.map(X.current,(function(e){return{inputEntries:p.map(o,(function(t){return e[t.name]})),outputEntries:p.map(u,(function(t){return e[t.name]})),annotationEntries:p.map(l,(function(t){return e[t.name]}))}})),d={uid:t,logicType:c.LogicType.DecisionTable,name:z.current,dataType:Y.current,hitPolicy:U,aggregation:B,input:o,output:u,annotations:l,rules:s};n?null===i||void 0===i||i(d):(D("!!!!!!!!!"+g(d)),null===(e=window.beeApi)||void 0===e||null===(a=e.broadcastDecisionTableExpressionDefinition)||void 0===a||a.call(e,d))}),[n,i,B,U,D,t]),q=Object(r.useCallback)((function(e){G.current=Object(x.a)(e);var t=p.find(e,{groupType:me.OutputClause});z.current=t.label,Y.current=t.dataType,null===b||void 0===b||b(t.label,t.dataType),J()}),[b,J]),Q=Object(r.useCallback)((function(e){return p.map(e,(function(e){return p.reduce(ee(G.current),(function(t,n){return p.isNil(e[n.accessor])?t[n.accessor]=n.groupType===me.InputClause?"-":Ee:t[n.accessor]=e[n.accessor],t}),{})}))}),[]),Z=Object(r.useCallback)((function(e){X.current=Q(e),J()}),[Q,J]),$=Object(r.useCallback)((function(){return p.reduce(ee(G.current),(function(e,t){return e[t.accessor]=t.groupType===me.InputClause?"-":Ee,e}),{})}),[]);return Object(r.useEffect)((function(){J()}),[J]),r.createElement("div",{className:"decision-table-expression ".concat(t)},r.createElement(ne,{headerLevels:1,headerVisibility:c.TableHeaderVisibility.Full,getColumnPrefix:L,editColumnLabel:A,handlerConfiguration:S,columns:G.current,rows:X.current,onColumnsUpdate:q,onRowsUpdate:Z,onRowAdding:$,controllerCell:Object(r.useMemo)((function(){return r.createElement(ve,{selectedHitPolicy:U,selectedBuiltInAggregator:B,onHitPolicySelect:K,onBuiltInAggregatorSelect:V})}),[V,K,B,U])}))},Ce=(n(296),function(e){var t=e.isHeadless,n=e.items,i=e.onUpdatingRecursiveExpression,o=e.uid,u=e.width,l=void 0===u?430:u,s=Object(d.useBoxedExpressionEditorI18n)().i18n,b=Object(r.useMemo)((function(){return[{group:s.rows,items:[{name:s.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:s.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:s.rowOperations.delete,type:c.TableOperation.RowDelete},{name:s.rowOperations.clear,type:c.TableOperation.RowClear}]}]}),[s.rowOperations.clear,s.rowOperations.delete,s.rowOperations.insertAbove,s.rowOperations.insertBelow,s.rows]),m=Object(r.useCallback)((function(){return{uid:ye()(),name:"",dataType:c.DataType.Undefined,logicType:c.LogicType.LiteralExpression,content:""}}),[]),f=Object(r.useCallback)((function(){return p.isEmpty(n)?[{entryExpression:m()}]:p.map(n,(function(e){return{entryExpression:e}}))}),[m,n]),y=Object(r.useState)(f()),v=Object(a.a)(y,2),E=v[0],j=v[1],h=Object(r.useState)(l||430),C=Object(a.a)(h,2),T=C[0],x=C[1],w=Object(r.useContext)(O).setSupervisorHash,R=Object(r.useCallback)((function(e){return e.original.entryExpression.uid}),[]),k=Object(r.useCallback)((function(){return{entryExpression:m()}}),[m]);Object(r.useEffect)((function(){var e,n,a={uid:o,logicType:c.LogicType.List,width:T,items:p.map(E,(function(e){return e.entryExpression}))};t?null===i||void 0===i||i(a):(w(g(a)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,a))}),[T,E,t,i,o,w]);var I=Object(r.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),L=Object(r.useCallback)((function(e){j(e)}),[]),N=Object(r.useMemo)((function(){return[{accessor:"list",width:T,setWidth:x}]}),[T]);return Object(r.useMemo)((function(){return r.createElement("div",{className:"list-expression"},r.createElement(ne,{tableId:o,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:ce},columns:N,rows:E,onRowsUpdate:L,onRowAdding:k,handlerConfiguration:b,getRowKey:R,resetRowCustomFunction:I}))}),[N,b,E,R,k,L,I,o])}),Te=(n(297),"p-1"),ge=c.DataType.Undefined,xe=function(e){var t=e.bindingEntries,n=e.dataType,i=void 0===n?ge:n,o=e.entryInfoWidth,u=void 0===o?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:o,l=e.entryExpressionWidth,s=void 0===l?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:l,b=e.invokedFunction,m=void 0===b?"":b,f=e.isHeadless,y=e.logicType,v=e.name,E=void 0===v?Te:v,j=e.onUpdatingNameAndDataType,h=e.onUpdatingRecursiveExpression,C=e.uid,T=Object(d.useBoxedExpressionEditorI18n)().i18n,x=Object(r.useState)(t||[{entryInfo:{name:Te,dataType:ge},entryExpression:{name:Te,dataType:ge},editInfoPopoverLabel:T.editParameter,nameAndDataTypeSynchronized:!0}]),w=Object(a.a)(x,2),R=w[0],k=w[1],I=Object(r.useState)(u),L=Object(a.a)(I,2),N=L[0],D=L[1],S=Object(r.useState)(s),A=Object(a.a)(S,2),H=A[0],P=A[1],U=Object(r.useState)(m),F=Object(a.a)(U,2),M=F[0],W=F[1],B=Object(r.useContext)(O).setSupervisorHash;Object(r.useEffect)((function(){var e,t,n=Object(a.a)(V.current,1)[0],r={uid:C,logicType:y,name:n.accessor,dataType:n.dataType,bindingEntries:R,invokedFunction:M,entryInfoWidth:N,entryExpressionWidth:H},i=p.omit(r,["name","dataType"]);f?null===h||void 0===h||h(i):(B(g(i)),null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,r))}),[H,M,N,f,y,h,R,B,C]);var _=Object(r.useCallback)((function(e){W(e.target.value)}),[]),K=r.createElement("div",{className:"function-definition-container"},r.createElement("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:T.enterFunction,defaultValue:M,onBlur:_})),V=Object(r.useRef)([{label:E,accessor:E,dataType:i,disableHandlerOnHeader:!0,columns:[{headerCellElement:K,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:N,setWidth:D,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:H,setWidth:P,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}]),z=Object(r.useCallback)((function(e){var t=Object(a.a)(e,1)[0];null===j||void 0===j||j(t.label,t.dataType);var n=Object(a.a)(V.current,1)[0];n.label=t.label,n.accessor=t.accessor,n.dataType=t.dataType}),[j]),Y=Object(r.useCallback)((function(){var e=Object(c.generateNextAvailableEntryName)(p.map(R,(function(e){return e.entryInfo})),"p");return{entryInfo:{name:e,dataType:ge},entryExpression:{name:e,dataType:ge},editInfoPopoverLabel:T.editParameter,nameAndDataTypeSynchronized:!0}}),[T.editParameter,R]),G=Object(r.useCallback)((function(){return f?c.TableHeaderVisibility.SecondToLastLevel:c.TableHeaderVisibility.Full}),[f]),X=Object(r.useCallback)((function(e){return k(e)}),[]),J=Object(r.useCallback)((function(e){return Object(c.getEntryKey)(e)}),[]),q=Object(r.useCallback)((function(e){return Object(c.resetEntry)(e)}),[]);return Object(r.useMemo)((function(){return r.createElement("div",{className:"invocation-expression ".concat(C)},r.createElement(ne,{tableId:C,headerLevels:2,headerVisibility:G(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:le,entryExpression:ce},columns:V.current,rows:R,onColumnsUpdate:z,onRowAdding:Y,onRowsUpdate:X,handlerConfiguration:Object(c.getHandlerConfiguration)(T,T.parameters),getRowKey:J,resetRowCustomFunction:q}))}),[G,J,T,z,Y,q,R,X,C])},we=(n(298),n(314)),Re=function(e){var t=e.parameters,n=e.setParameters,a=Object(d.useBoxedExpressionEditorI18n)().i18n,i=Object(r.useCallback)((function(){n((function(e){return[].concat(Object(x.a)(e),[{name:Object(c.generateNextAvailableEntryName)(e,"p"),dataType:c.DataType.Undefined}])}))}),[n]),o=Object(r.useCallback)((function(e){return function(t){return n((function(n){return n[e].name=t.target.value,Object(x.a)(n)}))}}),[n]),u=Object(r.useCallback)((function(e){return function(t){n((function(n){return n[e].dataType=t,Object(x.a)(n)}))}}),[n]),l=Object(r.useCallback)((function(e){return function(){return n((function(t){return[].concat(Object(x.a)(t.slice(0,e)),Object(x.a)(t.slice(e+1)))}))}}),[n]);return r.createElement("div",{className:"parameters-editor"},r.createElement(be.a,{variant:"tertiary",onClick:i,className:"add-parameter"},a.addParameter),r.createElement("div",{className:"parameters-container"},p.map(t,(function(e,t){return r.createElement("div",{key:"".concat(e.name,"_").concat(t),className:"parameter-entry"},r.createElement("input",{className:"parameter-name",type:"text",onBlur:o(t),defaultValue:e.name}),r.createElement(b,{selectedDataType:e.dataType,onDataTypeChange:u(t),menuAppendTo:"parent"}),r.createElement(be.a,{variant:"danger",className:"delete-parameter",icon:r.createElement(we.a,null),iconPosition:"left",onClick:l(t)},a.delete))}))))},ke=(n(299),function(e){var t,n,a=e.selectedFunctionKind,i=e.onFunctionKindSelect,o=Object(d.useBoxedExpressionEditorI18n)().i18n,u=Object(r.useContext)(O),l=Object(r.useCallback)((function(e){return function(t,n){i(n),e()}}),[i]),s=Object(r.useCallback)((function(){return p.map(Object.values(c.FunctionKind),(function(e){return r.createElement(Y.a,{key:e,itemId:e,"data-ouia-component-id":e},e)}))}),[]);return r.createElement(y,{title:o.selectFunctionKind,appendTo:null!==(t=null===(n=u.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"function-kind-popover",hasAutoWidth:!0,body:function(e){return r.createElement(K.a,{onSelect:l(e)},r.createElement(z.a,null,s()))}},r.createElement("div",{className:"selected-function-kind"},p.first(a)))}),Ie=function(e){var t=void 0===e.parametersWidth?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:e.parametersWidth,n=void 0===e.formalParameters?[]:e.formalParameters,i=void 0===e.functionKind?c.FunctionKind.Feel:e.functionKind,o=Object(r.useState)(t),u=Object(a.a)(o,2),l=u[0],s=u[1],b=Object(d.useBoxedExpressionEditorI18n)().i18n,m=Object(r.useContext)(O),f=m.boxedExpressionEditorRef,v=m.setSupervisorHash,E=m.pmmlParams,j=Object(r.useState)(n),h=Object(a.a)(j,2),C=h[0],T=h[1],x=Object(r.useRef)(void 0===e.name?"p-1":e.name),w=Object(r.useRef)(void 0===e.dataType?c.DataType.Undefined:e.dataType),R=Object(r.useRef)(e.document),k=Object(r.useRef)(e.model),I=Object(r.useCallback)((function(){return function(){return f.current}}),[f]),L=Object(r.useMemo)((function(){return r.createElement(y,{title:b.editParameters,appendTo:I(),className:"parameters-editor-popover",minWidth:"400px",body:r.createElement(Re,{parameters:C,setParameters:T})},r.createElement("div",{className:"parameters-list ".concat(p.isEmpty(C)?"empty-parameters":"")},r.createElement("p",{className:"pf-u-text-truncate"},p.isEmpty(C)?b.editParameters:"(".concat(p.join(p.map(C,(function(e){return e.name})),", "),")"))))}),[I,b.editParameters,C]),N=Object(r.useCallback)((function(){return[{label:x.current,accessor:x.current,dataType:w.current,disableHandlerOnHeader:!0,columns:[{headerCellElement:L,accessor:"parameters",disableHandlerOnHeader:!0,width:l,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[L,l]),D=Object(r.useCallback)((function(e){return[{entryInfo:{name:b.class,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.class}},{entryInfo:{name:b.methodSignature,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.method}}]}),[b.class,b.methodSignature]),S=Object(r.useCallback)((function(){return[{entryInfo:{name:b.document,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.PMMLLiteralExpression,noOptionsLabel:b.pmml.firstSelection,getOptions:function(){return p.map(E,"document")},selected:R.current}},{entryInfo:{name:b.model,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.PMMLLiteralExpression,noOptionsLabel:b.pmml.secondSelection,getOptions:function(){var e;return p.map(null===(e=p.find(E,(function(e){return e.document===R.current})))||void 0===e?void 0:e.modelsFromDocument,"model")},selected:k.current}}]}),[b.document,b.model,b.pmml.firstSelection,b.pmml.secondSelection,E]),A=Object(r.useCallback)((function(){var e,t;return(null===(e=p.find(null===(t=p.find(E,{document:R.current}))||void 0===t?void 0:t.modelsFromDocument,{model:k.current}))||void 0===e?void 0:e.parametersFromModel)||[]}),[]),H=Object(r.useCallback)((function(t){switch(t){case c.FunctionKind.Java:var n=e;return[{entryExpression:{logicType:c.LogicType.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:D(n)}}];case c.FunctionKind.Pmml:return[{entryExpression:{logicType:c.LogicType.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:S()}}];case c.FunctionKind.Feel:default:return[{entryExpression:e.expression||{logicType:c.LogicType.LiteralExpression}}]}}),[D,S,e]),P=Object(r.useRef)(N()),U=Object(r.useState)(i),F=Object(a.a)(U,2),M=F[0],W=F[1],B=Object(r.useState)(H(M)),_=Object(a.a)(B,2),K=_[0],V=_[1],z=Object(r.useCallback)((function(e,t){var n,a,r,i,o,c;return e===R.current&&p.includes(null===(n=p.nth(t.contextEntries,1))||void 0===n||null===(a=n.entryExpression)||void 0===a?void 0:a.getOptions(),null===(r=p.nth(t.contextEntries,1))||void 0===r||null===(i=r.entryExpression)||void 0===i?void 0:i.selected)?null===(o=p.nth(t.contextEntries,1))||void 0===o||null===(c=o.entryExpression)||void 0===c?void 0:c.selected:""}),[]),Y=Object(r.useCallback)((function(e,t){if(e&&T([]),t){var n=A();p.isEmpty(n)||T(n)}}),[A]),G=Object(r.useCallback)((function(e,t){switch(t){case c.FunctionKind.Java:var n,a,r,i,o,u=null===(n=p.first(K))||void 0===n?void 0:n.entryExpression,l=(null===(a=p.nth(u.contextEntries,0))||void 0===a||null===(r=a.entryExpression)||void 0===r?void 0:r.content)||"",s=(null===(i=p.nth(u.contextEntries,1))||void 0===i||null===(o=i.entryExpression)||void 0===o?void 0:o.content)||"";return p.extend(e,{class:l,method:s});case c.FunctionKind.Pmml:var d,b,m,f=null===(d=p.first(K))||void 0===d?void 0:d.entryExpression,y=(null===(b=p.nth(f.contextEntries,0))||void 0===b||null===(m=b.entryExpression)||void 0===m?void 0:m.selected)||"",O=z(y,f),v=y!==R.current,E=O!==k.current;return R.current=y,k.current=O,Y(v,E),p.extend(e,{document:y,model:O});case c.FunctionKind.Feel:default:var j;return p.extend(e,{expression:null===(j=p.first(K))||void 0===j?void 0:j.entryExpression})}}),[z,K,Y]),X=Object(r.useCallback)((function(){var t,n,r,i=Object(a.a)(P.current,1)[0],o=G({uid:e.uid,logicType:e.logicType,name:i.accessor,dataType:i.dataType,functionKind:M,formalParameters:C,parametersWidth:l},M);e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,p.omit(o,["name","dataType"])):(v(g(K)),null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastFunctionExpressionDefinition)||void 0===r||r.call(n,o))}),[G,v,C,e,M,K,l]),J=Object(r.useCallback)((function(){return e.isHeadless?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[e.isHeadless]),q=Object(r.useCallback)((function(e){var t=e;W(t),V([{entryExpression:{logicType:c.LogicType.Undefined}}]),setTimeout((function(){V(H(t))}),0)}),[H]),Q=Object(r.useCallback)((function(t){var n,r=Object(a.a)(t,1)[0];null===(n=e.onUpdatingNameAndDataType)||void 0===n||n.call(e,r.label,r.dataType),s(r.width);var i=Object(a.a)(P.current,1)[0];i.label=r.label,i.accessor=r.accessor,i.dataType=r.dataType,X()}),[P,e,X]);Object(r.useEffect)((function(){X()}),[K,X]),Object(r.useEffect)((function(){P.current=N()}),[C]);var Z=Object(r.useCallback)((function(e){return W(c.FunctionKind.Feel),Object(c.resetEntry)(e)}),[]);return r.createElement("div",{className:"function-expression ".concat(e.uid)},r.createElement(ne,{handlerConfiguration:[{group:p.upperCase(b.function),items:[{name:b.rowOperations.clear,type:c.TableOperation.RowClear}]}],columns:P.current,onColumnsUpdate:Q,rows:K,onRowsUpdate:V,headerLevels:1,headerVisibility:J(),controllerCell:Object(r.useMemo)((function(){return r.createElement(ke,{selectedFunctionKind:M,onFunctionKindSelect:q})}),[q,M]),defaultCell:{parameters:ce},resetRowCustomFunction:Z}))},Le=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,i=e.onLogicTypeResetting,o=e.onUpdatingNameAndDataType,u=e.getPlacementRef,l=e.isHeadless,s=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,f=Object(r.useContext)(O),v=p.extend(t,{uid:t.uid||ye()(),isHeadless:s,onUpdatingNameAndDataType:o,onUpdatingRecursiveExpression:b}),E=function(e){return!p.isEmpty(e)&&e!==c.LogicType.Undefined},j=Object(r.useState)(E(v.logicType)),h=Object(a.a)(j,2),C=h[0],T=h[1];Object(r.useEffect)((function(){T(E(t.logicType))}),[t.logicType]);var g=function(){var e=Object(r.useRef)(null),t=Object(r.useState)("0px"),n=Object(a.a)(t,2),i=n[0],o=n[1],c=Object(r.useState)("0px"),u=Object(a.a)(c,2),l=u[0],s=u[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(r.useCallback)((function(){b&&m(!1)}),[b]),y=Object(r.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),o("".concat(t.pageX,"px")),s("".concat(t.pageY,"px")),m(!0))}),[o,s]);return Object(r.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",y),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",y)}})),{contextMenuRef:e,contextMenuXPos:i,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),x=g.contextMenuRef,w=g.contextMenuXPos,R=g.contextMenuYPos,k=g.contextMenuVisibility,I=g.setContextMenuVisibility,L=Object(r.useMemo)((function(){switch(v.logicType){case c.LogicType.LiteralExpression:return r.createElement(ae,v);case c.LogicType.PMMLLiteralExpression:return r.createElement(re,v);case c.LogicType.Relation:return r.createElement(ie,v);case c.LogicType.Context:return r.createElement(pe,v);case c.LogicType.DecisionTable:return r.createElement(he,v);case c.LogicType.Invocation:return r.createElement(xe,v);case c.LogicType.List:return r.createElement(Ce,v);case c.LogicType.Function:return r.createElement(Ie,p.defaults(v,{functionKind:c.FunctionKind.Feel}));default:return v.logicType}}),[v.logicType]),N=Object(r.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return!p.includes([c.LogicType.Undefined,c.LogicType.PMMLLiteralExpression],e)}))}),[]),D=Object(r.useCallback)((function(){return p.map(N(),(function(e){return r.createElement(Y.a,{key:e,itemId:e},e)}))}),[N]),S=Object(r.useCallback)((function(){return u()}),[u]),A=Object(r.useCallback)((function(){var e,t;return null!==(e=null===(t=f.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:S}),[S,f.boxedExpressionEditorRef]),H=Object(r.useCallback)((function(e,t){T(!0),n(t)}),[n]),P=Object(r.useCallback)((function(){return r.createElement(y,{title:m.selectLogicType,arrowPlacement:S,appendTo:A(),className:"logic-type-popover",hasAutoWidth:!0,body:r.createElement(K.a,{onSelect:H},r.createElement(z.a,null,D()))})}),[m.selectLogicType,S,A,H,D]),U=Object(r.useCallback)((function(){T(!1),I(!1),i()}),[i,I]),F=Object(r.useCallback)((function(){return r.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:R,left:w}},r.createElement(be.a,{isDisabled:!C,isSmall:!0,variant:be.b.primary,onClick:U},m.clear))}),[C,w,R,U,m.clear]);return r.createElement("div",{className:"logic-type-selector ".concat($," ").concat(C?"logic-type-selected":"logic-type-not-present"),ref:x},C?L:m.selectExpression,C?null:P(),!t.noClearAction&&k?F():null)},Ne=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(e.selectedExpression),i=Object(a.a)(n,2),u=i[0],l=i[1],s=Object(r.useCallback)((function(e,t){l((function(n){return Object(o.a)(Object(o.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(r.useCallback)((function(e){l((function(t){return Object(o.a)(Object(o.a)({},t),{},{logicType:e})}))}),[]),p=Object(r.useCallback)((function(){l((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(r.useCallback)((function(){return t.current}),[]);return r.createElement("div",{className:"expression-container"},r.createElement("div",{className:"expression-name-and-logic-type"},r.createElement("span",{className:"expression-title"},u.name),r.createElement("span",{className:"expression-type"},"(",u.logicType||c.LogicType.Undefined,")")),r.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},r.createElement(Le,{selectedExpression:u,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:s,getPlacementRef:b})))},De=function(e){var t=Object(r.useState)((function(){return p.identity})),n=Object(a.a)(t,2),o=n[0],c=n[1],u=Object(r.useRef)(null),l=Object(r.useState)(g(e.expressionDefinition)),s=Object(a.a)(l,2),b=s[0],m=s[1];return Object(r.useMemo)((function(){return r.createElement(i.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},r.createElement(O.Provider,{value:{pmmlParams:e.pmmlParams,supervisorHash:b,setSupervisorHash:m,boxedExpressionEditorRef:u,currentlyOpenedHandlerCallback:o,setCurrentlyOpenedHandlerCallback:c}},r.createElement(S,null,r.createElement("div",{className:"boxed-expression-editor",ref:u},r.createElement(Ne,e.expressionDefinition)))))}),[e.expressionDefinition])}}},[[173,1,2]]]);
//# sourceMappingURL=main.6d1ec1f7.chunk.js.map