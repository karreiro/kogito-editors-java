(this["webpackJsonpboxed-expression-component-showcase"]=this["webpackJsonpboxed-expression-component-showcase"]||[]).push([[0],{116:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},270:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return $e}));var a,i=n(4),r=n(0),c=n(33),o=(n(162),n(163),n(8)),s=(n(164),n(165),n(166),n(133));n(167);!function(e){e["<None>"]="",e.SUM="+",e.COUNT="#",e.MIN="<",e.MAX=">"}(a||(a={}));var l,u,d=n(3);!function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(l||(l={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear",e[e.RowDuplicate=7]="RowDuplicate"}(u||(u={}));var b,p=150,f=370,j=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:u.RowInsertAbove},{name:e.rowOperations.insertBelow,type:u.RowInsertBelow},{name:e.rowOperations.delete,type:u.RowDelete},{name:e.rowOperations.clear,type:u.RowClear}]}]},m=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i="".concat(n,"-").concat(0===a?1:a),r=d.find(t,{name:i});return r?e(t,n,a+1):i},O=function(e){var t=e.original;return t.entryInfo.name+t.entryInfo.dataType},v=function(e){return Object(o.a)(Object(o.a)({},e),{},{entryExpression:{uid:e.entryExpression.uid}})};!function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(b||(b={}));var h,x,y,C=function(e,t){var n=Object.keys(e).filter((function(n){return e[n]==t}));return n.length>0?n[0]:null};!function(e){e.Feel="FEEL",e.Java="JAVA",e.Pmml="PMML"}(h||(h={})),function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(x||(x={})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.PMMLLiteralExpression="PMML Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(y||(y={}));n(168),n(169);var g=n(44),E=n(301),w=n(9),T=n(134),R=Object(o.a)(Object(o.a)({},T.en),{},{addParameter:"Add parameter",builtInAggregator:"Builtin Aggregator",choose:"Choose...",class:"class",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionRule:"DECISION RULE",decisionTable:"Decision Table",delete:"Delete",document:"document",editClause:{input:"Edit Input Clause",output:"Edit Output Clause"},editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editHitPolicy:"Edit Hit Policy",editParameter:"Edit Parameter",editParameters:"Edit parameters",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",hitPolicy:"Hit Policy",inputClause:"INPUT CLAUSE",invocation:"Invocation",list:"List",literalExpression:"Literal expression",methodSignature:"method signature",model:"model",name:"Name",outputClause:"OUTPUT CLAUSE",parameters:"PARAMETERS",pmml:{firstSelection:"First select PMML document",secondSelection:"Second select PMML model"},relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",duplicate:"Duplicate",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",ruleAnnotation:"RULE ANNOTATION",selectExpression:"Select expression",selectFunctionKind:"Select Function Kind",selectLogicType:"Select logic type"}),k={locale:"en",dictionary:R},I=new Map([["en",R]]),L=r.createContext({});function S(){return Object(r.useContext)(L)}var N=n(1),A=function(e){var t=e.selectedDataType,n=e.onDataTypeChange,a=e.menuAppendTo,c=S().i18n,o=Object(r.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],p=Object(r.useCallback)((function(e,t){u(!1),n(t)}),[n]),f=Object(r.useCallback)((function(){return d.map(Object.values(b),(function(e){return Object(N.jsx)(g.a,{value:e,"data-ouia-component-id":e,children:e},e)}))}),[]),j=Object(r.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return f()}return""!==e.target.value?f().filter((function(e){return t.test(e.props.value)})):f()}),[f]),m=Object(r.useCallback)((function(e){return u(e)}),[]);return Object(N.jsx)(E.a,{menuAppendTo:a,ouiaId:"edit-expression-data-type",variant:w.e.typeahead,typeAheadAriaLabel:c.choose,onToggle:m,onSelect:p,onFilter:j,isOpen:l,selections:t,hasInlineFilter:!0,inlineFilterPlaceholderText:c.choose,children:f()})},U=function(e){var t=e.onTextChange,n=e.value,a=Object(r.useState)(!0),c=Object(i.a)(a,2),o=c[0],s=c[1],l=Object(r.useCallback)((function(e){var n=e.target.value;d.size(n.trim())&&t(n),s(!0)}),[t]),u=Object(r.useMemo)((function(){return function(e){var t="enter"===d.lowerCase(e.key),n="escape"===d.lowerCase(e.key);t&&e.currentTarget.blur(),n&&s(!0)}}),[]),b=Object(r.useMemo)((function(){return function(){s(!1)}}),[]);return o?Object(N.jsx)("p",{className:"pf-u-text-truncate",onClick:b,children:n}):Object(N.jsx)("input",{type:"text",autoFocus:!0,defaultValue:n,onBlur:l,style:{borderRadius:"0.5em",width:"100%"},onKeyDown:u})},D=(n(184),n(302)),P=(n(185),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,i=e.title,r=e.appendTo,c=e.className,o=e.hasAutoWidth,s=e.minWidth;return Object(N.jsx)(D.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:o,minWidth:s,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:r,headerContent:Object(N.jsx)("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title",children:i}),bodyContent:a,children:t})}),H=r.createContext({}),M="Expression Name",F=function(e){var t,n,a,c,o,s,l=e.children,u=e.appendTo,d=e.arrowPlacement,p=e.title,f=e.nameField,j=e.dataTypeField,m=e.selectedDataType,O=void 0===m?b.Undefined:m,v=e.selectedExpressionName,h=e.onExpressionUpdate,x=Object(r.useContext)(H),y=S().i18n;p=null!==(t=p)&&void 0!==t?t:y.editExpression,f=null!==(n=f)&&void 0!==n?n:y.name,j=null!==(a=j)&&void 0!==a?a:y.dataType,u=null!==(c=null!==(o=u)&&void 0!==o?o:null===(s=x.boxedExpressionEditorRef)||void 0===s?void 0:s.current)&&void 0!==c?c:void 0;var C=Object(r.useState)(O),g=Object(i.a)(C,2),E=g[0],w=g[1],T=Object(r.useState)(v),R=Object(i.a)(T,2),k=R[0],I=R[1];Object(r.useEffect)((function(){I(v)}),[v]),Object(r.useEffect)((function(){w(O)}),[O]);var L=Object(r.useCallback)((function(e){I(e.target.value),"blur"===e.type&&h({name:e.target.value,dataType:E})}),[E,h]),U=Object(r.useCallback)((function(e){w(e),h({name:k,dataType:e})}),[k,h]);return Object(N.jsx)(P,{title:p,arrowPlacement:d,appendTo:u,body:Object(N.jsxs)("div",{className:"edit-expression-menu",children:[Object(N.jsxs)("div",{className:"expression-name",children:[Object(N.jsx)("label",{children:f}),Object(N.jsx)("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:k,onChange:L,onBlur:L,className:"form-control pf-c-form-control",placeholder:M})]}),Object(N.jsxs)("div",{className:"expression-data-type",children:[Object(N.jsx)("label",{children:j}),Object(N.jsx)(A,{selectedDataType:E,onDataTypeChange:U})]})]}),children:l})},W=n(148),B=n(304),z=150,K=function(e){return Math.max(Math.round(parseFloat(e+"")),z)},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},G=n(10),J=n(13),Y=n(14),q=function(){function e(t,n,a){Object(J.a)(this,e),this.element=t,this.children=n,this.depth=a,this.id=void 0,this.lastColumn=void 0,this.rect=void 0,this.parentRow=void 0}return Object(Y.a)(e,[{key:"getId",value:function(){return this.id||(this.id=d.first([].slice.call(this.element.classList).filter((function(e){return e.match(/uuid-/g)})))||""),this.id}},{key:"getRect",value:function(){return this.rect||(this.rect=this.element.getBoundingClientRect()),this.rect}},{key:"isLastColumn",value:function(){var e;this.lastColumn||(this.lastColumn=(null===(e=this.getParentRow())||void 0===e?void 0:e.lastChild)===this.element.closest("th, td"));return this.lastColumn}},{key:"setWidth",value:function(e){var t=K(e);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;document.dispatchEvent(new CustomEvent(e,{detail:{width:t}}))}(this.getId(),t),this.element.style.width=t+"px"}},{key:"refreshWidthAsParent",value:function(){this.children.length>0&&this.setWidth(this.fetchChildWidth()+14)}},{key:"refreshWidthAsLastColumn",value:function(){if(this.isLastColumn()){var e=this.getParentRow().getBoundingClientRect();e&&this.setWidth(Math.round(e.right)-Math.round(this.getRect().x)-1)}}},{key:"refreshWidthAsLastGroupColumn",value:function(){var e,t;if(this.isColSpanHeader()){var n=null===(e=this.getParent())||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.nextSibling;if(n){var a=[].slice.call(n.querySelectorAll(".".concat(this.getHeaderType()))).map((function(e){return e.getBoundingClientRect()})),i=Math.min.apply(Math,Object(G.a)(a.map((function(e){return e.x})))),r=Math.max.apply(Math,Object(G.a)(a.map((function(e){return e.right}))));this.setWidth(r-i-2)}}}},{key:"isColSpanHeader",value:function(){var e;return(null===(e=this.getParent())||void 0===e?void 0:e.classList.contains("colspan-header"))||!1}},{key:"getHeaderType",value:function(){var e,t=(null===(e=this.getParent())||void 0===e?void 0:e.classList)||[];return t.contains("input")?"input":t.contains("output")?"output":"annotation"}},{key:"getParent",value:function(){return this.element.parentElement}},{key:"getParentRow",value:function(){return this.parentRow||(this.parentRow=this.element.closest("tr")),this.parentRow}},{key:"fetchChildWidth",value:function(){var e=this.element.querySelector("thead, tbody");return K(null===e||void 0===e?void 0:e.getBoundingClientRect().width)}}]),e}(),X=function(){function e(){Object(J.a)(this,e),this.cells=void 0}return Object(Y.a)(e,[{key:"getCells",value:function(){return void 0===this.cells&&(this.cells=this.buildCells()),this.cells}},{key:"buildCells",value:function(){var e=this,t=[];return this.fetchCellElements(document.body).forEach((function(n){e.buildCell(n,t,0)})),t}},{key:"buildCell",value:function(e,t,n){var a=this,i=t.find((function(t){return t.element===e}));if(i)return i;var r=new q(e,this.fetchCellElements(e).map((function(e){return a.buildCell(e,t,n+1)})).filter((function(e){return e.depth==n+1})),n);return t.push(r),r}},{key:"fetchCellElements",value:function(e){var t=e.querySelectorAll(".react-resizable");return[].slice.call(t)}}]),e}(),_=function(){(new Q).execute()},Q=function(){function e(){Object(J.a)(this,e),this.domSession=void 0,this.domSession=new X}return Object(Y.a)(e,[{key:"execute",value:function(){var e=this.domSession.getCells().sort((function(e,t){return t.depth-e.depth}));e.forEach(this.refreshWidthAsParent),e.forEach(this.refreshWidthAsLastGroupColumn),e.sort((function(e,t){return e.depth-t.depth})).forEach(this.refreshWidthAsLastColumn)}},{key:"refreshWidthAsParent",value:function(e){e.refreshWidthAsParent()}},{key:"refreshWidthAsLastColumn",value:function(e){e.refreshWidthAsLastColumn()}},{key:"refreshWidthAsLastGroupColumn",value:function(e){e.refreshWidthAsLastGroupColumn()}}]),e}(),Z=(n(116),function(e){var t=e.children,n=e.height,a=void 0===n?"100%":n,c=e.minWidth,o=e.onHorizontalResizeStop,s=e.width,l=Object(r.useState)(s),u=Object(i.a)(l,2),b=u[0],p=u[1],f=Object(r.useState)(0),j=Object(i.a)(f,2),m=j[0],O=j[1],v=Object(r.useState)([]),h=Object(i.a)(v,2),x=h[0],y=h[1],C=Object(r.useContext)(H).setSupervisorHash,g=Object(r.useMemo)((function(){return"uuid-".concat(Object(B.a)())}),[]),E=Object(r.useMemo)((function(){return null!==c&&void 0!==c?c:z}),[c]),w=Object(r.useMemo)((function(){return"".concat("100%"===a?"height-based-on-content":""," ").concat(g)}),[a,g]);Object(r.useLayoutEffect)((function(){function e(e){var t=Math.round(e.detail.width);p(t),null===o||void 0===o||o(t)}return document.addEventListener(g,e),function(){document.removeEventListener(g,e)}}),[g,o,b]);var T=Object(r.useCallback)(K,[]),R=Object(r.useCallback)((function(e,t){var n=[],a=t.element.closest("table"),i=t.getRect(),r=function(e){return null===a||void 0===a?void 0:a.contains(e.element)};if(t.isLastColumn())e.filter((function(e){return e.isLastColumn()})).forEach((function(e){n.push(e)}));else{var c=!1;e.forEach((function(e){var a=r(e)||function(e){var n;return null===(n=e.element)||void 0===n?void 0:n.contains(t.element)}(e),o=function(e){var t=e.getRect();return t.x<=i.x&&t.right>=i.right}(e)||function(e){return!!t.isColSpanHeader()&&e.getRect().right===i.right}(e);a&&o&&(n.push(e),e.isLastColumn()&&(c=!0))})),c&&e.filter((function(e){return e.isLastColumn()&&!r(e)})).forEach((function(e){n.push(e)}))}return n.forEach((function(e){e.element.dataset.initialWidth=e.element.style.width})),d.uniqBy(n,(function(e){return e.getId()}))}),[]),k=Object(r.useCallback)((function(){var e=(new X).getCells(),t=e.find((function(e){return e.getId()===g})),n=R(e,t),a=T(t.getRect().width);y(n),O(a)}),[R,g,T]),I=Object(r.useCallback)((function(e,t){var n=parseInt(t.size.width+"");x.forEach((function(e){var t=n-m,a=e.element;if(!(e.getId()===g)){var i=parseInt(a.dataset.initialWidth+"");a.style.width=i+t+"px"}}))}),[x,g,m]),L=Object(r.useCallback)((function(e,t){var n=T(t.size.width);x.forEach((function(e){var t=n-m,a=T(e.element.dataset.initialWidth);e.setWidth(a+t)})),C("-")}),[x,m,C,T]);return Object(r.useMemo)((function(){return Object(N.jsx)(W.ResizableBox,{className:w,width:b,minConstraints:[E,0],height:0,axis:"x",onResize:I,onResizeStop:L,onResizeStart:k,handle:Object(N.jsx)("div",{className:"pf-c-drawer",children:Object(N.jsx)("div",{className:"pf-c-drawer__splitter pf-m-vertical",children:Object(N.jsx)("div",{className:"pf-c-drawer__splitter-handle"})})}),children:t})}),[w,I,L,k,t])}),$=function(e){var t=e.children,n=Object(r.useContext)(H).supervisorHash;return Object(r.useEffect)((function(){var e=setTimeout(_,0);return function(){return clearTimeout(e)}}),[n]),Object(N.jsx)(N.Fragment,{children:t})},ee=(n(196),"editable-cell--read-mode"),te="editable-cell--edit-mode",ne=function(e){var t=e.value,n=e.row.index,a=e.column.id,c=e.onCellUpdate,o=Object(r.useState)(t),s=Object(i.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)(!1),b=Object(i.a)(d,2),p=b[0],f=b[1],j=Object(r.useState)(ee),m=Object(i.a)(j,2),O=m[0],v=m[1],h=Object(r.useRef)(null);Object(r.useEffect)((function(){u(t)}),[t]);var x=Object(r.useCallback)((function(e){v(te),u(e.target.value)}),[]),y=Object(r.useCallback)((function(){v(ee),f(!1),c(n,a,l)}),[a,n,l,c]),C=Object(r.useCallback)((function(){var e,t;f(!0),document.activeElement!==h.current&&(null===(e=h.current)||void 0===e||e.focus(),null===(t=h.current)||void 0===t||t.setSelectionRange(l.length,l.length))}),[l]),g=Object(r.useCallback)((function(){v(te)}),[]),E=Object(r.useCallback)((function(){return"editable-cell ".concat(p?"editable-cell--selected":""," ").concat(O)}),[p,O]),w=Object(r.useCallback)((function(e){if("enter"===e.key.toLowerCase())if(e.preventDefault(),O!==ee){var t=e.target.value;e.altKey||e.ctrlKey?u("".concat(t,"\n")):(u(t),v(ee))}else v(te)}),[O]);return Object(r.useMemo)((function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{onDoubleClick:g,onClick:C,className:E(),children:[Object(N.jsx)("span",{children:l}),Object(N.jsx)("textarea",{ref:h,value:l||"",onFocus:C,onKeyPress:w,onChange:x,onBlur:y})]})})}),[g,C,E,l,w,x,y])},ae=(n(197),n(94)),ie=n(306),re=n(300),ce=n(293),oe=n(294),se=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,i=void 0===a?l.Full:a,c=e.getRowKey,s=e.getColumnKey,u=e.onColumnsUpdate,d=Object(r.useCallback)((function(e,n,a){var i=0===e?"counter-cell":"data-cell",c=t.allColumns[e],l=0===e?Object(N.jsx)(N.Fragment,{children:a+1}):Object(N.jsx)(Z,{width:"number"===typeof(null===c||void 0===c?void 0:c.width)?null===c||void 0===c?void 0:c.width:z,onHorizontalResizeStop:function(n){c.setWidth&&(!function(n){var a;null===c||void 0===c||null===(a=c.setWidth)||void 0===a||a.call(c,n),t.allColumns[e].width=n}(n),null===u||void 0===u||u(t.columns))},children:Object(N.jsx)(N.Fragment,{children:n.render("Cell")})});return Object(r.createElement)(re.a,Object(o.a)(Object(o.a)({},t.getTdProps(e,a)),{},{key:"".concat(s(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(i)}),l)}),[s,u,t]),b=Object(r.useCallback)((function(e,t){var n=Object(o.a)(Object(o.a)({},e.getRowProps()),{},{style:{}});return Object(r.createElement)(ce.a,Object(o.a)(Object(o.a)({className:"table-row"},n),{},{key:"".concat(c(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return d(n,e,t)})))}),[c,d]),p=Object(r.useMemo)((function(){return Object(N.jsxs)(ce.a,{className:"table-row additive-row",children:[Object(N.jsx)(re.a,{role:"cell",className:"empty-cell",children:Object(N.jsx)("br",{})}),null===n||void 0===n?void 0:n.map((function(e,t){return Object(N.jsx)(re.a,{role:"cell",className:"row-remainder-content",children:e},t)}))]})}),[n]);return Object(N.jsxs)(oe.a,Object(o.a)(Object(o.a)({className:"".concat(i===l.None?"missing-header":"")},t.getTableBodyProps()),{},{children:[t.rows.map((function(e,n){return t.prepareRow(e),b(e,n)})),n?p:null]}))},le=(n(270),n(295)),ue=n(296),de=n(297),be=n(305),pe=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return Object(N.jsx)(le.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)},children:t.map((function(e){return Object(N.jsx)(ue.a,{label:e.group,className:d.every(e.items,(function(e){return!d.includes(n,e.type)}))?"no-allowed-actions-in-group":"",children:Object(N.jsx)(de.a,{children:e.items.map((function(e){return Object(N.jsx)(be.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,itemId:e.type,isDisabled:!d.includes(n,e.type),children:e.name},e.type)}))})},e.group)}))})},fe=function(e){var t=e.getColumnPrefix,n=e.tableColumns,a=e.lastSelectedColumn,c=e.lastSelectedRowIndex,s=e.tableRows,l=e.onRowsUpdate,p=e.onRowAdding,f=e.showTableHandler,j=e.setShowTableHandler,m=e.tableHandlerTarget,O=e.handlerConfiguration,v=e.tableHandlerAllowedOperations,h=e.resetRowCustomFunction,x=void 0===h?function(){return{}}:h,y=e.onColumnsUpdate,C=Object(r.useContext)(H),g=Object(r.useState)(a.placeholderOf||a),E=Object(i.a)(g,2),w=E[0],T=E[1],R=Object(r.useState)(c),k=Object(i.a)(R,2),I=k[0],L=k[1];Object(r.useEffect)((function(){T(a.placeholderOf||a)}),[a]),Object(r.useEffect)((function(){L(c)}),[c]);var S=function(e,t,n){return[].concat(Object(G.a)(e.slice(0,t)),[n],Object(G.a)(e.slice(t)))},A=function(e,t,n){return[].concat(Object(G.a)(e.slice(0,t+1)),[n],Object(G.a)(e.slice(t+1)))},U=function(e,t){return[].concat(Object(G.a)(e.slice(0,t)),Object(G.a)(e.slice(t+1)))},P=Object(r.useCallback)((function(e,a){var i="".concat(t(a)).concat(e);return d.find(xe(n.current),{accessor:i})?P(e+1,a):i}),[t,n]),M=Object(r.useCallback)((function(e,t){var n;return null===(n=d.groupBy(e,(function(e){return e.groupType}))[t])||void 0===n?void 0:n.length}),[]),F=Object(r.useCallback)((function(){var e=w.groupType,t=w.cssClasses,a=xe(n.current),i=e?M(a,e)+1:a.length,r=P(i,e);return Object(o.a)(Object(o.a)({accessor:r,label:r},w.dataType?{dataType:b.Undefined}:{}),{},{inlineEditable:w.inlineEditable,groupType:e,cssClasses:t})}),[P,M,w,n]),W=Object(r.useCallback)((function(){y(Object(G.a)(n.current)),l(Object(G.a)(s.current))}),[y,l,n,s]),B=Object(r.useCallback)((function(e){var t=d.find(n.current,ye(w)).columns;e===S?t.unshift(F()):e===A&&t.push(F())}),[F,w,n]),z=function(e){if(w.parent){var t=d.find(n.current,ye(w.parent));t.columns=e(t.columns,d.findIndex(t.columns,ye(w)),F())}else w.appendColumnsOnChildren&&d.isArray(w.columns)?B(e):n.current=e(n.current,d.findIndex(n.current,ye(w)),F());W()},K=Object(r.useCallback)((function(e){switch(e){case u.ColumnInsertLeft:z(S);break;case u.ColumnInsertRight:z(A);break;case u.ColumnDelete:z(U);break;case u.RowInsertAbove:l(S(s.current,I,p()));break;case u.RowInsertBelow:l(A(s.current,I,p()));break;case u.RowDelete:l(U(s.current,I));break;case u.RowClear:l((t=s.current,n=I,[].concat(Object(G.a)(t.slice(0,n)),[x(t[n])],Object(G.a)(t.slice(n+1)))));break;case u.RowDuplicate:l(function(e,t){return[].concat(Object(G.a)(e.slice(0,t+1)),[d.cloneDeep(e[t])],Object(G.a)(e.slice(t+1)))}(s.current,I))}var t,n;j(!1)}),[F,W,p,l,I,j,n,s]),V=Object(r.useMemo)((function(){return function(e){return d.isArray(e)}(O)?O:O[(null===w||void 0===w?void 0:w.groupType)||""]}),[O,null===w||void 0===w?void 0:w.groupType]);return Object(r.useMemo)((function(){var e,t;return Object(N.jsx)(D.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:f,shouldClose:function(){return j(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return m},appendTo:null!==(e=null===(t=C.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:Object(N.jsx)(pe,{handlerConfiguration:V,allowedOperations:v,onOperation:K})})}),[f,C.boxedExpressionEditorRef,V,v,K,j,m])},je=n(153),me=n(303),Oe=n(298),ve=["key"],he=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,i=e.editColumnLabel,c=e.headerVisibility,s=void 0===c?l.Full:c,u=e.skipLastHeaderGroup,b=e.getColumnKey,p=e.tableColumns,f=e.onColumnsUpdate,j=Object(r.useCallback)((function(e){return d.isObject(i)&&d.has(i,e)?i[e]:"string"===typeof i?i:void 0}),[i]),m=Object(r.useCallback)((function(e,t){return a(d.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),O=Object(r.useCallback)((function(e,t){return function(n){var a=n.name,i=void 0===a?"":a,r=n.dataType,c=e.label,o=p.current[t];if(e.depth>0){var s=e.parent.id,l=d.find(p.current,{accessor:s}).columns;o=d.find(l,{accessor:c})}o.label=i,o.accessor=i,o.dataType=r,f(Object(G.a)(p.current)),i!==c&&m(c,i)}}),[f,p,m]),v=Object(r.useCallback)((function(e,t){var n;return"".concat(b(e),"-").concat((null===(n=e.parent)||void 0===n?void 0:n.id)||"","-").concat(t)}),[b]),h=Object(r.useCallback)((function(e,t){return Object(r.createElement)(me.a,Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{className:"fixed-column no-clickable-cell",key:v(e,t)}),Object(N.jsx)("div",{className:"header-cell","data-ouia-component-type":"expression-column-header",children:e.label}))}),[v]),x=Object(r.useCallback)((function(e,t){return e.inlineEditable?Object(N.jsx)(U,{value:e.label,onTextChange:function(n){return O(e,t)({name:n})}}):Object(N.jsx)("p",{className:"pf-u-text-truncate",children:e.label})}),[O]),y=Object(r.useCallback)((function(e,t){return Object(N.jsxs)("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info",children:[e.headerCellElement?e.headerCellElement:x(e,t),e.dataType?Object(N.jsxs)("p",{className:"pf-u-text-truncate data-type",children:["(",e.dataType,")"]}):null]})}),[x]),C=Object(r.useCallback)((function(e,t){var n=e.placeholderOf||e,a=d.find(p.current,ye(n));e.parent&&(a=d.find(xe(p.current),ye(e))),a.width=t,f(p.current)}),[f,p]),g=Object(r.useCallback)((function(e,n){var a,i=Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{}}),c=t.getThProps(e,n),s=e.width||z,l=(null===(a=e.columns)||void 0===a?void 0:a.length)>0||!1;return Object(r.createElement)(me.a,Object(o.a)(Object(o.a)(Object(o.a)({},i),c),{},{className:function(){var t=[];return e.dataType||t.push("no-clickable-cell"),l&&t.push("colspan-header"),e.placeholderOf&&(t.push(e.placeholderOf.cssClasses),t.push(e.placeholderOf.groupType)),t.push(e.groupType||""),t.push(e.cssClasses||""),t.join(" ")}(),key:v(e,n)}),Object(N.jsx)(Z,{width:s,onHorizontalResizeStop:function(t){return C(e,t)},children:Object(N.jsx)("div",{className:"header-cell","data-ouia-component-type":"expression-column-header",children:e.dataType?Object(N.jsx)(F,{title:j(e.groupType),selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:function(t){return O(e,n)(t)},children:y(e,n)},v(e,n)):y(e,n)})}))}),[v,j,O,C,y,t]),E=Object(r.useCallback)((function(e,t){return e.isCountColumn?h(e,t):g(e,t)}),[h,g]),w=Object(r.useCallback)((function(e){return u?d.dropRight(e.headerGroups):e.headerGroups}),[u]),T=Object(r.useMemo)((function(){return w(t).map((function(e){var t=Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{style:{}}),n=t.key,a=Object(je.a)(t,ve);return Object(N.jsx)(ce.a,Object(o.a)(Object(o.a)({},a),{},{children:e.headers.map((function(e,t){return E(e,t)}))}),n)}))}),[w,E,t]),R=Object(r.useCallback)((function(e){return Object(N.jsx)(ce.a,{children:d.nth(t.headerGroups,e).headers.map((function(e,t){return E(e,t)}))})}),[E,t.headerGroups]);switch(s){case l.Full:return Object(N.jsx)(Oe.a,{noWrap:!0,children:T});case l.LastLevel:return Object(N.jsx)(Oe.a,{noWrap:!0,children:R(-1)});case l.SecondToLastLevel:return Object(N.jsx)(Oe.a,{noWrap:!0,children:R(-2)});default:return null}},xe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.flatMap(t,(function(t){return d.has(t,"columns")?n>0?e(t.columns,n-1):t.columns:t}))},ye=function(e){var t=e.originalId||e.id||e.accessor;return function(e){return e.id===t||e.accessor===t}},Ce=function(e){var t=e.tableId,n=e.children,a=e.getColumnPrefix,c=void 0===a?function(){return"column-"}:a,s=e.editColumnLabel,b=e.onColumnsUpdate,p=e.onRowsUpdate,f=e.onRowAdding,j=void 0===f?function(){return{}}:f,m=e.controllerCell,O=void 0===m?"#":m,v=e.defaultCell,h=e.rows,x=e.columns,y=e.handlerConfiguration,C=e.headerVisibility,g=e.headerLevels,E=void 0===g?0:g,w=e.skipLastHeaderGroup,T=void 0!==w&&w,R=e.getRowKey,k=void 0===R?function(e){return e.id}:R,I=e.getColumnKey,L=void 0===I?function(e){return e.id}:I,S=e.resetRowCustomFunction,A=Object(r.useRef)(null),U=Object(r.useContext)(H),D=Object(r.useState)(O),P=Object(i.a)(D,2),M=P[0],F=P[1],W=Object(r.useCallback)((function(e,t){var n;t>0&&(d.assign(e,{columns:[{label:C===l.Full?"0":M,accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.length)&&W(e.columns[0],t-1))}),[M,C]),B=Object(r.useCallback)((function(e,t){var n={label:e,accessor:"#",width:60,minWidth:60,isCountColumn:!0};return W(n,E),[n].concat(Object(G.a)(t))}),[W,E]),z=Object(r.useRef)(B(M,x)),K=Object(r.useRef)(h),V=Object(r.useState)(!1),J=Object(i.a)(V,2),Y=J[0],q=J[1],X=Object(r.useState)(document.body),_=Object(i.a)(X,2),Q=_[0],Z=_[1],$=Object(r.useState)(d.values(u).map((function(e){return parseInt(e.toString())}))),ee=Object(i.a)($,2),te=ee[0],re=ee[1],ce=Object(r.useState)({}),oe=Object(i.a)(ce,2),le=oe[0],ue=oe[1],de=Object(r.useState)(-1),be=Object(i.a)(de,2),pe=be[0],je=be[1];Object(r.useEffect)((function(){z.current=B(O,z.current.slice(1)),F(O)}),[O,B]),Object(r.useEffect)((function(){z.current=B(M,x)}),[x]),Object(r.useEffect)((function(){K.current=h}),[h]);var me=Object(r.useCallback)((function(e){z.current=e,null===b||void 0===b||b(e.slice(1))}),[b]),Oe=Object(r.useCallback)((function(e){K.current=e,null===p||void 0===p||p(e)}),[p]),ve=Object(r.useCallback)((function(e,t,n){var a=Object(G.a)(K.current);a[e][t]=n,Oe(a)}),[Oe]),Ce=Object(r.useCallback)((function(e,t){var n=Object(G.a)(K.current);n[e]=t,Oe(n)}),[Oe]),ge={Cell:Object(r.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:v?v[t.id](e):ne(e)}),[])},Ee=function(e){var t=e.closest("table")===A.current,n=!e.classList.contains("no-table-context-menu");return t&&n},we=function(e,t){var n,a;Z(e),null===(n=U.currentlyOpenedHandlerCallback)||void 0===n||n.call(U,!1),q(!0),null===(a=U.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(U,(function(){return q})),ue(t)},Te=function(e){return e>0&&function(e){var t,n=xe(z.current),a=null===(t=n[e])||void 0===t?void 0:t.groupType,i=d.groupBy(n,(function(e){return e.groupType}));return a?i[a].length>1:z.current.length>2}(e)},Re=function(e){return 0===e?[]:[u.ColumnInsertLeft,u.ColumnInsertRight].concat(Object(G.a)(Te(e)?[u.ColumnDelete]:[]))},ke=Object(ae.useTable)({columns:z.current,data:K.current,defaultColumn:ge,onCellUpdate:ve,onRowUpdate:Ce,getThProps:function(e){return{onContextMenu:function(t){var n=d.findIndex(xe(z.current,e.depth),ye(e)),a=t.target,i=!e.disableHandlerOnHeader;Ee(a)&&i&&(t.preventDefault(),re(Re(n)),we(a,e))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Ee(a)&&(n.preventDefault(),re([].concat(Object(G.a)(Re(e)),[u.RowInsertAbove,u.RowInsertBelow],Object(G.a)(K.current.length>1?[u.RowDelete]:[]),[u.RowClear,u.RowDuplicate])),we(a,xe(ke.columns,E)[e]),je(t))}}}},ae.useBlockLayout,ae.useResizeColumns);return Object(N.jsxs)("div",{className:"table-component ".concat(t),children:[Object(N.jsxs)(ie.a,Object(o.a)(Object(o.a)({variant:"compact"},ke.getTableProps()),{},{ref:A,children:[Object(N.jsx)(he,{tableInstance:ke,editColumnLabel:s,headerVisibility:C,skipLastHeaderGroup:T,tableRows:K,onRowsUpdate:Oe,tableColumns:z,getColumnKey:L,onColumnsUpdate:me}),Object(N.jsx)(se,{tableInstance:ke,getRowKey:k,getColumnKey:L,onColumnsUpdate:me,headerVisibility:C,children:n})]})),Y&&y?Object(N.jsx)(fe,{tableColumns:z,getColumnPrefix:c,handlerConfiguration:y,lastSelectedColumn:le,lastSelectedRowIndex:pe,tableRows:K,onRowsUpdate:Oe,onRowAdding:j,showTableHandler:Y,setShowTableHandler:q,tableHandlerAllowedOperations:te,tableHandlerTarget:Q,resetRowCustomFunction:S,onColumnsUpdate:me}):null]})},ge=function(e){var t=e.uid,n=e.content,a=void 0===n?"":n,c=e.dataType,s=void 0===c?b.Undefined:c,l=e.name,u=void 0===l?M:l,d=e.onUpdatingNameAndDataType,p=e.isHeadless,f=void 0!==p&&p,j=e.onUpdatingRecursiveExpression,m=e.width,O=Object(r.useState)(u),v=Object(i.a)(O,2),h=v[0],x=v[1],C=Object(r.useState)(s),g=Object(i.a)(C,2),E=g[0],w=g[1],T=Object(r.useRef)(a),R=Object(r.useRef)(m||250),k=Object(r.useCallback)((function(){var e,n,a=Object(o.a)({uid:t,name:h,dataType:E,logicType:y.LiteralExpression,content:T.current},f||250===R.current?{}:{width:R.current});f?null===j||void 0===j||j(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[E,h,f,j,t]),I=Object(r.useCallback)((function(e){var t=e.dataType,n=void 0===t?b.Undefined:t,a=e.name,i=void 0===a?M:a;x(i),w(n),null===d||void 0===d||d(i,n),k()}),[d,k]),L=Object(r.useCallback)((function(e){T.current=e,k()}),[k]),S=Object(r.useCallback)((function(e){R.current=e,k()}),[k]),A=Object(r.useCallback)((function(e){return Object(N.jsx)(Z,{width:R.current,minWidth:250,onHorizontalResizeStop:S,children:e})}),[S]),U=Object(r.useMemo)((function(){return Object(N.jsx)("div",{className:"literal-expression-header",children:A(Object(N.jsx)(F,{selectedExpressionName:h,selectedDataType:E,onExpressionUpdate:I,children:Object(N.jsxs)("div",{className:"expression-info",children:[Object(N.jsx)("p",{className:"expression-name pf-u-text-truncate",children:h}),Object(N.jsxs)("p",{className:"expression-data-type pf-u-text-truncate",children:["(",E,")"]})]})}))})}),[E,h,I,A]),D=Object(r.useMemo)((function(){return Object(N.jsx)(ne,{value:T.current,row:{index:0},column:{id:null!==t&&void 0!==t?t:"-"},onCellUpdate:function(e,t,n){return L(n)}})}),[L,t]);return Object(r.useEffect)((function(){k()}),[k]),Object(N.jsxs)("div",{className:"literal-expression",children:[f?null:U,Object(N.jsx)("div",{className:"literal-expression-body",children:D})]})},Ee=(n(273),function(e){var t,n,a=Object(r.useContext)(H),c=Object(r.useRef)(e.selected),s=Object(r.useState)(!1),l=Object(i.a)(s,2),u=l[0],b=l[1],p=Object(r.useCallback)((function(e){return b(e)}),[]),f=Object(r.useCallback)((function(t,n){var a;b(!1),c.current=n,null===(a=e.onUpdatingRecursiveExpression)||void 0===a||a.call(e,Object(o.a)(Object(o.a)({},e),{},{selected:n}))}),[e]),j=Object(r.useCallback)((function(){return d.map(e.getOptions(),(function(e){return Object(N.jsx)(g.a,{value:e,"data-ouia-component-id":e,children:e},e)}))}),[e]),m=Object(r.useCallback)((function(){return d.includes(e.getOptions(),c.current)?c.current:void 0}),[e]),O=Object(r.useCallback)((function(){return d.isEmpty(m())}),[m]);return Object(N.jsx)(E.a,{className:"pmml-literal-expression ".concat(O()?"showing-placeholder":""),menuAppendTo:null!==(t=null===(n=a.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:"inline",ouiaId:"pmml-literal-expression-selector",placeholderText:e.noOptionsLabel,"aria-placeholder":e.noOptionsLabel,variant:w.e.single,onToggle:p,onSelect:f,isOpen:u,selections:m(),children:j()})}),we=(n(274),n(275),function(e){var t=S().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:u.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:u.ColumnInsertRight},{name:t.columnOperations.delete,type:u.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:u.RowInsertAbove},{name:t.rowOperations.insertBelow,type:u.RowInsertBelow},{name:t.rowOperations.delete,type:u.RowDelete}]}],a=Object(r.useRef)(void 0===e.columns?[{name:"column-1",dataType:b.Undefined}]:e.columns),i=Object(r.useRef)(void 0===e.rows?[[""]]:e.rows),c=Object(r.useCallback)((function(){var t,n,r,c=Object(o.a)(Object(o.a)({},e),{},{columns:a.current,rows:i.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastRelationExpressionDefinition)||void 0===r||r.call(n,c)}),[e]),s=Object(r.useCallback)((function(){return d.map(a.current,(function(e){return Object(o.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),l=Object(r.useCallback)((function(){return d.map(i.current,(function(e){return d.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),p=Object(r.useCallback)((function(e){i.current=d.map(e,(function(e){return d.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),c()}),[c]),f=Object(r.useCallback)((function(e){a.current=d.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),c()}),[c]);return Object(r.useEffect)((function(){c()}),[c]),Object(N.jsx)("div",{className:"relation-expression",children:Object(N.jsx)(Ce,{editColumnLabel:t.editRelation,columns:s(),rows:l(),onColumnsUpdate:f,onRowsUpdate:p,handlerConfiguration:n})})}),Te=(n(276),n(277),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,i=Object(r.useRef)(null),c=Object(r.useRef)(t);Object(r.useEffect)((function(){c.current=d.omit(t,"isHeadless")}),[t.logicType]);var o=Object(r.useCallback)((function(){return i.current}),[]),s=Object(r.useCallback)((function(e){c.current.logicType=e,n(d.omit(c.current,"isHeadless"))}),[n]),l=Object(r.useCallback)((function(){c.current.logicType=y.Undefined,null===a||void 0===a||a(),n(d.omit(c.current,"isHeadless"))}),[a,n]);return Object(N.jsx)("div",{className:"entry-expression",ref:i,children:Object(N.jsx)(_e,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:c.current,onLogicTypeUpdating:s,onLogicTypeResetting:l,getPlacementRef:o})})}),Re=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(r.useRef)(i.entryInfo),s=Object(r.useRef)(Object(o.a)({uid:i.entryExpression.uid},i.entryExpression));Object(r.useEffect)((function(){c.current=i.entryInfo}),[i.entryInfo]),Object(r.useEffect)((function(){s.current=i.entryExpression,a(n,Object(o.a)(Object(o.a)({},i),{},{entryInfo:c.current,entryExpression:s.current}))}),[i.entryExpression.logicType]);var l=Object(r.useCallback)((function(e){s.current=Object(o.a)({},e);var t=Object(o.a)({},c.current);i.nameAndDataTypeSynchronized&&d.size(e.name)&&d.size(e.dataType)&&(t.name=e.name,t.dataType=e.dataType),a(n,Object(o.a)(Object(o.a)({},i),{},{entryInfo:t,entryExpression:e}))}),[]);return Object(N.jsx)("div",{className:"context-entry-expression-cell",children:Object(N.jsx)(Te,{expression:s.current,onUpdatingRecursiveExpression:l,onExpressionResetting:i.onExpressionResetting})})},ke=(n(278),function(e){var t=e.name,n=e.dataType,a=e.onContextEntryUpdate,c=e.editInfoPopoverLabel,o=Object(r.useState)(t),s=Object(i.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)(n),b=Object(i.a)(d,2),p=b[0],f=b[1];Object(r.useEffect)((function(){u(t)}),[t]),Object(r.useEffect)((function(){f(n)}),[n]);var j=Object(r.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),a(t,n)}),[a]),m=Object(r.useCallback)((function(e){return Object(N.jsxs)("div",{className:"entry-definition ".concat(e),children:[Object(N.jsx)("p",{className:"entry-name pf-u-text-truncate",title:l,children:l}),Object(N.jsxs)("p",{className:"entry-data-type pf-u-text-truncate",title:p,children:["(",p,")"]})]})}),[p,l]),O=Object(r.useMemo)((function(){return Object(N.jsx)(F,{title:c,selectedExpressionName:l,selectedDataType:p,onExpressionUpdate:j,children:m("with-popover-menu")})}),[c,p,l,j,m]);return Object(N.jsx)("div",{className:"entry-info",children:c?O:m()})}),Ie=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(r.useRef)(i.entryInfo),s=Object(r.useRef)(i.entryExpression);Object(r.useEffect)((function(){c.current=i.entryInfo}),[i.entryInfo]),Object(r.useEffect)((function(){s.current=i.entryExpression}),[i.entryExpression]);var l=Object(r.useCallback)((function(e,t){var r=Object(o.a)({},s.current);i.nameAndDataTypeSynchronized&&d.size(e)&&d.size(t)&&(r.name=e,r.dataType=t),a(n,Object(o.a)(Object(o.a)({},i),{},{entryExpression:r,entryInfo:{name:e,dataType:t}}))}),[i,n,a]);return Object(N.jsx)("div",{className:"context-entry-info-cell",children:Object(N.jsx)(ke,{name:c.current.name,dataType:c.current.dataType,onContextEntryUpdate:l,editInfoPopoverLabel:i.editInfoPopoverLabel})})},Le="ContextEntry-1",Se=b.Undefined,Ne=function(e){var t=e.uid,n=e.name,a=void 0===n?Le:n,c=e.dataType,o=void 0===c?Se:c,s=e.onUpdatingNameAndDataType,u=e.contextEntries,h=e.result,x=void 0===h?{}:h,C=e.renderResult,g=void 0===C||C,E=e.entryInfoWidth,w=void 0===E?p:E,T=e.entryExpressionWidth,R=void 0===T?f:T,k=e.isHeadless,I=void 0!==k&&k,L=e.noHandlerMenu,A=void 0!==L&&L,U=e.onUpdatingRecursiveExpression,D=S().i18n,P=Object(r.useRef)(a),M=Object(r.useRef)(o),F=Object(r.useState)(x),W=Object(i.a)(F,2),B=W[0],z=W[1],K=Object(r.useState)(w),G=Object(i.a)(K,2),J=G[0],Y=G[1],q=Object(r.useState)(R),X=Object(i.a)(q,2),_=X[0],Q=X[1],$=r.useContext(H).setSupervisorHash,ee=Object(r.useMemo)((function(){return[{label:P.current,accessor:P.current,dataType:M.current,disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:J,setWidth:Y,minWidth:p},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:_,setWidth:Q,minWidth:f}]}]}),[_,J]),te=Object(r.useState)(u||[{entryInfo:{name:Le,dataType:Se},entryExpression:{name:Le,dataType:Se},editInfoPopoverLabel:D.editContextEntry,nameAndDataTypeSynchronized:!0}]),ne=Object(i.a)(te,2),ae=ne[0],ie=ne[1],re=Object(r.useCallback)((function(){var e,n,a={uid:t,logicType:y.Context,name:P.current,dataType:M.current,contextEntries:ae,result:d.omit(B,"isHeadless"),entryInfoWidth:J,entryExpressionWidth:_};I?null===U||void 0===U||U(d.omit(a,["name","dataType"])):($(V(a)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,a))}),[_,J,I,U,B,ae,$,t]),ce=Object(r.useCallback)((function(e){var t=Object(i.a)(e,1)[0];P.current=t.label,M.current=t.dataType,null===s||void 0===s||s(P.current,M.current),re()}),[s,re]),oe=Object(r.useCallback)((function(){var e=m(d.map(ae,(function(e){return e.entryInfo})),"ContextEntry");return{entryInfo:{name:e,dataType:b.Undefined},entryExpression:{name:e,dataType:b.Undefined},editInfoPopoverLabel:D.editContextEntry,nameAndDataTypeSynchronized:!0}}),[D.editContextEntry,ae]),se=Object(r.useCallback)((function(){return I?l.None:l.SecondToLastLevel}),[I]);return Object(r.useEffect)((function(){re()}),[ee,I,U,ae,B,J,_,t,$,re]),Object(N.jsx)("div",{className:"context-expression ".concat(t),children:Object(N.jsx)(Ce,{tableId:t,headerLevels:1,headerVisibility:se(),defaultCell:{entryInfo:Ie,entryExpression:Re},columns:ee,rows:ae,onColumnsUpdate:ce,onRowAdding:oe,onRowsUpdate:ie,handlerConfiguration:A?void 0:j(D,D.contextEntry),getRowKey:Object(r.useCallback)(O,[]),resetRowCustomFunction:Object(r.useCallback)(v,[]),children:g?[Object(N.jsx)(Z,{width:J,minWidth:p,onHorizontalResizeStop:function(e){return Y(e)},children:Object(N.jsx)("div",{className:"context-result",children:"<result>"})},"context-result"),Object(N.jsx)(Z,{width:_,minWidth:f,onHorizontalResizeStop:function(e){return Q(e)},children:Object(N.jsx)(Te,{expression:B,onUpdatingRecursiveExpression:z})},"context-expression")]:void 0})})};var Ae,Ue=n(91),De=n.n(Ue),Pe=(n(279),n(280),[x.Collect]),He=function(e){var t,n,c,o,s,l,u=e.onBuiltInAggregatorSelect,b=e.onHitPolicySelect,p=e.selectedBuiltInAggregator,f=e.selectedHitPolicy,j=S().i18n,m=Object(r.useState)(!1),O=Object(i.a)(m,2),v=O[0],h=O[1],y=Object(r.useState)(!1),T=Object(i.a)(y,2),R=T[0],k=T[1],I=Object(r.useState)(!d.includes(Pe,f)),L=Object(i.a)(I,2),A=L[0],U=L[1],D=Object(r.useContext)(H),M=Object(r.useCallback)((function(e){return h(e)}),[]),F=Object(r.useCallback)((function(e){return k(e)}),[]),W=Object(r.useCallback)((function(e,t){var n=t,a=d.includes(Pe,n);b(n),a?U(!1):(U(!0),u("<None>")),h(!1)}),[u,b]),B=Object(r.useCallback)((function(){return d.map(Object.values(x),(function(e){return Object(N.jsx)(g.a,{value:e,"data-ouia-component-id":e,children:e},e)}))}),[]),z=Object(r.useCallback)((function(e,t){u(t),k(!1)}),[u]),K=Object(r.useCallback)((function(){return d.map(Object.keys(a),(function(e){return Object(N.jsx)(g.a,{value:e,"data-ouia-component-id":e,children:e},e)}))}),[]),V=Object(r.useCallback)((function(e,t){return d.includes(Pe,t)?e:""}),[]);return Object(N.jsx)(P,{title:j.editHitPolicy,appendTo:null!==(t=null===(n=D.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"hit-policy-popover",hasAutoWidth:!0,body:Object(N.jsxs)("div",{className:"hit-policy-container",children:[Object(N.jsxs)("div",{className:"hit-policy-section",children:[Object(N.jsx)("label",{children:j.hitPolicy}),Object(N.jsx)(E.a,{className:"hit-policy-selector",menuAppendTo:null!==(c=null===(o=D.boxedExpressionEditorRef)||void 0===o?void 0:o.current)&&void 0!==c?c:"inline",ouiaId:"hit-policy-selector",variant:w.e.single,onToggle:M,onSelect:W,isOpen:v,selections:f,children:B()})]}),Object(N.jsxs)("div",{className:"builtin-aggregator-section",children:[Object(N.jsx)("label",{children:j.builtInAggregator}),Object(N.jsx)(E.a,{className:"builtin-aggregator-selector",menuAppendTo:null!==(s=null===(l=D.boxedExpressionEditorRef)||void 0===l?void 0:l.current)&&void 0!==s?s:"inline",ouiaId:"builtin-aggregator-selector",isDisabled:A,variant:w.e.single,onToggle:F,onSelect:z,isOpen:R,selections:C(a,p),children:K()})]})]}),children:Object(N.jsx)("div",{className:"selected-hit-policy",children:"".concat(d.first(f)).concat(V(p,f))})})};!function(e){e.InputClause="input",e.OutputClause="output",e.Annotation="annotation"}(Ae||(Ae={}));var Me="",Fe="output-1",We=function(e){var t=e.uid,n=e.isHeadless,c=e.onUpdatingRecursiveExpression,o=e.name,s=void 0===o?Fe:o,p=e.dataType,f=void 0===p?b.Undefined:p,j=e.onUpdatingNameAndDataType,m=e.hitPolicy,O=void 0===m?x.Unique:m,v=e.aggregation,h=void 0===v?a["<None>"]:v,C=e.input,g=void 0===C?[{name:"input-1",dataType:b.Undefined}]:C,E=e.output,w=void 0===E?[{name:Fe,dataType:b.Undefined}]:E,T=e.annotations,R=void 0===T?[{name:"annotation-1"}]:T,k=e.rules,I=void 0===k?[{inputEntries:["-"],outputEntries:[Me],annotationEntries:[Me]}]:k,L=S().i18n,A=Object(r.useCallback)((function(e){switch(e){case Ae.InputClause:return"input-";case Ae.OutputClause:return"output-";case Ae.Annotation:return"annotation-";default:return"column-"}}),[]),U=Object(r.useCallback)((function(e){return[{group:e,items:[{name:L.columnOperations.insertLeft,type:u.ColumnInsertLeft},{name:L.columnOperations.insertRight,type:u.ColumnInsertRight},{name:L.columnOperations.delete,type:u.ColumnDelete}]},{group:L.decisionRule,items:[{name:L.rowOperations.insertAbove,type:u.RowInsertAbove},{name:L.rowOperations.insertBelow,type:u.RowInsertBelow},{name:L.rowOperations.delete,type:u.RowDelete},{name:L.rowOperations.duplicate,type:u.RowDuplicate}]}]}),[L]),D=Object(r.useContext)(H).setSupervisorHash,P=Object(r.useMemo)((function(){var e={};return e[""]=U(L.ruleAnnotation),e[Ae.InputClause]=U(L.inputClause),e[Ae.OutputClause]=U(L.outputClause),e[Ae.Annotation]=U(L.ruleAnnotation),e}),[U,L.inputClause,L.outputClause,L.ruleAnnotation]),M=Object(r.useMemo)((function(){var e={};return e[Ae.InputClause]=L.editClause.input,e[Ae.OutputClause]=L.editClause.output,e}),[L.editClause.input,L.editClause.output]),F=Object(r.useState)(O),W=Object(i.a)(F,2),B=W[0],z=W[1],K=Object(r.useState)(h),J=Object(i.a)(K,2),Y=J[0],q=J[1],X=Object(r.useCallback)((function(e){return z(e)}),[]),_=Object(r.useCallback)((function(e){return q(a[e])}),[]),Q=Object(r.useRef)(s),Z=Object(r.useRef)(f),$=Object(r.useRef)(b.Undefined),ee=Object(r.useRef)(function(){var e=d.map(g,(function(e){return{label:e.name,accessor:e.name,dataType:e.dataType,width:e.width,groupType:Ae.InputClause,cssClasses:"decision-table--input"}})),t=d.map(w,(function(e){return{label:e.name,accessor:e.name,dataType:e.dataType,width:e.width,groupType:Ae.OutputClause,cssClasses:"decision-table--output"}})),n=d.map(R,(function(e){return{label:e.name,accessor:e.name,width:e.width,inlineEditable:!0,groupType:Ae.Annotation,cssClasses:"decision-table--annotation"}}));return[{groupType:Ae.InputClause,label:"Input",accessor:"Input",cssClasses:"decision-table--input",columns:e},{groupType:Ae.OutputClause,label:Q.current,accessor:Q.current,dataType:Z.current,cssClasses:"decision-table--output",columns:t,appendColumnsOnChildren:!0},{groupType:Ae.Annotation,label:"Annotations",accessor:"Annotations",cssClasses:"decision-table--annotation",columns:n,inlineEditable:!0}]}()),te=Object(r.useRef)(d.map(I,(function(e){var t=[].concat(Object(G.a)(e.inputEntries),Object(G.a)(e.outputEntries),Object(G.a)(e.annotationEntries));return d.reduce(xe(ee.current),(function(e,n,a){return e[n.accessor]=t[a]||Me,e}),{})}))),ne=Object(r.useCallback)((function(){var e,a,i=d.groupBy(xe(ee.current),(function(e){return e.groupType})),r=d.map(i[Ae.InputClause],(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),o=d.map(i[Ae.OutputClause],(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),s=d.map(i[Ae.Annotation],(function(e){return{name:e.accessor,width:e.width}})),l=d.map(te.current,(function(e){return{inputEntries:d.map(r,(function(t){return e[t.name]})),outputEntries:d.map(o,(function(t){return e[t.name]})),annotationEntries:d.map(s,(function(t){return e[t.name]}))}})),u={uid:t,logicType:y.DecisionTable,name:Q.current,dataType:Z.current,hitPolicy:B,aggregation:Y,input:r,output:o,annotations:s,rules:l};n?null===c||void 0===c||c(u):(D(V(u)),null===(e=window.beeApi)||void 0===e||null===(a=e.broadcastDecisionTableExpressionDefinition)||void 0===a||a.call(e,u))}),[n,c,Y,B,D,t]),ae=Object(r.useCallback)((function(e){if(1===d.size(e.columns)){var t=d.first(e.columns).dataType;t!==$.current?($.current=t,e.dataType=t):e.dataType!==Z.current&&($.current=e.dataType,d.first(e.columns).dataType=e.dataType)}}),[]),ie=Object(r.useCallback)((function(e){var t=d.find(e,{groupType:Ae.OutputClause});ae(t),ee.current=Object(G.a)(e),Q.current=t.label,Z.current=t.dataType,null===j||void 0===j||j(t.label,t.dataType),ne()}),[j,ne,ae]),re=Object(r.useCallback)((function(e){return d.map(e,(function(e){return d.reduce(xe(ee.current),(function(t,n){return d.isNil(e[n.accessor])?t[n.accessor]=n.groupType===Ae.InputClause?"-":Me:t[n.accessor]=e[n.accessor],t}),{})}))}),[]),ce=Object(r.useCallback)((function(e){te.current=re(e),ne()}),[re,ne]),oe=Object(r.useCallback)((function(){return d.reduce(xe(ee.current),(function(e,t){return e[t.accessor]=t.groupType===Ae.InputClause?"-":Me,e}),{})}),[]);return Object(r.useEffect)((function(){ne()}),[ne]),Object(N.jsx)("div",{className:"decision-table-expression ".concat(t),children:Object(N.jsx)(Ce,{headerLevels:1,headerVisibility:l.Full,getColumnPrefix:A,editColumnLabel:M,handlerConfiguration:P,columns:ee.current,rows:te.current,onColumnsUpdate:ie,onRowsUpdate:ce,onRowAdding:oe,controllerCell:Object(r.useMemo)((function(){return Object(N.jsx)(He,{selectedHitPolicy:B,selectedBuiltInAggregator:Y,onHitPolicySelect:X,onBuiltInAggregatorSelect:_})}),[_,X,Y,B])})})},Be=(n(281),function(e){var t=e.isHeadless,n=e.items,a=e.onUpdatingRecursiveExpression,c=e.uid,o=e.width,s=void 0===o?430:o,p=S().i18n,f=Object(r.useMemo)((function(){return[{group:p.rows,items:[{name:p.rowOperations.insertAbove,type:u.RowInsertAbove},{name:p.rowOperations.insertBelow,type:u.RowInsertBelow},{name:p.rowOperations.delete,type:u.RowDelete},{name:p.rowOperations.clear,type:u.RowClear}]}]}),[p.rowOperations.clear,p.rowOperations.delete,p.rowOperations.insertAbove,p.rowOperations.insertBelow,p.rows]),j=Object(r.useCallback)((function(){return{uid:De()(),name:"",dataType:b.Undefined,logicType:y.LiteralExpression,content:""}}),[]),m=Object(r.useCallback)((function(){return d.isEmpty(n)?[{entryExpression:j()}]:d.map(n,(function(e){return{entryExpression:e}}))}),[j,n]),O=Object(r.useState)(m()),v=Object(i.a)(O,2),h=v[0],x=v[1],C=Object(r.useState)(s||430),g=Object(i.a)(C,2),E=g[0],w=g[1],T=Object(r.useContext)(H).setSupervisorHash,R=Object(r.useCallback)((function(e){return e.original.entryExpression.uid}),[]),k=Object(r.useCallback)((function(){return{entryExpression:j()}}),[j]);Object(r.useEffect)((function(){var e,n,i={uid:c,logicType:y.List,width:E,items:d.map(h,(function(e){return e.entryExpression}))};t?null===a||void 0===a||a(i):(T(V(i)),null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,i))}),[E,h,t,a,c,T]);var I=Object(r.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),L=Object(r.useCallback)((function(e){x(e)}),[]),A=Object(r.useMemo)((function(){return[{accessor:"list",width:E,setWidth:w}]}),[E]);return Object(r.useMemo)((function(){return Object(N.jsx)("div",{className:"list-expression",children:Object(N.jsx)(Ce,{tableId:c,headerVisibility:l.None,defaultCell:{list:Re},columns:A,rows:h,onRowsUpdate:L,onRowAdding:k,handlerConfiguration:f,getRowKey:R,resetRowCustomFunction:I})})}),[A,f,h,R,k,L,I,c])}),ze=(n(282),"p-1"),Ke=b.Undefined,Ve=function(e){var t=e.bindingEntries,n=e.dataType,a=void 0===n?Ke:n,c=e.entryInfoWidth,o=void 0===c?p:c,s=e.entryExpressionWidth,u=void 0===s?f:s,b=e.invokedFunction,h=void 0===b?"":b,x=e.isHeadless,y=e.logicType,C=e.name,g=void 0===C?ze:C,E=e.onUpdatingNameAndDataType,w=e.onUpdatingRecursiveExpression,T=e.uid,R=S().i18n,k=Object(r.useState)(t||[{entryInfo:{name:ze,dataType:Ke},entryExpression:{name:ze,dataType:Ke},editInfoPopoverLabel:R.editParameter,nameAndDataTypeSynchronized:!0}]),I=Object(i.a)(k,2),L=I[0],A=I[1],U=Object(r.useState)(o),D=Object(i.a)(U,2),P=D[0],M=D[1],F=Object(r.useState)(u),W=Object(i.a)(F,2),B=W[0],z=W[1],K=Object(r.useState)(h),G=Object(i.a)(K,2),J=G[0],Y=G[1],q=Object(r.useContext)(H).setSupervisorHash;Object(r.useEffect)((function(){var e,t,n=Object(i.a)(Q.current,1)[0],a={uid:T,logicType:y,name:n.accessor,dataType:n.dataType,bindingEntries:L,invokedFunction:J,entryInfoWidth:P,entryExpressionWidth:B},r=d.omit(a,["name","dataType"]);x?null===w||void 0===w||w(r):(q(V(r)),null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,a))}),[B,J,P,x,y,w,L,q,T]);var X=Object(r.useCallback)((function(e){Y(e.target.value)}),[]),_=Object(N.jsx)("div",{className:"function-definition-container",children:Object(N.jsx)("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:R.enterFunction,defaultValue:J,onBlur:X})}),Q=Object(r.useRef)([{label:g,accessor:g,dataType:a,disableHandlerOnHeader:!0,columns:[{headerCellElement:_,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,width:P,setWidth:M,minWidth:p},{accessor:"entryExpression",disableHandlerOnHeader:!0,width:B,setWidth:z,minWidth:f}]}]}]),Z=Object(r.useCallback)((function(e){var t=Object(i.a)(e,1)[0];null===E||void 0===E||E(t.label,t.dataType);var n=Object(i.a)(Q.current,1)[0];n.label=t.label,n.accessor=t.accessor,n.dataType=t.dataType}),[E]),$=Object(r.useCallback)((function(){var e=m(d.map(L,(function(e){return e.entryInfo})),"p");return{entryInfo:{name:e,dataType:Ke},entryExpression:{name:e,dataType:Ke},editInfoPopoverLabel:R.editParameter,nameAndDataTypeSynchronized:!0}}),[R.editParameter,L]),ee=Object(r.useCallback)((function(){return x?l.SecondToLastLevel:l.Full}),[x]),te=Object(r.useCallback)((function(e){return A(e)}),[]),ne=Object(r.useCallback)((function(e){return O(e)}),[]),ae=Object(r.useCallback)((function(e){return v(e)}),[]);return Object(r.useMemo)((function(){return Object(N.jsx)("div",{className:"invocation-expression ".concat(T),children:Object(N.jsx)(Ce,{tableId:T,headerLevels:2,headerVisibility:ee(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:Ie,entryExpression:Re},columns:Q.current,rows:L,onColumnsUpdate:Z,onRowAdding:$,onRowsUpdate:te,handlerConfiguration:j(R,R.parameters),getRowKey:ne,resetRowCustomFunction:ae})})}),[ee,ne,R,Z,$,ae,L,te,T])},Ge=(n(283),n(48)),Je=n(299),Ye=function(e){var t=e.parameters,n=e.setParameters,a=S().i18n,i=Object(r.useCallback)((function(){n((function(e){return[].concat(Object(G.a)(e),[{name:m(e,"p"),dataType:b.Undefined}])}))}),[n]),c=Object(r.useCallback)((function(e){return function(t){return n((function(n){return n[e].name=t.target.value,Object(G.a)(n)}))}}),[n]),o=Object(r.useCallback)((function(e){return function(t){n((function(n){return n[e].dataType=t,Object(G.a)(n)}))}}),[n]),s=Object(r.useCallback)((function(e){return function(){return n((function(t){return[].concat(Object(G.a)(t.slice(0,e)),Object(G.a)(t.slice(e+1)))}))}}),[n]);return Object(N.jsxs)("div",{className:"parameters-editor",children:[Object(N.jsx)(Ge.a,{variant:"tertiary",onClick:i,className:"add-parameter",children:a.addParameter}),Object(N.jsx)("div",{className:"parameters-container",children:d.map(t,(function(e,t){return Object(N.jsxs)("div",{className:"parameter-entry",children:[Object(N.jsx)("input",{className:"parameter-name",type:"text",onBlur:c(t),defaultValue:e.name}),Object(N.jsx)(A,{selectedDataType:e.dataType,onDataTypeChange:o(t),menuAppendTo:"parent"}),Object(N.jsx)(Ge.a,{variant:"danger",className:"delete-parameter",icon:Object(N.jsx)(Je.a,{}),iconPosition:"left",onClick:s(t),children:a.delete})]},"".concat(e.name,"_").concat(t))}))})]})},qe=(n(284),function(e){var t,n,a=e.selectedFunctionKind,i=e.onFunctionKindSelect,c=S().i18n,o=Object(r.useContext)(H),s=Object(r.useCallback)((function(e){return function(t,n){i(n),e()}}),[i]),l=Object(r.useCallback)((function(){return d.map(Object.values(h),(function(e){return Object(N.jsx)(be.a,{itemId:e,"data-ouia-component-id":e,children:e},e)}))}),[]);return Object(N.jsx)(P,{title:c.selectFunctionKind,appendTo:null!==(t=null===(n=o.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"function-kind-popover",hasAutoWidth:!0,body:function(e){return Object(N.jsx)(le.a,{onSelect:s(e),children:Object(N.jsx)(de.a,{children:l()})})},children:Object(N.jsx)("div",{className:"selected-function-kind",children:d.first(a)})})}),Xe=function(e){var t=void 0===e.parametersWidth?f:e.parametersWidth,n=void 0===e.formalParameters?[]:e.formalParameters,a=void 0===e.functionKind?h.Feel:e.functionKind,c=Object(r.useState)(t),o=Object(i.a)(c,2),s=o[0],p=o[1],j=S().i18n,m=Object(r.useContext)(H),O=m.boxedExpressionEditorRef,x=m.setSupervisorHash,C=m.pmmlParams,g=Object(r.useState)(n),E=Object(i.a)(g,2),w=E[0],T=E[1],R=Object(r.useRef)(void 0===e.name?"p-1":e.name),k=Object(r.useRef)(void 0===e.dataType?b.Undefined:e.dataType),I=Object(r.useRef)(e.document),L=Object(r.useRef)(e.model),A=Object(r.useCallback)((function(){return function(){return O.current}}),[O]),U=Object(r.useMemo)((function(){return Object(N.jsx)(P,{title:j.editParameters,appendTo:A(),className:"parameters-editor-popover",minWidth:"400px",body:Object(N.jsx)(Ye,{parameters:w,setParameters:T}),children:Object(N.jsx)("div",{className:"parameters-list ".concat(d.isEmpty(w)?"empty-parameters":""),children:Object(N.jsx)("p",{className:"pf-u-text-truncate",children:d.isEmpty(w)?j.editParameters:"(".concat(d.join(d.map(w,(function(e){return e.name})),", "),")")})})})}),[A,j.editParameters,w]),D=Object(r.useCallback)((function(){return[{label:R.current,accessor:R.current,dataType:k.current,disableHandlerOnHeader:!0,columns:[{headerCellElement:U,accessor:"parameters",disableHandlerOnHeader:!0,width:s,minWidth:f}]}]}),[U,s]),M=Object(r.useCallback)((function(e){return[{entryInfo:{name:j.class,dataType:b.String},entryExpression:{noClearAction:!0,logicType:y.LiteralExpression,content:e.class}},{entryInfo:{name:j.methodSignature,dataType:b.String},entryExpression:{noClearAction:!0,logicType:y.LiteralExpression,content:e.method}}]}),[j.class,j.methodSignature]),F=Object(r.useCallback)((function(){return[{entryInfo:{name:j.document,dataType:b.String},entryExpression:{noClearAction:!0,logicType:y.PMMLLiteralExpression,noOptionsLabel:j.pmml.firstSelection,getOptions:function(){return d.map(C,"document")},selected:I.current}},{entryInfo:{name:j.model,dataType:b.String},entryExpression:{noClearAction:!0,logicType:y.PMMLLiteralExpression,noOptionsLabel:j.pmml.secondSelection,getOptions:function(){var e;return d.map(null===(e=d.find(C,(function(e){return e.document===I.current})))||void 0===e?void 0:e.modelsFromDocument,"model")},selected:L.current}}]}),[j.document,j.model,j.pmml.firstSelection,j.pmml.secondSelection,C]),W=Object(r.useCallback)((function(){var e,t;return(null===(e=d.find(null===(t=d.find(C,{document:I.current}))||void 0===t?void 0:t.modelsFromDocument,{model:L.current}))||void 0===e?void 0:e.parametersFromModel)||[]}),[]),B=Object(r.useCallback)((function(t){switch(t){case h.Java:var n=e;return[{entryExpression:{logicType:y.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:M(n)}}];case h.Pmml:return[{entryExpression:{logicType:y.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:F()}}];case h.Feel:default:return[{entryExpression:e.expression||{logicType:y.LiteralExpression}}]}}),[M,F,e]),z=Object(r.useRef)(D()),K=Object(r.useState)(a),G=Object(i.a)(K,2),J=G[0],Y=G[1],q=Object(r.useState)(B(J)),X=Object(i.a)(q,2),_=X[0],Q=X[1],Z=Object(r.useCallback)((function(e,t){var n,a,i,r,c,o;return e===I.current&&d.includes(null===(n=d.nth(t.contextEntries,1))||void 0===n||null===(a=n.entryExpression)||void 0===a?void 0:a.getOptions(),null===(i=d.nth(t.contextEntries,1))||void 0===i||null===(r=i.entryExpression)||void 0===r?void 0:r.selected)?null===(c=d.nth(t.contextEntries,1))||void 0===c||null===(o=c.entryExpression)||void 0===o?void 0:o.selected:""}),[]),$=Object(r.useCallback)((function(e,t){if(e&&T([]),t){var n=W();d.isEmpty(n)||T(n)}}),[W]),ee=Object(r.useCallback)((function(e,t){switch(t){case h.Java:var n,a,i,r,c,o=null===(n=d.first(_))||void 0===n?void 0:n.entryExpression,s=(null===(a=d.nth(o.contextEntries,0))||void 0===a||null===(i=a.entryExpression)||void 0===i?void 0:i.content)||"",l=(null===(r=d.nth(o.contextEntries,1))||void 0===r||null===(c=r.entryExpression)||void 0===c?void 0:c.content)||"";return d.extend(e,{class:s,method:l});case h.Pmml:var u,b,p,f=null===(u=d.first(_))||void 0===u?void 0:u.entryExpression,j=(null===(b=d.nth(f.contextEntries,0))||void 0===b||null===(p=b.entryExpression)||void 0===p?void 0:p.selected)||"",m=Z(j,f),O=j!==I.current,v=m!==L.current;return I.current=j,L.current=m,$(O,v),d.extend(e,{document:j,model:m});case h.Feel:default:var x;return d.extend(e,{expression:null===(x=d.first(_))||void 0===x?void 0:x.entryExpression})}}),[Z,_,$]),te=Object(r.useCallback)((function(){var t,n,a,r=Object(i.a)(z.current,1)[0],c=ee({uid:e.uid,logicType:e.logicType,name:r.accessor,dataType:r.dataType,functionKind:J,formalParameters:w,parametersWidth:s},J);e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,d.omit(c,["name","dataType"])):(x(V(_)),null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastFunctionExpressionDefinition)||void 0===a||a.call(n,c))}),[ee,x,w,e,J,_,s]),ne=Object(r.useCallback)((function(){return e.isHeadless?l.LastLevel:l.Full}),[e.isHeadless]),ae=Object(r.useCallback)((function(e){var t=e;Y(t),Q([{entryExpression:{logicType:y.Undefined}}]),setTimeout((function(){Q(B(t))}),0)}),[B]),ie=Object(r.useCallback)((function(t){var n,a=Object(i.a)(t,1)[0];null===(n=e.onUpdatingNameAndDataType)||void 0===n||n.call(e,a.label,a.dataType),p(a.width);var r=Object(i.a)(z.current,1)[0];r.label=a.label,r.accessor=a.accessor,r.dataType=a.dataType,te()}),[z,e,te]);Object(r.useEffect)((function(){te()}),[_,te]),Object(r.useEffect)((function(){z.current=D()}),[w]);var re=Object(r.useCallback)((function(e){return Y(h.Feel),v(e)}),[]);return Object(N.jsx)("div",{className:"function-expression ".concat(e.uid),children:Object(N.jsx)(Ce,{handlerConfiguration:[{group:d.upperCase(j.function),items:[{name:j.rowOperations.clear,type:u.RowClear}]}],columns:z.current,onColumnsUpdate:ie,rows:_,onRowsUpdate:Q,headerLevels:1,headerVisibility:ne(),controllerCell:Object(r.useMemo)((function(){return Object(N.jsx)(qe,{selectedFunctionKind:J,onFunctionKindSelect:ae})}),[ae,J]),defaultCell:{parameters:Re},resetRowCustomFunction:re})})},_e=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,a=e.onLogicTypeResetting,c=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,u=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,p=S().i18n,f=Object(r.useContext)(H),j=d.extend(t,{uid:t.uid||De()(),isHeadless:u,onUpdatingNameAndDataType:c,onUpdatingRecursiveExpression:b}),m=function(e){return!d.isEmpty(e)&&e!==y.Undefined},O=Object(r.useState)(m(j.logicType)),v=Object(i.a)(O,2),x=v[0],C=v[1];Object(r.useEffect)((function(){C(m(t.logicType))}),[t.logicType]);var g=function(){var e=Object(r.useRef)(null),t=Object(r.useState)("0px"),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)("0px"),s=Object(i.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)(!1),b=Object(i.a)(d,2),p=b[0],f=b[1],j=Object(r.useRef)(),m=Object(r.useCallback)((function(){p&&f(!1)}),[p]),O=Object(r.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),j.current=t.target,c("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),f(!0))}),[c,u]);return Object(r.useEffect)((function(){return document.addEventListener("click",m),document.addEventListener("contextmenu",m),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",m),document.removeEventListener("contextmenu",m),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:a,contextMenuYPos:l,contextMenuVisibility:p,setContextMenuVisibility:f,targetElement:j.current}}(),E=g.contextMenuRef,w=g.contextMenuXPos,T=g.contextMenuYPos,R=g.contextMenuVisibility,k=g.setContextMenuVisibility,I=g.targetElement,L=Object(r.useMemo)((function(){switch(j.logicType){case y.LiteralExpression:return Object(N.jsx)(ge,Object(o.a)({},j));case y.PMMLLiteralExpression:return Object(N.jsx)(Ee,Object(o.a)({},j));case y.Relation:return Object(N.jsx)(we,Object(o.a)({},j));case y.Context:return Object(N.jsx)(Ne,Object(o.a)({},j));case y.DecisionTable:return Object(N.jsx)(We,Object(o.a)({},j));case y.Invocation:return Object(N.jsx)(Ve,Object(o.a)({},j));case y.List:return Object(N.jsx)(Be,Object(o.a)({},j));case y.Function:return Object(N.jsx)(Xe,Object(o.a)({},d.defaults(j,{functionKind:h.Feel})));default:return j.logicType}}),[j.logicType]),A=Object(r.useCallback)((function(){return Object.values(y).filter((function(e){return!d.includes([y.Undefined,y.PMMLLiteralExpression],e)}))}),[]),U=Object(r.useCallback)((function(){return d.map(A(),(function(e){return Object(N.jsx)(be.a,{itemId:e,children:e},e)}))}),[A]),D=Object(r.useCallback)((function(){return s()}),[s]),M=Object(r.useCallback)((function(){var e,t;return null!==(e=null===(t=f.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:D}),[D,f.boxedExpressionEditorRef]),F=Object(r.useCallback)((function(e,t){C(!0),n(t)}),[n]),W=Object(r.useCallback)((function(){return Object(N.jsx)(P,{title:p.selectLogicType,arrowPlacement:D,appendTo:M(),className:"logic-type-popover",hasAutoWidth:!0,body:Object(N.jsx)(le.a,{onSelect:F,children:Object(N.jsx)(de.a,{children:U()})})})}),[p.selectLogicType,D,M,F,U]),B=Object(r.useCallback)((function(){C(!1),k(!1),a()}),[a,k]),z=Object(r.useCallback)((function(){var e;return Object(N.jsx)("div",{className:"context-menu-container no-table-context-menu",style:{top:T,left:w},children:Object(N.jsx)(le.a,{className:"table-handler-menu",children:Object(N.jsx)(ue.a,{label:(null!==(e=null===j||void 0===j?void 0:j.logicType)&&void 0!==e?e:y.Undefined).toLocaleUpperCase(),children:Object(N.jsx)(de.a,{children:Object(N.jsx)(be.a,{isDisabled:!x,onClick:B,children:p.clear})})})})})}),[T,w,j.logicType,x,B,p.clear]),K=Object(r.useMemo)((function(){var e=d.isNil(null===I||void 0===I?void 0:I.closest("table")),n=!d.isNil(null===I||void 0===I?void 0:I.closest(".row-remainder-content")),a=e||n;return!t.noClearAction&&R&&a}),[R,t.noClearAction,I]);return Object(N.jsxs)("div",{className:"logic-type-selector ".concat(x?"logic-type-selected":"logic-type-not-present"),ref:E,children:[x?L:p.selectExpression,x?null:W(),K?z():null]})},Qe=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(e.selectedExpression),a=Object(i.a)(n,2),c=a[0],s=a[1],l=Object(r.useCallback)((function(e,t){s((function(n){return Object(o.a)(Object(o.a)({},n),{},{name:e,dataType:t})}))}),[]),u=Object(r.useCallback)((function(e){s((function(t){return Object(o.a)(Object(o.a)({},t),{},{logicType:e})}))}),[]),d=Object(r.useCallback)((function(){s((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:y.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(r.useCallback)((function(){return t.current}),[]);return Object(N.jsxs)("div",{className:"expression-container",children:[Object(N.jsxs)("div",{className:"expression-name-and-logic-type",children:[Object(N.jsx)("span",{className:"expression-title",children:c.name}),Object(N.jsxs)("span",{className:"expression-type",children:["(",c.logicType||y.Undefined,")"]})]}),Object(N.jsx)("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container",children:Object(N.jsx)(_e,{selectedExpression:c,onLogicTypeUpdating:u,onLogicTypeResetting:d,onUpdatingNameAndDataType:l,getPlacementRef:b})})]})},Ze=function(e){var t=Object(r.useState)((function(){return d.identity})),n=Object(i.a)(t,2),a=n[0],c=n[1],l=Object(r.useRef)(null),u=Object(r.useState)(V(e.expressionDefinition)),b=Object(i.a)(u,2),p=b[0],f=b[1];return Object(r.useMemo)((function(){return Object(N.jsx)(s.I18nDictionariesProvider,{defaults:k,dictionaries:I,initialLocale:navigator.language,ctx:L,children:Object(N.jsx)(H.Provider,{value:{pmmlParams:e.pmmlParams,supervisorHash:p,setSupervisorHash:f,boxedExpressionEditorRef:l,currentlyOpenedHandlerCallback:a,setCurrentlyOpenedHandlerCallback:c},children:Object(N.jsx)($,{children:Object(N.jsx)("div",{className:"boxed-expression-editor",ref:l,children:Object(N.jsx)(Qe,Object(o.a)({},e.expressionDefinition))})})})})}),[e.expressionDefinition])};window.renderBoxedExpressionEditor=function(e,t){c.render(Object(N.jsx)(Ze,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))};var $e=function(){var e={name:"Expression Name",dataType:b.Undefined},t=[{document:"mining pmml",modelsFromDocument:[{model:"MiningModelSum",parametersFromModel:[{name:"input1",dataType:b.Any},{name:"input2",dataType:b.Any},{name:"input3",dataType:b.Any}]}]},{document:"regression pmml",modelsFromDocument:[{model:"RegressionLinear",parametersFromModel:[{name:"i1",dataType:b.Number},{name:"i2",dataType:b.Number}]}]}],n=Object(r.useState)(e),a=Object(i.a)(n,2),c=a[0],o=a[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return o(e)},broadcastLiteralExpressionDefinition:function(e){return o(e)},broadcastRelationExpressionDefinition:function(e){return o(e)},broadcastContextExpressionDefinition:function(e){return o(e)},broadcastListExpressionDefinition:function(e){return o(e)},broadcastInvocationExpressionDefinition:function(e){return o(e)},broadcastFunctionExpressionDefinition:function(e){return o(e)},broadcastDecisionTableExpressionDefinition:function(e){return o(e)}},Object(N.jsxs)("div",{className:"showcase",children:[Object(N.jsx)("div",{className:"boxed-expression",children:Object(N.jsx)(Ze,{expressionDefinition:s,pmmlParams:t})}),Object(N.jsx)("div",{className:"updated-json",children:Object(N.jsx)("pre",{children:JSON.stringify(c,null,2)})})]})};c.render(Object(N.jsx)($e,{}),document.getElementById("root"))}},[[285,1,2]]]);
//# sourceMappingURL=main.6cdcdc0d.chunk.js.map